<html lang="en"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="manifest" href="manifest.json">
    <title>ConsoleX</title>

    <style>
        body {
            background-color: black;
            margin: 0px;
            padding: 0px;
        }
    </style>

</head>
<body>

    <div id="customHTML" style="position: absolute; width: 100%; height: 100%;"></div>

    <script>
        //MARK
        let functions = {"edit":"outputText.value = (arg in functions) ? functions[arg] : `// Function ${arg}`;\noutputText.readOnly = false;\noutputText.wrap = \"off\";\ninputText.style.display = \"none\";\nenterButton.innerHTML = \"SAVE\";\nenterButton.style.width = \"100%\";\n\nif (!(\"addTabKeyForEditing\" in window)) {\n    window.addTabKeyForEditing = true;\n    outputText.addEventListener('keydown', function(event) {\n        if (event.key === 'Tab') {\n            event.preventDefault();\n            const start = outputText.selectionStart;\n            const end = outputText.selectionEnd;\n            outputText.value = outputText.value.substring(0, start) + '    ' + outputText.value.substring(end);\n            outputText.selectionStart = outputText.selectionEnd = start + 4;\n        }\n    });\n}\n\ninput = function() {\n    functions[arg] = outputText.value;\n    saveData();\n    generateScripts();\n    consolex();\n}","export":"// Function export\n\n\noutputToConsole(\"> export\\n\\nWould you like to export as a HTML file or JSON file?\\nHTML: A completely independant file that can be run offline and contains all function changes.\\nJSON: A file that can only be re-imported as a backup containing all function and data changes.\\n\\n0: HTML\\n1: JSON\\n2: Return\");\n\ninput = function() {\n    let inp = inputText.value;\n    let decision = (!isNaN(parseInt(inp))) ? parseInt(inp) : 2;\n    if (decision == 0) {\n        exportHTML();\n        consolex();\n        outputToConsole(\"HTML Exported!\\n\\n\");\n    } else if (decision == 1) {\n        exportJSON();\n        consolex();\n        outputToConsole(\"JSON Exported!\\n\\n\");\n    } else if (decision == 2) {\n        consolex();\n    } else {\n        outputToConsole(`> ${inp}\\nInvalid input.\\n\\n`);\n    }\n}\n\nfunction exportHTML() {\n    document.getElementById(\"customHTML\").innerHTML = \"\";\n    data = {};\n    for (const funcName in functions) {\n        const scriptName = `Script_${funcName}`;\n        if (document.getElementById(scriptName)) document.getElementById(scriptName).remove();\n    }\n    let htmlContent = document.documentElement.outerHTML;\n\n    let splitHTML = htmlContent.split(\"//MARK\")\n    const htmlStart = splitHTML.shift();\n    const htmlFinish =  splitHTML.pop();\n    const newHTML = htmlStart + `//MARK\\n        let functions = ` + JSON.stringify(functions) + \";\\n        let data = \" +  JSON.stringify(data) + \";\\n        //MARK\" + htmlFinish;\n\n    const blob = new Blob([newHTML], {type: 'text/html'});\n    const a = document.createElement('a');\n    a.href = URL.createObjectURL(blob);\n    a.download = 'index.html';\n    a.click();\n    URL.revokeObjectURL(a.href);\n}\n\nfunction exportJSON() {\n    const newData = [functions, data];\n    const jsonStr = JSON.stringify(newData, null, 2);\n    const blob = new Blob([jsonStr], {type: \"application/json\"});\n    const link = document.createElement('a');\n    link.href = URL.createObjectURL(blob);\n    link.download = \"ConsoleXSaveFile.json\";\n    link.click();\n    URL.revokeObjectURL(link.href);\n}\n","reset":"// Function reset\n\nresetData();\noutputToConsole(\"Data Reset!\\n\\n\");","help":"// Function help\n\nlet txt = \"\";\nswitch (arg) {\n    case \"edit\":\n        txt = `> help  edit\\nThe edit function is used to edit the JavaScript of functions.\\n\\n`;\n        break;\n\n    case \"export\":\n        txt = `> help  export\\nThe export function is used export your current instance of ConsoleX and downloads a new HTML file containing all the changes.\\n\\n`;\n        break;\n\n    case \"functions\":\n        functionList = Object.keys(functions).slice().sort();\n        functionText = \"\";\n        functionList.forEach((elem, index) => {\n            functionText += `\\n- ${elem}`;\n        })\n        clear();\n        txt = `Help\\n\\nFollowing is a list of all the functions available to you, you can enter its name in the console to run it, alternatively you can enter help followed by one of the functions for some additional information about what it does and how it works. For example: \\n\\nhelp edit\\n\\nHere are a list of all the functions:\\n${functionText}\\n\\n`;\n        break;\n\n    case \"help\":\n        txt = `> help  help\\nThe help function displays some extra information about how to use ConsoleX that may be helpful.\\n\\n`;\n        break;\n\n    case \"remove\":\n        txt = `> help  remove\\nThe remove function when followed by the name of a function, removes it.\\n\\n`;\n        break;\n\n    case \"reset\":\n        txt = `> help  reset\\nThe reset function removes all changes that you have made and restores the default ConsoleX experience.\\n\\n`;\n        break;\n\n    default:\n        txt = \"> help\\nFor a list of all the functions that you can run enter 'help functions'.\\n\\n\";\n        break;\n    \n}\noutputToConsole(txt);\n\n","consolex":"// Function consolex\n\ndocument.getElementById(\"customHTML\").innerHTML = `\n    <div id=\"terminal\" style=\"position: absolute; top: 10px; left: 10px; width: calc(100% - 40px); height: calc(100% - 40px); display: flex; flex-direction: column; gap: 10px; background-color: green; border-radius: 8px; padding: 10px;\">\n        <div id=\"outputArea\" style=\"width: 100%; height: 100%; background-color: black; border-radius: 8px; color: green; font-size: 24px; overflow-y: auto; scrollbar-width: none;\">\n            <textarea id=\"outputText\" style=\"width: calc(100%); height: calc(100%); padding: 5px; color: green; font-size: 16px; background-color: rgba(0, 0, 0, 0); border: none; resize: none; scrollbar-width: none;\" wrap=\"soft\" readonly=\"\"></textarea>\n        </div>\n        <form id=\"inputArea\" onsubmit=\"event.preventDefault(); input();\" style=\"width: 100%; height: 40px; display: flex; gap: 10px; margin: 0px;\">\n            <input id=\"inputText\" type=\"text\" placeholder=\"Type Here ....\" style=\"width: 100%; font-size: 24px; color: green; background-color: black; border: none; border-radius: 8px; padding-left: 5px; display: block;\">\n            <button id=\"enterButton\" type=\"submit\" style=\"background-color: black; color: green; font-size: 24px; width: auto;\">ENTER</button>\n        </form>\n    </div>\n`;\n\nwindow.outputArea = document.getElementById(\"outputArea\");\nwindow.outputText = document.getElementById(\"outputText\");\nwindow.inputArea = document.getElementById(\"inputArea\");\nwindow.inputText = document.getElementById(\"inputText\");\nwindow.enterButton = document.getElementById(\"enterButton\");\n\nwindow.outputToConsole = function(txt) {\n    outputText.value += txt;\n    outputText.scrollTop = outputText.scrollHeight;\n}\n\nenterButton.innerHTML = \"ENTER\";\ninputText.value = \"\";\noutputText.value = \"Welcome to ConsoleX\\n\\nenter help for more information\\n\\n\";\nwindow.input = function() {\n    let inp = inputText.value;\n    let inpBroken = inp.toLowerCase().split(\" \")\n    let funcCall = inpBroken.shift();\n    let args = inpBroken.join(\" \");\n    if (funcCall in functions) {\n        window[funcCall](args);\n    } else {\n        outputToConsole(`> ${inp}\\nUnknown command.\\n\\n`);\n    }\n    inputText.value = \"\";\n}","tic80":"// Function tic80\n\nwindow.location.href = \"/Games/Editor\"","remove":"// Function remove\n\nconst scriptToRemove = document.getElementById(`Script_${arg.toLowerCase()}`);\n\nif (scriptToRemove) scriptToRemove.remove();\n\nif (arg in functions) delete functions[arg];\n\nsaveData();\n\nconsolex();\n\n","clear":"// Function clear\n\noutputText.value = \"\";","cardcreator":"// Function cardcreator\n\n\n\n\n\n\nconst cardIcons = [\"Slow\" , \"Tap\" , \"Power\" , \"Agility\" , \"Wisdom\"];\nconst cardIconImage = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAAAQCAYAAACBSfjBAAAAAXNSR0IArs4c6QAAAORJREFUWIXtl+sOgyAMhWHZ+79y92cm2J1eaJkY0y8hIlIutT1ia0Wxk87uKWgn2aJ+j+IN2qxNa04ebYldV48fGcM7t9Tv5/nLuaAMfShZPBmi9fFmmBsUgdTsNzALgbrl0Ki8rLJ3wSPwmBRN5t04gts8RhtRCiMnZpzHx50Zg4YSIWPrskcpnMFabDbyroxcHkBwbkkD29eA1zV9lI42Xbla7HK4JmEneAoj5x3tmj5K8LSNpPFOzNODpIHSG5jduOTsv3wRF9OF+glJA1dFyEy63wm0PhhYK3/lEFkNLIpC5QPRVTgksfcGbAAAAABJRU5ErkJggg==\";\nconst cardFont = \"'Courier New', monospace\";\nconst xCoord = 4;\nconst yCoord = 15;\n\n\n\n\n\n\n\n// ---------- D E C K S ----------\n\nconst decks = {\n  \"Deck 1\" : {\n    \"Ace of Clubs\": {\n      \"title\": \"Bjaldor\",\n      \"durability\": \"18\",\n      \"suitValue\": \"AC\",\n      \"footer\": \"Character\",\n      \"abilities\": [\n        {\n          \"title\": \"Play\",\n          \"textType\": \"normal\",\n          \"text\": \"Play 1 Card from your Hand into your Field.\",\n          \"cost\": [\"Slow\"]\n        },\n        {\n          \"title\": \"Draw\",\n          \"textType\": \"normal\",\n          \"text\": \"Draw the top Card from your Deck into your Hand.\",\n          \"cost\": [\"Slow\"]\n        },\n        {\n          \"title\": \"Untap\",\n          \"textType\": \"normal\",\n          \"text\": \"Untap all Cards in your Field.\",\n          \"cost\": [\"Slow\"]\n        },\n        {\n          \"title\": \"Attribute\",\n          \"textType\": \"normal\",\n          \"text\": \"Generate 2 Power Points and 1 Agility Point.\",\n          \"cost\": [\"Tap\"]\n        },\n        {\n          \"title\": \"\",\n          \"textType\": \"italic\",\n          \"text\": \"Half-Orc Barbarian\",\n          \"cost\": []\n        }\n      ]\n    },\n    \"2 of Clubs\": {\n      \"title\": \"Warhammer\",\n      \"durability\": \"0\",\n      \"suitValue\": \"2C\",\n      \"footer\": \"Item\",\n      \"abilities\": []\n    },\n    \"3 of Clubs\": {\n      \"title\": \"Battle Axe\",\n      \"durability\": \"0\",\n      \"suitValue\": \"3C\",\n      \"footer\": \"Item\",\n      \"abilities\": []\n    },\n    \"4 of Clubs\": {\n      \"title\": \"Iron Shield\",\n      \"durability\": \"0\",\n      \"suitValue\": \"4C\",\n      \"footer\": \"Item\",\n      \"abilities\": []\n    },\n    \"5 of Clubs\": {\n      \"title\": \"Chainmail Armour\",\n      \"durability\": \"0\",\n      \"suitValue\": \"5C\",\n      \"footer\": \"Item\",\n      \"abilities\": []\n    },\n    \"6 of Clubs\": {\n      \"title\": \"Spiked Gauntlets\",\n      \"durability\": \"0\",\n      \"suitValue\": \"6C\",\n      \"footer\": \"Item\",\n      \"abilities\": []\n    },\n    \"7 of Clubs\": {\n      \"title\": \"Greatsword\",\n      \"durability\": \"0\",\n      \"suitValue\": \"7C\",\n      \"footer\": \"Item\",\n      \"abilities\": []\n    },\n    \"8 of Clubs\": {\n      \"title\": \"Reinforced Boots\",\n      \"durability\": \"0\",\n      \"suitValue\": \"8C\",\n      \"footer\": \"Item\",\n      \"abilities\": []\n    },\n    \"9 of Clubs\": {\n      \"title\": \"Might Gauntlets\",\n      \"durability\": \"0\",\n      \"suitValue\": \"9C\",\n      \"footer\": \"Item\",\n      \"abilities\": []\n    },\n    \"10 of Clubs\": {\n      \"title\": \"Heavy Crossbow\",\n      \"durability\": \"0\",\n      \"suitValue\": \"10C\",\n      \"footer\": \"Item\",\n      \"abilities\": []\n    },\n    \"Jack of Clubs\": {\n      \"title\": \"Dragonone Mace\",\n      \"durability\": \"0\",\n      \"suitValue\": \"JC\",\n      \"footer\": \"Item\",\n      \"abilities\": []\n    },\n    \"Queen of Clubs\": {\n      \"title\": \"Titan's Gauntlets\",\n      \"durability\": \"0\",\n      \"suitValue\": \"QC\",\n      \"footer\": \"Item\",\n      \"abilities\": []\n    },\n    \"King of Clubs\": {\n      \"title\": \"Ironclad Bruiser\",\n      \"durability\": \"0\",\n      \"suitValue\": \"KC\",\n      \"footer\": \"Ally\",\n      \"abilities\": []\n    },\n    \"Ace of Hearts\": {\n      \"title\": \"Tessa Vale\",\n      \"durability\": \"14\",\n      \"suitValue\": \"AH\",\n      \"footer\": \"Character\",\n      \"abilities\": [\n        {\n          \"title\": \"Play\",\n          \"textType\": \"normal\",\n          \"text\": \"Play 1 Card from your Hand into your Field.\",\n          \"cost\": [\"Tap\"]\n        },\n        {\n          \"title\": \"Draw\",\n          \"textType\": \"normal\",\n          \"text\": \"Draw the top Card from your Deck into your Hand.\",\n          \"cost\": [\"Slow\"]\n        },\n        {\n          \"title\": \"Untap\",\n          \"textType\": \"normal\",\n          \"text\": \"Untap all Cards in your Field.\",\n          \"cost\": [\"Slow\"]\n        },\n        {\n          \"title\": \"Attribute\",\n          \"textType\": \"normal\",\n          \"text\": \"Generate 2 Agility Points and 1 Wisdom Point.\",\n          \"cost\": [\"Tap\"]\n        },\n        {\n          \"title\": \"\",\n          \"textType\": \"italic\",\n          \"text\": \"Tiefling Rogue\",\n          \"cost\": []\n        }\n      ]\n    },\n    \"2 of Hearts\": {\n      \"title\": \"Twin Daggers\",\n      \"durability\": \"0\",\n      \"suitValue\": \"2H\",\n      \"footer\": \"Item\",\n      \"abilities\": []\n    },\n    \"3 of Hearts\": {\n      \"title\": \"Throwing Stars\",\n      \"durability\": \"0\",\n      \"suitValue\": \"3H\",\n      \"footer\": \"Item\",\n      \"abilities\": []\n    },\n    \"4 of Hearts\": {\n      \"title\": \"Leather Armour\",\n      \"durability\": \"0\",\n      \"suitValue\": \"4H\",\n      \"footer\": \"Item\",\n      \"abilities\": []\n    },\n    \"5 of Hearts\": {\n      \"title\": \"Grappling Hook\",\n      \"durability\": \"0\",\n      \"suitValue\": \"5H\",\n      \"footer\": \"Item\",\n      \"abilities\": []\n    },\n    \"6 of Hearts\": {\n      \"title\": \"Climbing Rope\",\n      \"durability\": \"0\",\n      \"suitValue\": \"6H\",\n      \"footer\": \"Item\",\n      \"abilities\": []\n    },\n    \"7 of Hearts\": {\n      \"title\": \"Silent Boots\",\n      \"durability\": \"0\",\n      \"suitValue\": \"7H\",\n      \"footer\": \"Item\",\n      \"abilities\": []\n    },\n    \"8 of Hearts\": {\n      \"title\": \"Lockpicks\",\n      \"durability\": \"0\",\n      \"suitValue\": \"8H\",\n      \"footer\": \"Item\",\n      \"abilities\": []\n    },\n    \"9 of Hearts\": {\n      \"title\": \"Shortbow\",\n      \"durability\": \"0\",\n      \"suitValue\": \"9H\",\n      \"footer\": \"Item\",\n      \"abilities\": []\n    },\n    \"10 of Hearts\": {\n      \"title\": \"Smoke Bombs\",\n      \"durability\": \"0\",\n      \"suitValue\": \"10H\",\n      \"footer\": \"Item\",\n      \"abilities\": []\n    },\n    \"Jack of Hearts\": {\n      \"title\": \"Phantom Cloak\",\n      \"durability\": \"0\",\n      \"suitValue\": \"JH\",\n      \"footer\": \"Item\",\n      \"abilities\": []\n    },\n    \"Queen of Hearts\": {\n      \"title\": \"Shadow Blade\",\n      \"durability\": \"0\",\n      \"suitValue\": \"QH\",\n      \"footer\": \"Item\",\n      \"abilities\": []\n    },\n    \"King of Hearts\": {\n      \"title\": \"The Elven Scout\",\n      \"durability\": \"0\",\n      \"suitValue\": \"KH\",\n      \"footer\": \"Ally\",\n      \"abilities\": []\n    },\n    \"Ace of Spades\": {\n      \"title\": \"Victor Wren\",\n      \"durability\": \"14\",\n      \"suitValue\": \"AS\",\n      \"footer\": \"Character\",\n      \"abilities\": [\n        {\n          \"title\": \"Play\",\n          \"textType\": \"normal\",\n          \"text\": \"Play 1 Card from your Hand into your Field.\",\n          \"cost\": [\"Slow\"]\n        },\n        {\n          \"title\": \"Draw\",\n          \"textType\": \"normal\",\n          \"text\": \"Draw the top 2 Cards from your Deck into your Hand.\",\n          \"cost\": [\"Slow\",\"Tap\"]\n        },\n        {\n          \"title\": \"Untap\",\n          \"textType\": \"normal\",\n          \"text\": \"Untap all Cards in your Field.\",\n          \"cost\": [\"Slow\"]\n        },\n        {\n          \"title\": \"Attribute\",\n          \"textType\": \"normal\",\n          \"text\": \"Generate 2 Wisdom Points and 1 Power Point.\",\n          \"cost\": [\"Tap\"]\n        },\n        {\n          \"title\": \"\",\n          \"textType\": \"italic\",\n          \"text\": \"Human Wizard\",\n          \"cost\": []\n        }\n      ]\n    },\n    \"2 of Spades\": {\n      \"title\": \"Simple Wand\",\n      \"durability\": \"0\",\n      \"suitValue\": \"2S\",\n      \"footer\": \"Item\",\n      \"abilities\": []\n    },\n    \"3 of Spades\": {\n      \"title\": \"Crystal Orb\",\n      \"durability\": \"0\",\n      \"suitValue\": \"3S\",\n      \"footer\": \"Item\",\n      \"abilities\": []\n    },\n    \"4 of Spades\": {\n      \"title\": \"Ancient Map\",\n      \"durability\": \"0\",\n      \"suitValue\": \"4S\",\n      \"footer\": \"Item\",\n      \"abilities\": []\n    },\n    \"5 of Spades\": {\n      \"title\": \"Mystic Hourglass\",\n      \"durability\": \"0\",\n      \"suitValue\": \"5S\",\n      \"footer\": \"Item\",\n      \"abilities\": []\n    },\n    \"6 of Spades\": {\n      \"title\": \"Grimoire of Spells\",\n      \"durability\": \"0\",\n      \"suitValue\": \"6S\",\n      \"footer\": \"Item\",\n      \"abilities\": []\n    },\n    \"7 of Spades\": {\n      \"title\": \"Potion of Clarity\",\n      \"durability\": \"0\",\n      \"suitValue\": \"7S\",\n      \"footer\": \"Item\",\n      \"abilities\": []\n    },\n    \"8 of Spades\": {\n      \"title\": \"Mystic Amulet\",\n      \"durability\": \"0\",\n      \"suitValue\": \"8S\",\n      \"footer\": \"Item\",\n      \"abilities\": []\n    },\n    \"9 of Spades\": {\n      \"title\": \"Runestone\",\n      \"durability\": \"0\",\n      \"suitValue\": \"9S\",\n      \"footer\": \"Item\",\n      \"abilities\": []\n    },\n    \"10 of Spades\": {\n      \"title\": \"Sage's Robes\",\n      \"durability\": \"0\",\n      \"suitValue\": \"10S\",\n      \"footer\": \"Item\",\n      \"abilities\": []\n    },\n    \"Jack of Spades\": {\n      \"title\": \"Arcane Tome\",\n      \"durability\": \"0\",\n      \"suitValue\": \"JS\",\n      \"footer\": \"Item\",\n      \"abilities\": []\n    },\n    \"Queen of Spades\": {\n      \"title\": \"Archmage's Robes\",\n      \"durability\": \"0\",\n      \"suitValue\": \"QS\",\n      \"footer\": \"Item\",\n      \"abilities\": []\n    },\n    \"King of Spades\": {\n      \"title\": \"The Wise Sage\",\n      \"durability\": \"0\",\n      \"suitValue\": \"KS\",\n      \"footer\": \"Ally\",\n      \"abilities\": []\n    },\n    \"Ace of Diamonds\": {\n      \"title\": \"Rosie Goodwin\",\n      \"durability\": \"16\",\n      \"suitValue\": \"AD\",\n      \"footer\": \"Character\",\n      \"abilities\": [\n        {\n          \"title\": \"Play\",\n          \"textType\": \"normal\",\n          \"text\": \"Play 1 Card from your Hand into your Field.\",\n          \"cost\": [\"Slow\"]\n        },\n        {\n          \"title\": \"Draw\",\n          \"textType\": \"normal\",\n          \"text\": \"Draw the top Card from your Deck into your Hand.\",\n          \"cost\": [\"Slow\"]\n        },\n        {\n          \"title\": \"Untap\",\n          \"textType\": \"normal\",\n          \"text\": \"Untap all Cards in your Field.\",\n          \"cost\": [\"Slow\"]\n        },\n        {\n          \"title\": \"Attribute\",\n          \"textType\": \"normal\",\n          \"text\": \"Generate 1 Power Point, 1 Agility Point and 1 Wisdom Point.\",\n          \"cost\": [\"Tap\"]\n        },\n        {\n          \"title\": \"\",\n          \"textType\": \"italic\",\n          \"text\": \"Gnome Bard\",\n          \"cost\": []\n        }\n      ]\n    },\n    \"2 of Diamonds\": {\n      \"title\": \"Lucky Coin\",\n      \"durability\": \"0\",\n      \"suitValue\": \"2D\",\n      \"footer\": \"Item\",\n      \"abilities\": []\n    },\n    \"3 of Diamonds\": {\n      \"title\": \"Multi-Tool\",\n      \"durability\": \"0\",\n      \"suitValue\": \"3D\",\n      \"footer\": \"Item\",\n      \"abilities\": []\n    },\n    \"4 of Diamonds\": {\n      \"title\": \"Traveller's Cloak\",\n      \"durability\": \"0\",\n      \"suitValue\": \"4D\",\n      \"footer\": \"Item\",\n      \"abilities\": []\n    },\n    \"5 of Diamonds\": {\n      \"title\": \"Versatile Sword\",\n      \"durability\": \"0\",\n      \"suitValue\": \"5D\",\n      \"footer\": \"Item\",\n      \"abilities\": []\n    },\n    \"6 of Diamonds\": {\n      \"title\": \"Healing Salve\",\n      \"durability\": \"0\",\n      \"suitValue\": \"6D\",\n      \"footer\": \"Item\",\n      \"abilities\": []\n    },\n    \"7 of Diamonds\": {\n      \"title\": \"Enchanted Lyre\",\n      \"durability\": \"0\",\n      \"suitValue\": \"7D\",\n      \"footer\": \"Item\",\n      \"abilities\": []\n    },\n    \"8 of Diamonds\": {\n      \"title\": \"Rations\",\n      \"durability\": \"0\",\n      \"suitValue\": \"8D\",\n      \"footer\": \"Item\",\n      \"abilities\": []\n    },\n    \"9 of Diamonds\": {\n      \"title\": \"Bag of Tricks\",\n      \"durability\": \"0\",\n      \"suitValue\": \"9D\",\n      \"footer\": \"Item\",\n      \"abilities\": []\n    },\n    \"10 of Diamonds\": {\n      \"title\": \"Portable Tent\",\n      \"durability\": \"0\",\n      \"suitValue\": \"10D\",\n      \"footer\": \"Item\",\n      \"abilities\": []\n    },\n    \"Jack of Diamonds\": {\n      \"title\": \"Ring of Adaptation\",\n      \"durability\": \"0\",\n      \"suitValue\": \"JD\",\n      \"footer\": \"Item\",\n      \"abilities\": []\n    },\n    \"Queen of Diamonds\": {\n      \"title\": \"Chameleon Cloak\",\n      \"durability\": \"0\",\n      \"suitValue\": \"QD\",\n      \"footer\": \"Item\",\n      \"abilities\": []\n    },\n    \"King of Diamonds\": {\n      \"title\": \"The Mercenary\",\n      \"durability\": \"0\",\n      \"suitValue\": \"KD\",\n      \"footer\": \"Ally\",\n      \"abilities\": []\n    },\n    \"Joker 1\": {\n      \"title\": \"Bjaldor\",\n      \"durability\": \"18\",\n      \"suitValue\": \"Jo\",\n      \"footer\": \"Character Placeholder\",\n      \"abilities\": []\n    },\n    \"Joker 2\": {\n      \"title\": \"Tessa Value\",\n      \"durability\": \"14\",\n      \"suitValue\": \"Jo\",\n      \"footer\": \"Character Placeholder\",\n      \"abilities\": []\n    },\n    \"Joker 3\": {\n      \"title\": \"Victor Wren\",\n      \"durability\": \"14\",\n      \"suitValue\": \"Jo\",\n      \"footer\": \"Character Placeholder\",\n      \"abilities\": []\n    },\n    \"Joker 4\": {\n      \"title\": \"Rosie Goodwin\",\n      \"durability\": \"16\",\n      \"suitValue\": \"Jo\",\n      \"footer\": \"Character Placeholder\",\n      \"abilities\": []\n    },\n    \"Joker 5\": {\n      \"title\": \"Help Card\",\n      \"durability\": \"0\",\n      \"suitValue\": \"Jo\",\n      \"footer\": \"Help Card\",\n      \"abilities\": [\n        {\n          \"title\": \"\",\n          \"textType\": \"whole\",\n          \"text\": \"Setup for each player:\\\\n- Remove the 4 'Character' cards from your deck; place 1 in front of you (your Field) and set the rest aside. Your deck now has 48 'Item' and 'Ally' cards.\\\\n- Shuffle your deck and draw 5 cards from it. Players decide who goes first and turns proceed clockwise.\\\\n\\\\nDuring your Turn:\\\\n- Use abilities from cards in your field, most have costs. For what abilities look like and what their costs mean, see Help Card 2.\\\\n- If an abilities cost cannot be paid, the ability does not happen.\\\\n- Some cards have a durability value in the top-right of the card between its Name and Value-Suit (For use as standard playing cards).\\\\n\\\\nEnd of Turn:\\\\n- Any cards with no durability or Damage Counters (DC) at least equal to it, is destroyed.\\\\n- When a card is destroyed or discarded, it leaves your hand or field and moves next to it's owners Deck face-up (this is their Discard pile).\\\\n- Any player's with more than 5 cards in their hand has to discard cards from their hand until they have 5.\\\\n- Any player without a Character card in their field is out of the game and removes all cards they own from play.\\\\n- If you are the last remaining player, you win.\",\n          \"cost\": []\n        }\n      ]\n    },\n    \"Joker 6\": {\n      \"title\": \"Help Card 2\",\n      \"durability\": \"0\",\n      \"suitValue\": \"Jo\",\n      \"footer\": \"Help Card\",\n      \"abilities\": [\n        {\n          \"title\": \"Slow\",\n          \"textType\": \"normal\",\n          \"text\": \"After this ability fully resolves, your turn ends.\",\n          \"cost\": [\"Slow\"]\n        },\n        {\n          \"title\": \"Tap\",\n          \"textType\": \"normal\",\n          \"text\": \"Tap a Card by turning it sideways. You can't use the ability if it's already tapped. Untapping resets this.\",\n          \"cost\": [\"Tap\"]\n        },\n        {\n          \"title\": \"Power Point\",\n          \"textType\": \"normal\",\n          \"text\": \"Consume 1 Power Point generated from other abilities. The Power Points must have been generated this turn.\",\n          \"cost\": [\"Power\"]\n        },\n        {\n          \"title\": \"Agility Point\",\n          \"textType\": \"normal\",\n          \"text\": \"Consume 1 Agility Point generated from other abilities. The Agility Points must have been generated this turn.\",\n          \"cost\": [\"Agility\"]\n        },\n        {\n          \"title\": \"Wisdom Point\",\n          \"textType\": \"normal\",\n          \"text\": \"Consume 1 Wisdom Point generated from other abilities. The Wisdom Points must have been generated this turn.\",\n          \"cost\": [\"Wisdom\"]\n        }\n      ]\n    },\n    \"Joker 7\": {\n      \"title\": \"Joker 7\",\n      \"durability\": 0,\n      \"suitValue\": \"Jo\",\n      \"footer\": \"Joker\",\n      \"abilities\": []\n    },\n    \"Joker 8\": {\n      \"title\": \"Joker 8\",\n      \"durability\": 0,\n      \"suitValue\": \"Jo\",\n      \"footer\": \"Joker\",\n      \"abilities\": []\n    }\n  }\n};\n\n\n\n\n\n// ---------- C A R D   C O N S T R U C T I O N ----------\n\nfunction drawCard(deckName, cardTitle, x=0, y=0) {\n\n    cardCtx.fillStyle = \"black\";\n    cardCtx.fillRect(x, y, 512, 768);\n    cardCtx.fillStyle = \"white\";\n    cardCtx.fillRect(x+8, y+8, 512-16, 768-16);\n    const cardData = decks[deckName][cardTitle];\n\n    if (cardData.durability == 0) {\n        drawShape([{x:x , y:y+16} , {x:x+436 , y:y+16} , {x:x+436-48 , y:y+16+48} , {x:x , y:y+16+48}], 4); // <---- T I T L E   A R E A   ---- T E X T   A R E A ----> X+0 -> X+388\n        drawCenteredAndWrappedText(cardCtx, cardData.title, x+4, y+40, 388-8, `bold 32px ${cardFont}`, \"black\", \"center\"); // <---- T I T L E   T E X T\n    } else {\n        drawShape([{x:x , y:y+16} , {x:x+342 , y:y+16} , {x:x+342-48 , y:y+16+48} , {x:x , y:y+16+48}], 4); // <---- T I T L E   A R E A   ---- T E X T   A R E A ----> X+0 -> X+294\n        drawShape([{x:x+436 , y:y+16} , {x:x+358 , y:y+16} , {x:x+358-48 , y:y+16+48} , {x:x+436-48 , y:y+16+48}], 4); // <---- D U R A B I L I T Y   A R E A   ---- T E X T   A R E A ----> X+358 -> X+388\n        drawCenteredAndWrappedText(cardCtx, cardData.title, x+4, y+40, 294-8, `bold 32px ${cardFont}`, \"black\", \"center\"); // <---- T I T L E   T E X T\n        drawCenteredAndWrappedText(cardCtx, `${cardData.durability}`, x+358, y+40, 30, `bold 32px ${cardFont}`, \"black\", \"center\"); // <---- D U R A B I L I T Y   T E X T\n    }\n\n\n    drawShape([{x:x+512 , y:y+16} , {x:x+452 , y:y+16} , {x:x+452-48 , y:y+16+48} , {x:x+512 , y:y+16+48}], 4); // <---- S U I T   V A L U E   A R E A   ---- T E X T   A R E A ----> X+452 -> X+512\n    drawCenteredAndWrappedText(cardCtx, `${cardData.suitValue}`, x+444, y+40, 60, `bold 32px ${cardFont}`, \"black\", \"left\"); // <---- S U I T   V A L U E   T E X T\n\n    for (let i=0; i<cardData.abilities.length; i++) {\n        const ability = cardData.abilities[cardData.abilities.length-1-i];\n        if (ability.textType == \"whole\") {\n            drawCenteredAndWrappedText(cardCtx, ability.text.replace(/\\\\n/g, '\\n'), x+12, y+400, 512-24, `bold 16px ${cardFont}`, \"black\", \"left\"); // <---- W H O L E   T E X T\n        } else {\n            cardCtx.fillStyle = \"black\";\n            cardCtx.fillRect(x+24, y+768-24-96-(i*112)-24, 464, 96); // <---- A B I L I T Y   O U T E R   A R E A\n            cardCtx.fillStyle = \"white\";\n            cardCtx.fillRect(x+24+4, y+768-24-96-(i*112)+4-24, 464-8, 96-8); // <---- A B I L I T Y   I N N E R   A R E A\n\n            for (let j=0; j<ability.cost.length; j++) {\n                drawCircle(x+40+(56*j) , y+768-24-96-(i*112)+16-24 , 24 , \"black\"); // <---- A B I L I T Y   C O S T   O U T E R   A R E A\n                drawCircle(x+40+(56*j) , y+768-24-96-(i*112)+16-24 , 20 , \"white\"); // <---- A B I L I T Y   C O S T   I N N E R   A R E A\n                cardCtx.imageSmoothingEnabled = false;\n                cardCtx.drawImage(icons[ability.cost[j]], x+40+(56*j)-16 , y+768-24-96-(i*112)+16-16-24, 32, 32); // <---- D R A W   A B I L I T Y   I C O N\n            }\n            drawCenteredAndWrappedText(cardCtx, ability.title, x+24+4+(ability.cost.length*56), y+768-24-96-(i*112)+4+16-24, 512-56-(ability.cost.length*56), `bold 24px ${cardFont}`, \"black\", \"left\"); // <---- A B I L I T Y   T I T L E   T E X T\n\n            if (ability.textType == \"normal\") drawCenteredAndWrappedText(cardCtx, ability.text.replace(/\\\\n/g, '\\n'), x+24+4+4, y+768-24-96-(i*112)+66-24, 512-64, `bold 14px ${cardFont}`, \"black\", \"left\"); // <---- A B I L I T Y   T E X T\n            if (ability.textType == \"italic\") drawCenteredAndWrappedText(cardCtx, ability.text.replace(/\\\\n/g, '\\n'), x+24+4+4, y+768-24-96-(i*112)+44-24, 512-64, `italic bold 14px ${cardFont}`, \"black\", \"center\"); // <---- A B I L I T Y   F L A V O U R   T E X T\n        }\n\n    }\n    drawShape([{x:x , y:y+768} , {x:x+32 , y:y+768-32} , {x:x+512-32 , y:y+768-32} , {x:x+512 , y:y+768}], 4); // <---- D R A W   F O O T E R   A R E A\n    drawCenteredAndWrappedText(cardCtx, cardData.footer, x+32, y+768-20, 512-64, `16px ${cardFont}`, \"black\", \"center\"); // <---- F O O T E R   T E X T\n}\n\n\n\n\nfunction splitBase64Image(base64String, numOfImages, deckName) {\n    var img = new Image();\n    img.onload = function() {\n        var tempCnv = document.createElement('canvas');\n        var tempCtx = tempCnv.getContext('2d');\n        tempCnv.width = img.width;\n        tempCnv.height = img.height;\n        tempCtx.drawImage(img, 0, 0);\n\n        var subWidth = Math.floor(img.width / numOfImages);\n        var loadedCount = 0;\n\n        for (let i = 0; i < numOfImages; i++) {\n            var subCnv = document.createElement('canvas');\n            var subCtx = subCnv.getContext('2d');\n            subCnv.width = subWidth;\n            subCnv.height = img.height;\n\n            subCtx.drawImage(tempCnv, \n                        i * subWidth, 0, \n                        subWidth, img.height, \n                        0, 0, \n                        subWidth, img.height);\n\n            var subImage = new Image();\n            subImage.onload = function() {\n                loadedCount++;\n                if (loadedCount === numOfImages) {\n                    downloadCardsFromDeck(deckName);\n                }\n            };\n            subImage.src = subCnv.toDataURL('image/png');\n            icons[Object.keys(icons)[i]] = subImage;\n        }\n    };\n    img.src = base64String;\n}\n\n\n\nfunction downloadCardsFromDeck(deckToDownload) {\n    cardCtx.clearRect(0, 0, cardCnv.width, cardCnv.height);\n    let snapTrack = 0;\n    let yTrack = 0;\n    let xTrack = 0;\n    cardCnv.width = xCoord*512;\n    cardCnv.height = yCoord*768;\n\n    for (const cardTitle in decks[deckToDownload]) {\n        drawCard(deckToDownload , cardTitle , xTrack*512 , yTrack*768);\n        if (xTrack < (xCoord-1)) {\n            xTrack += 1;\n        } else {\n            xTrack = 0;\n            if (yTrack < (yCoord-1)) {\n                yTrack += 1;\n            } else {\n                snapCanvas(`Cards_${snapTrack}`);\n                snapTrack += 1;\n                cardCtx.clearRect(0, 0, cardCnv.width, cardCnv.height);\n                yTrack = 0;\n            }\n        } \n    }\n    if (!(xTrack == 0 && yTrack == 0)) {\n        snapCanvas(`Cards_${snapTrack}`);\n        cardCtx.clearRect(0, 0, cardCnv.width, cardCnv.height);\n    }\n}\n\n\n\n\nfunction snapCanvas(name) {\n    cardCtx.imageSmoothingEnabled = false;\n    let cardCnvImage = cardCnv.toDataURL(\"image/png\", 1.0);\n    let link = document.createElement('a');\n    link.download = `${name}.png`;\n    link.href = cardCnvImage;\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n}\n\n\n\nfunction drawCircle(centerX , centerY , radius , colour) {\n    cardCtx.beginPath();\n    cardCtx.arc(centerX, centerY, radius, 0, 2 * Math.PI);\n    cardCtx.fillStyle = colour;\n    cardCtx.fill();\n}\n\n\n\nfunction drawShape(locations, width) {\n    cardCtx.beginPath();\n    cardCtx.moveTo(locations[0].x, locations[0].y);\n    for (let i=1; i<locations.length; i++) {\n        cardCtx.lineTo(locations[i].x, locations[i].y);\n    }\n    cardCtx.closePath();\n    cardCtx.lineWidth = width;\n    cardCtx.strokeStyle = \"black\";\n    cardCtx.stroke();\n}\n\nfunction drawCenteredAndWrappedText(canvasCtx, text, x, y, maxWidth, font, textStyle, align) {\n    canvasCtx.fillStyle = textStyle;\n    let xCoord = (align == \"left\") ? x : x + (maxWidth / 2);\n    canvasCtx.font = font;\n    let fontSize = parseInt(font.match(/\\d+px/)[0]);\n    let lineHeight = fontSize * 1.2;\n    canvasCtx.textAlign = align;\n    canvasCtx.textBaseline = \"middle\";\n\n    // Split the text by \\n and keep track of empty lines for multiple newlines\n    let parts = text.split('\\n');\n    let lines = [];\n    \n    for (let part of parts) {\n        let words = part.split(' ');\n        let currentLine = '';\n\n        for (let word of words) {\n            let testLine = currentLine + word + ' ';\n            let metrics = canvasCtx.measureText(testLine);\n            \n            if (metrics.width > maxWidth) {\n                if (currentLine) lines.push(currentLine.trim());\n                currentLine = word + ' ';\n            } else {\n                currentLine = testLine;\n            }\n        }\n        \n        if (currentLine.trim().length > 0) lines.push(currentLine.trim());\n        // If there's an empty part (i.e., \\n\\n), just push a blank line\n        if (part === '') lines.push('');\n    }\n\n    // Calculate total height including any extra space for blank lines (multiple \\n)\n    let totalHeight = lines.length * lineHeight;\n    let startY = y - totalHeight / 2 + lineHeight / 2;\n    \n    lines.forEach((line, index) => {\n        // If the line is empty (for consecutive \\n), add more vertical space\n        let yOffset = line === '' ? lineHeight * 1.5 : lineHeight; // Increase the gap for blank lines\n        canvasCtx.fillText(line, xCoord, startY + index * yOffset);\n    });\n}\n\nconst cardCnv = document.createElement('canvas');\nconst cardCtx = cardCnv.getContext('2d');\nlet icons = {};\nfor (let i=0; i<cardIcons.length; i++) {\n    icons[cardIcons[i]] = \"\"\n}\n\nsplitBase64Image(cardIconImage, cardIcons.length, \"Deck 1\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n","tasks":"// Function tasks\n\n\nconst allDays = [\"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\", \"Sunday\", \"01\", \"02\", \"03\", \"04\", \"05\", \"06\", \"07\", \"08\", \"09\", \"10\", \"11\", \"12\", \"13\", \"14\", \"15\", \"16\", \"17\", \"18\", \"19\", \"20\", \"21\", \"22\", \"23\", \"24\", \"25\", \"26\", \"27\", \"28\", \"29\", \"30\", \"31\"]\n\nif (!(\"tasks\" in data)) {\n    data[\"tasks\"] = {}\n    for (let i=0; i<allDays.length; i++) {\n        data.tasks[allDays[i]] = [];\n    }\n}\n\ndata.tasks = {\"10\":[],\"11\":[],\"12\":[],\"13\":[],\"14\":[],\"15\":[],\"16\":[\"Wash Bedding\"],\"17\":[],\"18\":[],\"19\":[],\"20\":[],\"21\":[],\"22\":[],\"23\":[],\"24\":[],\"25\":[],\"26\":[],\"27\":[\"Go through Finances\"],\"28\":[],\"29\":[],\"30\":[],\"31\":[],\"Monday\":[\"Washing Up\",\"Laundry\",\"Exercise\",\"Clean Draining Board\"],\"Tuesday\":[\"Washing Up\",\"Empty all the bins\",\"Exercise\",\"Clean the Draining board\"],\"Wednesday\":[\"Washing Up\",\"Exercise\",\"Clean the Draining Board\"],\"Thursday\":[\"Washing Up\",\"Clean the Bath\",\"Clean the Sinks\",\"Hoover\",\"Exercise\",\"Clean the Draining Board\"],\"Friday\":[\"Washing Up\",\"Exercise\",\"Clean the Draining Board\"],\"Saturday\":[\"Washing Up\",\"Laundry\",\"Mop the Kitchen\",\"Tidy the Lounge\",\"Exercise\",\"Clean the Draining Board\",\"Clean Zuris Bowls\"],\"Sunday\":[\"Washing Up\",\"Hoover\",\"Exercise\",\"Clean Draining Board\"],\"01\":[\"Deep Clean the Kitchen\"],\"02\":[\"Dusting\"],\"03\":[],\"04\":[\"Car Check\"],\"05\":[],\"06\":[],\"07\":[],\"08\":[],\"09\":[]}\n\nconst today = new Date();\nconst year = today.getFullYear();\nconst month = String(today.getMonth() + 1).padStart(2, '0'); \nconst day = String(today.getDate()).padStart(2, '0');\nconst weekDay = today.toLocaleDateString('en-US', { weekday: 'long' });\nconst longDate = `${year}-${month}-${day}`;\nconst colours = [\"rgba(0,0,0,0)\" , \"#0617aa\" , \"#b803b8\" , \"#ffca60\"];\n\nif (!(\"calender\" in data)) {\n    data[\"calender\"] = {\"lastChecked\" : longDate};\n}\n\nif (!(longDate in data.calender)) data.calender[longDate] = {};\nfor (let i=0; i<data.tasks[weekDay].length; i++) {\n    if (!(data.tasks[weekDay][i] in data.calender[longDate])) data.calender[longDate][data.tasks[weekDay][i]] = 0;\n}\nfor (let i=0; i<data.tasks[day].length; i++) {\n    if (!(data.tasks[day][i] in data.calender[longDate])) data.calender[longDate][data.tasks[day][i]] = 0;\n}\nif (data.calender.lastChecked != longDate) {\n    for (const taskName in data.calender[data.calender.lastChecked]) {\n        if (data.calender[data.calender.lastChecked][taskName] == 3) {\n            if (!(taskName in data.calender[longDate])) data.calender[longDate][taskName] = 0;\n        }\n    }\n    data.calender.lastChecked = longDate;\n}\n\nwindow.showTasks = function() {\n    saveData();\n    inputArea.style.display = \"none\";\n    let taskText = \"\";\n    for (const taskName in data.calender[longDate]) {\n        taskText += `<button style=\"width:100%; height: 60px; background-color: ${colours[data.calender[longDate][taskName]]}; border: solid green 2px; border-radius: 6px; font-size: 24px; color: green;\" onclick=\"toggleTask('${taskName}')\">${taskName}</button>`\n    }\n    outputArea.innerHTML = `\n        <div style=\"width: calc(100% - 10px); height: calc(100% - 10px); display: flex; flex-direction: column; gap: 10px; padding: 5px; overflow-y: auto; scrollbar-width: none;\">\n            <div style=\"width:calc(100% - 4px); height: 100px; background-color: rgba(0,0,0,0); border: solid green 2px; border-radius: 6px; font-size: 24px; color: green; display: flex; flex-direction: column;\">\n                <div style=\"display: flex; width: 100%; height: 100%;\">\n                    <button onclick=\"addTask();\" style=\"width: calc(100% - 4px); height: 100%; background-color: rgba(0,0,0,0); color: green; font-size: 24px; border: solid green 2px;\">Add</button>\n                    <button onclick=\"removeTask();\" style=\"width: calc(100% - 4px); height: 100%; background-color: rgba(0,0,0,0); color: green; font-size: 24px; border: solid green 2px;\">Remove</button>\n                </div>\n                <button onclick=\"showBreakdown();\" style=\"width: 100%; height: 100%; background-color: rgba(0,0,0,0); color: green; font-size: 24px; border: solid green 2px;\">Breakdown</button>\n            </div>\n            <div style=\"width:calc(100% - 16px); height: 0px; border: solid green 8px; border-radius: 6px;\"></div>\n            ${taskText}\n        </div>\n    `;\n}\n\nwindow.removeTask = function() {\n    outputArea.innerHTML = `\n        <div style=\"padding: 10px; font-family: sans-serif; display: flex; justify-content: space-between; align-items: center; flex-direction: column; border: solid green 2px; border-radius: 6px; width: 280px; height: 380px; left: calc(50% - 150px); top: calc(50% - 200px); position: absolute;\">\n            <div style=\"height: 40px; font-size: 24px; display: flex; align-items: center; justify-content: center;\"><u>Remove Task</u></div>\n            <div style=\"height: 40px; font-size: 24px; display: flex; align-items: end; justify-content: center;\">Frequency</div>\n            <select onchange=\"if (freqInput.value == 'weekly') {weekInput.style.display = 'block'; dateInput.style.display = 'none'} else {weekInput.style.display = 'none'; dateInput.style.display = 'block'}\" id=\"freqInput\" style=\"height: 40px; font-size: 24px; width: 80%;\">\n                <option value=\"once\">Once</option>\n                <option value=\"weekly\">Weekly</option>\n                <option value=\"monthly\">Monthly</option>\n            </select>\n            <div style=\"height: 40px; font-size: 24px; display: flex; align-items: end; justify-content: center;\">Start Date</div>\n            <input id=\"dateInput\" type=\"date\" style=\"height: 40px; font-size: 24px; width: 80%;\">\n            <select id=\"weekInput\" style=\"height: 40px; font-size: 24px; display: none; width: 80%;\">\n                <option value=\"Monday\">Monday</option>\n                <option value=\"Tuesday\">Tuesday</option>\n                <option value=\"Wednesday\">Wednesday</option>\n                <option value=\"Thursday\">Thursday</option>\n                <option value=\"Friday\">Friday</option>\n                <option value=\"Saturday\">Saturday</option>\n                <option value=\"Sunday\">Sunday</option>\n            </select>\n            <div style=\"height: 40px; font-size: 24px; display: flex; align-items: end; justify-content: center;\">Name</div>\n            <input id=\"nameInput\" type=\"text\" style=\"height: 40px; font-size: 24px; width: 80%;\">\n            <button onclick=\"removeTaskFromData(); tasks();\" style=\"height: 30px; margin-top: 20px;\">Remove</button>\n        </div>\n    `;\n    window.freqInput = document.getElementById(\"freqInput\");\n    window.dateInput = document.getElementById(\"dateInput\");\n    window.weekInput = document.getElementById(\"weekInput\");\n    const nameInput = document.getElementById(\"nameInput\");\n\n    window.removeTaskFromData = function() {\n        const freq = freqInput.value;\n        const date = dateInput.value;\n        const week = weekInput.value\n        const name = nameInput.value;\n        if (date in data.calender) {\n            if (name in data.calender[date]) delete data.calender[date][name]\n        }\n        if (freq == \"weekly\") {\n            data.tasks[week] = data.tasks[week].filter(item => item != name)\n        } else if (freq == \"monthly\") {\n            if (date.split(\"-\")[2] in data.tasks) {\n                data.tasks[date.split(\"-\")[2]] = data.tasks[date.split(\"-\")[2]].filter(item => item != name)\n            }\n        }\n    }\n};\n\nwindow.showBreakdown = function() {\n    if (document.getElementById(\"breakdownArea\")) return;\n    let calenderText = \"\";\n    let reoccuringTaskText = \"\";\n    for (let i=1; i<Object.keys(data.calender).length; i++) {\n        const day = Object.keys(data.calender)[i]\n        let taskText = \"\";\n        const colourCode = [\"Not Done\", \"Pink\" , \"Blue\" , \"Will do Tomorrow\"]\n        for (const taskName in data.calender[day]) {\n            taskText += `<li>${taskName} : ${colourCode[data.calender[day][taskName]]}</li>`;\n        }\n        calenderText += `<li><u>${day}</u> : <ul>${taskText}</ul></li><hr>`\n    }\n    for (let i=0; i<allDays.length; i++) {\n        const day = allDays[i]\n        let taskText = \"\";\n        for (let j=0; j<data.tasks[day].length; j++) {\n            taskText += `<li>${data.tasks[day][j]}</li>`;\n        }\n        reoccuringTaskText += `<li><u>${day}</u> : <ul>${taskText}</ul></li><hr>`\n    }\n    outputArea.innerHTML = `\n        <div id=\"breakdownArea\" style=\"padding: 10px; font-family: sans-serif; display: flex; justify-content: center; align-items: center; flex-direction: column; border: solid green 2px; border-radius: 6px; width: calc(100% - 60px); height: calc(100% - 60px); left: 20px; top: 20px; position: absolute;\">\n            <h1 style=\"text-align: center; width: 100%\">Calender</h1>\n            <ul style=\"width: calc(100% - 20px); height: 100%; border: solid green 1px; border-radius: 4px; overflow: auto; scrollbar-width: none;\">\n                ${calenderText}\n            </ul>\n            <hr style=\"width: calc(100% - 20px); min-height: 2px;\">\n            <h1 style=\"text-align: center; width: 100%\">Reoccurring Tasks</h1>\n            <ul style=\"width: calc(100% - 20px); height: 100%; border: solid green 1px; border-radius: 4px; overflow: auto; scrollbar-width: none;\">\n                ${reoccuringTaskText}\n            </ul>\n            <button onclick=\"showTasks()\" style=\"font-size: 24px;\">Return</button>\n        </div>\n    `;\n    window.breakdownArea = document.getElementById(\"breakdownArea\");\n};\n\nwindow.addTask = function(weekly=false) {\n    outputArea.innerHTML = `\n        <div style=\"padding: 10px; font-family: sans-serif; display: flex; justify-content: space-between; align-items: center; flex-direction: column; border: solid green 2px; border-radius: 6px; width: 280px; height: 380px; left: calc(50% - 150px); top: calc(50% - 200px); position: absolute;\">\n            <div style=\"height: 40px; font-size: 24px; display: flex; align-items: center; justify-content: center;\"><u>New Task</u></div>\n            <div style=\"height: 40px; font-size: 24px; display: flex; align-items: end; justify-content: center;\">Frequency</div>\n            <select onchange=\"if (freqInput.value == 'weekly') {weekInput.style.display = 'block'; dateInput.style.display = 'none'} else {weekInput.style.display = 'none'; dateInput.style.display = 'block'}\" id=\"freqInput\" style=\"height: 40px; font-size: 24px; width: 80%;\">\n                <option value=\"once\">Once</option>\n                <option value=\"weekly\">Weekly</option>\n                <option value=\"monthly\">Monthly</option>\n            </select>\n            <div style=\"height: 40px; font-size: 24px; display: flex; align-items: end; justify-content: center;\">Start Date</div>\n            <input id=\"dateInput\" type=\"date\" style=\"height: 40px; font-size: 24px; width: 80%;\">\n            <select id=\"weekInput\" style=\"height: 40px; font-size: 24px; display: none; width: 80%;\">\n                <option value=\"Monday\">Monday</option>\n                <option value=\"Tuesday\">Tuesday</option>\n                <option value=\"Wednesday\">Wednesday</option>\n                <option value=\"Thursday\">Thursday</option>\n                <option value=\"Friday\">Friday</option>\n                <option value=\"Saturday\">Saturday</option>\n                <option value=\"Sunday\">Sunday</option>\n            </select>\n            <div style=\"height: 40px; font-size: 24px; display: flex; align-items: end; justify-content: center;\">Name</div>\n            <input id=\"nameInput\" type=\"text\" style=\"height: 40px; font-size: 24px; width: 80%;\">\n            <button onclick=\"addTaskToData(); tasks();\" style=\"height: 30px; margin-top: 20px;\">Add</button>\n        </div>\n    `;\n    window.freqInput = document.getElementById(\"freqInput\");\n    window.dateInput = document.getElementById(\"dateInput\");\n    window.weekInput = document.getElementById(\"weekInput\");\n    const nameInput = document.getElementById(\"nameInput\");\n\n    window.addTaskToData = function() {\n        if (nameInput.value.includes(\"'\") || nameInput.value.includes(\"\\\"\")) return alert(\"You cannot have \\\" or ' in the name of a task.\")\n        const freq = freqInput.value;\n        const date = dateInput.value;\n        const week = weekInput.value;\n        const name = nameInput.value;\n        if (freq == \"once\") {\n            if (!(date in data.calender)) data.calender[date] = {};\n            if (!(name in data.calender[date])) data.calender[date][name] = 0;\n        } else if (freq == \"weekly\") {\n            if (!(data.tasks[week].includes(name))) data.tasks[week].push(name);\n        } else if (freq == \"monthly\") {\n            if (!(data.tasks[date.split(\"-\")[2]].includes(name))) data.tasks[date.split(\"-\")[2]].push(name);\n        }\n    }\n};\n\nwindow.toggleTask = function(taskName) {\n    data.calender[longDate][taskName] = (data.calender[longDate][taskName] == 3) ? 0 : (data.calender[longDate][taskName] + 1);\n    showTasks();\n}\n\nshowTasks();\n","notes":"// Function notes\n\nconst dialog = [\n    \"M:Start\",\n    \"E:\",\n    \"O:Continue#rest of notes\",\n    \"O:ReturnToConsoleX#Exit\",\n    \"W:Notes\",\n    \"M:Continue\",\n    \"E:\",\n    \"T:Rest of Notes\",\n    \"T: - Tic80\",\n    \"W: - Logging In Stuff\",\n    \"J:Start\",\n    \"M:ReturnToConsoleX\"\n];\n\n\ntextengine({dialog:dialog , options:true});\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","import":"// Function import\n\nconst input = document.createElement('input');\ninput.type = 'file';\ninput.accept = '.json';\n\ninput.onchange = function(event) {\n    const file = event.target.files[0];\n    const reader = new FileReader();\n\n    reader.onload = function(e) {\n        try {\n            const newData = JSON.parse(e.target.result);\n            if (Array.isArray(data)) {\n                functions = newData[0];\n                data = newData[1];        \n                saveData();\n                generateScripts();\n                consolex();\n                outputToConsole(\"File successfully Imported\\n\\n\");\n            }\n        } catch (error) {\n            console.log(error);\n        }\n    };\n    reader.onerror = function(error) {\n        console.log(error);\n    };\n    reader.readAsText(file);\n};\ninput.click();\n\n","run":"// Function run\n\neval(arg);","rpg":"// Function rpg                                                                                                              \n\n\n\nconst dialog = [\n    \"M:Start\",\n    \"E:\",\n    \"T:RPG\",\n    \"M:Andor\",\n    \"V:!MAINFLAG!#Andor2\",\n    \"J:Player\",\n    \"M:Andor2\",\n    \"O:Andor_LookAround#look around\",\n    \"W:Welcome to the world of Andor. You find yourself laying on the floor besides an old wall.\",\n\n    \"M:Andor_LookAround\",\n    \"T:You look around and can't see anything.\",\n    \"J:Andor\",\n\n\n\n    \"M:Player\",\n    \"O:Player_Inventory#inventory\",\n    \"J:!MAINFLAG!\",\n\n    \"M:Player_Inventory\",\n    \"T:This is your inventory.\",\n    \"J:!MAINFLAG!\",\n\n\n\n\n    \"J:Start\"\n];\n\n\n/*\n\n - C O M M A N D S\n\n - go\n - craft\n - take\n - drop\n - talk\n - use\n - cast\n\n*/\n\n\ntextengine({dialog:dialog , options:false});\n\n\n\n\n\n\n\n\n\n","passwords":"// Function passwords\n\nlet textToCypher = `JS3 s3 s#N #s#NR#k`;\n\nconst myPRNG = new PRNG(0);\n\nif (!(\"passwords\" in data)) data[\"passwords\"] = [];\n\nclear();\ninputText.value = \"\";\noutputToConsole(\"Password Manager\\n\\nPlease enter your unique cypher code.\\n\\n\");\n\n\ninput = function() {\n    const code = (!isNaN(parseInt(inputText.value))) ? parseInt(inputText.value) : 0;\n    clear();\n    inputText.style.display = \"none\";\n    enterButton.innerHTML = \"RETURN\";\n    enterButton.style.width = \"100%\";\n    inputText.value = \"\";\n    outputToConsole(`Cyphered Text : ${returnCypheredText(textToCypher, code)}\\n\\n`);\n    input = function() {\n        enterButton.style.width = \"auto\";\n        inputText.style.display = \"block\";\n        enterButton.innerHTML = \"ENTER\";\n        consolex();\n    }\n}\n\n\n\nfunction returnCypheredText(text, code) {\n    if (text == \"\") return \" \";\n    let charAry = [\"a\", \"b\", \"c\", \"d\", \"e\", \"f\", \"g\", \"h\", \"i\", \"j\", \"k\", \"l\", \"m\", \"n\", \"o\", \"p\", \"q\", \"r\", \"s\", \"t\", \"u\", \"v\", \"w\", \"x\", \"y\", \"z\", \"A\", \"B\", \"C\", \"D\", \"E\", \"F\", \"G\", \"H\", \"I\", \"J\", \"K\", \"L\", \"M\", \"N\", \"O\", \"P\", \"Q\", \"R\", \"S\", \"T\", \"U\", \"V\", \"W\", \"X\", \"Y\", \"Z\", \"0\", \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \" \", \"!\", \"£\", \"%\", \"&\", \"^\", \"*\", \"(\", \")\", \"{\", \"}\", \"[\", \"]\", \":\", \";\", \"#\", \"@\", \"?\", \",\", \".\", \"/\", \"_\", \"-\", \"+\", \"=\", \"¬\" ];\n    let cypher = {};\n    myPRNG.newSeed(code);\n    if (code != 0) {\n        const aryLength = charAry.length;\n        for (let i=0; i<(aryLength/2); i++) {\n            let firstChr = charAry.splice(myPRNG.intRange(0, charAry.length), 1)[0];\n            let secondChr = charAry.splice(myPRNG.intRange(0, charAry.length), 1)[0];\n            cypher[firstChr] = secondChr;\n            cypher[secondChr] = firstChr;\n        }\n    } else {\n        for (let i=0; i<charAry.length; i++) {\n            cypher[charAry[i]] = charAry[i];\n        }\n    }\n    let outputText = \"\"\n    for (let i=0; i<text.length; i++) {\n        if (text[i].replace(\"\\n\", \"¬\") in cypher) {\n            outputText += cypher[text[i].replace(\"\\n\", \"¬\")].replace(\"¬\", \"\\n\");\n        } else {\n            outputToConsole(`Unsupported Character : ${inputText[i]}\\n\\n`);\n        }\n    }\n    return outputText;\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","cypher":"// Function cypher\n\nconst myPRNG = new PRNG(0);\n\nif (!(\"cypherText\" in data)) data[\"cypherText\"] = \"\";\n\nclear();\ninputText.value = \"\";\noutputToConsole(\"Password Manager\\n\\nPlease enter your unique cypher code.\\n\\n\");\n\n\ninput = function() {\n    const code = (!isNaN(parseInt(inputText.value))) ? parseInt(inputText.value) : 0;\n    clear();\n    inputText.style.display = \"none\";\n    enterButton.innerHTML = \"SAVE\";\n    enterButton.style.width = \"100%\";\n    outputText.readOnly = false;\n    inputText.value = \"\";\n    outputText.value = returnCypheredText(data.cypherText, code);\n    input = function() {\n        data.cypherText = returnCypheredText(outputText.value, code)\n        consolex();\n    }\n}\n\n\n\nfunction returnCypheredText(text, code) {\n    if (text == \"\") return \" \";\n    let charAry = [\"a\", \"b\", \"c\", \"d\", \"e\", \"f\", \"g\", \"h\", \"i\", \"j\", \"k\", \"l\", \"m\", \"n\", \"o\", \"p\", \"q\", \"r\", \"s\", \"t\", \"u\", \"v\", \"w\", \"x\", \"y\", \"z\", \"A\", \"B\", \"C\", \"D\", \"E\", \"F\", \"G\", \"H\", \"I\", \"J\", \"K\", \"L\", \"M\", \"N\", \"O\", \"P\", \"Q\", \"R\", \"S\", \"T\", \"U\", \"V\", \"W\", \"X\", \"Y\", \"Z\", \"0\", \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \" \", \"!\", \"£\", \"%\", \"&\", \"^\", \"*\", \"(\", \")\", \"{\", \"}\", \"[\", \"]\", \":\", \";\", \"#\", \"@\", \"?\", \",\", \".\", \"/\", \"_\", \"-\", \"+\", \"=\", \"¬\" ];\n    let cypher = {};\n    myPRNG.newSeed(code);\n    if (code != 0) {\n        const aryLength = charAry.length;\n        for (let i=0; i<(aryLength/2); i++) {\n            let firstChr = charAry.splice(myPRNG.intRange(0, charAry.length), 1)[0];\n            let secondChr = charAry.splice(myPRNG.intRange(0, charAry.length), 1)[0];\n            cypher[firstChr] = secondChr;\n            cypher[secondChr] = firstChr;\n        }\n    } else {\n        for (let i=0; i<charAry.length; i++) {\n            cypher[charAry[i]] = charAry[i];\n        }\n    }\n    let outputText = \"\"\n    for (let i=0; i<text.length; i++) {\n        if (text[i].replace(\"\\n\", \"¬\") in cypher) {\n            outputText += cypher[text[i].replace(\"\\n\", \"¬\")].replace(\"¬\", \"\\n\");\n        } else {\n            outputToConsole(`Unsupported Character : ${inputText[i]}\\n\\n`);\n        }\n    }\n    return outputText;\n}\n\n","textengine":"// Function textengine\n\n\n\n/*\n - A : Add\n - C : Check\n - E : Erase\n - I : Input\n - J : Jump\n - M : Mark\n - O : Option\n - T : Text\n - V : Variable\n - W : Wait\n*/\n\n\n\nconst dialog = arg.dialog;\nconst displayOptions = arg.options;\n\n\n\nlet options = [];\nlet marks = {};\nlet commands = [];\nlet vars = {};\ngatherMarks();\nif (!displayOptions) gatherCommands();\nprogress(0);\n\n\n\nfunction gatherMarks() {\n    for (let i=0; i<dialog.length; i++) {\n        if (dialog[i][0] == \"M\") marks[dialog[i].substring(2)] = i;\n    }\n}\n\n\n\nfunction gatherCommands() {\n    for (let i=0; i<dialog.length; i++) {\n        if (dialog[i][0] == \"O\" && !commands.includes(dialog[i].split(\"#\")[1].split(\" \")[0].toLowerCase())) commands.push(dialog[i].split(\"#\")[1].split(\" \")[0].toLowerCase())\n    }\n}\n\n\n\nfunction returnTextWithVars(txt) {\n    for (const varName in vars) {\n        txt = txt.split(varName).join(vars[varName])\n    }\n    return txt;\n}\n\n\n\nfunction progress(tracker) {\n    if (tracker == dialog.length) return consolex();\n    const type = dialog[tracker][0];\n    const txt = dialog[tracker].substring(2);\n\n    if (type == \"A\") {\n        const varName = txt.split(\"#\")[0];\n        const varValue = txt.split(\"#\")[1];\n        if (varName in vars) {\n            const newValue = (!isNaN(parseInt(varValue)) && !isNaN(parseInt(vars[varName]))) ? (parseInt(varValue) + parseInt(vars[varName])) : (varValue + vars[varName]);\n            vars[varName] = newValue;\n        }\n\n    } else if (type == \"C\") {\n        const varName = txt.split(\"#\")[0];\n        const varValue = txt.split(\"#\")[1];\n        if (varName in vars) {\n            const check = (!isNaN(parseInt(varValue)) && !isNaN(parseInt(vars[varName]))) ? (parseInt(varValue) <= parseInt(vars[varName])) : (varValue == vars[varName]);\n            if (!check) tracker += 1; \n        }\n\n    } else if (type == \"E\") {\n        outputText.value = \"\";\n\n    } else if (type == \"I\") {\n        vars[txt.split(\"#\")[0]] = prompt(returnTextWithVars(txt.split(\"#\")[1]));\n\n    } else if (type == \"J\") {\n        if (!(returnTextWithVars(txt) in marks)) return console.log(`Invalid Mark : ${txt}`)\n        return progress(marks[returnTextWithVars(txt)]);\n\n    } else if (type == \"O\") {\n        options.push(txt);\n\n    } else if (type == \"T\") {\n        outputToConsole(returnTextWithVars(`${txt}\\n\\n`));\n\n    } else if (type == \"V\") {\n        vars[txt.split(\"#\")[0]] = txt.split(\"#\")[1];\n\n    } else if (type == \"W\") {\n        let optionText = \"\";\n        outputToConsole(returnTextWithVars(`${txt}\\n\\n`));\n        if (displayOptions) {\n            for (let i=0; i<options.length; i++) {\n                optionText += `${i} : ${options[i].split(\"#\").pop()}\\n`\n            }\n            if (options.length > 0) outputToConsole(returnTextWithVars(`${optionText}\\n`));\n        }\n        inputText.style.display = (options.length == 0) ? \"none\" : \"block\" ;\n        enterButton.style.width = (options.length == 0) ? \"100%\" : \"auto\" ;\n        enterButton.innerHTML = (options.length == 0) ? \"CONTINUE\" : \"ENTER\" ;\n        input = function() {\n            if (options.length == 0) {\n                progress(tracker + 1);\n            } else if (displayOptions) {\n                if (!isNaN(parseInt(inputText.value))) {\n                    if (parseInt(inputText.value) < options.length) {\n                        const markName = options[parseInt(inputText.value)].split(\"#\")[0];\n                        if (!(markName in marks)) return console.log(`Invalid Mark : ${markName}`);\n                        options = [];\n                        progress(marks[markName])\n                    }\n                }\n            } else {\n                outputToConsole(`> ${inputText.value}\\n\\n`);\n                if (inputText.value.toLowerCase() == \"help\") {\n                    inputText.value = \"\";\n                    return outputToConsole(`All Available Commands:\\n${commands.join(\" , \")}\\n\\n`);\n                }\n                let partialMatches = [];\n                for (let i=0; i<options.length; i++) {\n                    if (returnTextWithVars(options[i].split(\"#\")[1].toLowerCase().split(\" \")[0]) == inputText.value.toLowerCase().split(\" \")[0]) {\n                        partialMatches.push(options[i].split(\"#\")[1])\n                    }\n                    if (returnTextWithVars(options[i].split(\"#\")[1].toLowerCase()) == inputText.value.toLowerCase()) {\n                        const markName = options[i].split(\"#\")[0];\n                        if (!(markName in marks)) return console.log(`Invalid Mark : ${markName}`);\n                        fullMatch = true;\n                        options = [];\n                        inputText.value = \"\";\n                        return progress(marks[markName]);;\n                    }\n                }\n                outputToConsole(`${inputText.value} is not a valid option.\\n\\n`);\n                if (partialMatches.length > 0) outputToConsole(returnTextWithVars(`Similar Options: ${partialMatches.join(\" , \")}\\n\\n`));\n            }\n            inputText.value = \"\";\n        }\n        return;\n    }\n\n    progress(tracker + 1);\n}\n\n","login":"// Function login\n\n\nlet username = \"\";\nlet password = \"\";\nlet type = 0;\n\n\n\nenterUsername();\n\n\n\n\n\n\n\n\nfunction enterUsername() {\n    clear();\n    outputToConsole(\"Login\\n\\nPlease enter your account username ...\\n\\n\");\n    input = function() {\n        username = inputText.value;\n        inputText.value = \"\";\n        enterPassword();\n    }\n}\n\nfunction enterPassword() {\n    outputToConsole(\"Please enter your account password ...\\n\\n\");\n    input = function() {\n        password = inputText.value;\n        inputText.value = \"\";\n        enterType();\n    }\n}\n\nfunction enterType() {\n    outputToConsole(\"Please select what you would like to do:\\n\\n0 : Upload\\n1 : Download New\\n2 : Download All\\n\\n\");\n    input = function() {\n        type = (!isNaN(parseInt(inputText.value))) ? parseInt(inputText.value) : 0;\n        if (type == 0) {\n            upload(() => {consolex();});\n        } else if (type == 1) {\n            download(false, () => {consolex();});\n        } else if (type == 2) {\n            download(true, () => {consolex();});\n        } else {\n            outputToConsole(\"Invalid Input\\n\\n\");\n        }\n        inputText.value = \"\";\n    }\n}\n\n\n\n\n\n\n\nfunction upload(callback = function() {}) {\n    const ary = Object.keys(data)\n    let obj = {};\n    for (let i=0; i<ary.length; i++) {\n        if (ary[i] in data) obj[ary[i]] = JSON.stringify(data[ary[i]])\n    }\n    fetch(`https://script.google.com/macros/s/AKfycbzIbsWBCRZ14jYrDarQGBBNxBV5TQz2kuNzBIFI1H9XkaScOa0ku9QAgNSds7YAv2777g/exec`, {\n        redirect: \"follow\",\n        method: 'POST',\n        body: JSON.stringify({ username : username , password : password, type : \"set\", keys : obj }),\n        headers: {\n            'Content-Type': \"text/plain;charset=utf-8\"\n        }\n    })\n    .then(response => response.text())\n    .then(result => {\n        const data = JSON.parse(result);\n        alert(data.reply);\n        callback();\n    });\n}\n\nfunction download(overwrite=false, callback = function() {}) {\n    fetch(`https://script.google.com/macros/s/AKfycbzIbsWBCRZ14jYrDarQGBBNxBV5TQz2kuNzBIFI1H9XkaScOa0ku9QAgNSds7YAv2777g/exec`, {\n        redirect: \"follow\",\n        method: 'POST',\n        body: JSON.stringify({ username : username , password : password, type : \"get\" }),\n        headers: {\n            'Content-Type': \"text/plain;charset=utf-8\"\n        }\n    })\n    .then(response => response.text())\n    .then(result => {\n        const newData = JSON.parse(result);\n        if (\"result\" in newData) {\n            for (const key in newData.result) {\n                if (!(key in data) || (key in data && overwrite)) data[key] = JSON.parse(newData.result[key]);\n            }\n        } else {\n            alert(data.reply);\n        }\n        callback();\n    });\n}"};
        let data = {};
        //MARK

        const customHTML = document.getElementById("customHTML");

        window.db;
        
        window.openDB = function() {
            return new Promise((resolve, reject) => {
                const request = indexedDB.open("ConsoleXDB", 1);
                request.onerror = () => reject(request.error);
                request.onsuccess = () => {
                    window.db = request.result;
                    resolve();
                };
                request.onupgradeneeded = (event) => {
                    window.db = event.target.result;
                    window.db.createObjectStore("data", { keyPath: "id" });
                };
            });
        }

        window.saveData = function() {
            return window.openDB().then(() => {
                const transaction = window.db.transaction(["data"], "readwrite");
                const objectStore = transaction.objectStore("data");
                const request = objectStore.put({
                    id: "allData",
                    functions: JSON.stringify(functions),
                    data: JSON.stringify(data)
                });
                return new Promise((resolve, reject) => {
                    request.onsuccess = () => resolve();
                    request.onerror = () => reject(request.error);
                });
            });
        }

        window.loadData = function() {
            return window.openDB().then(() => {
                const transaction = window.db.transaction(["data"], "readonly");
                const objectStore = transaction.objectStore("data");
                const request = objectStore.get("allData");
                return new Promise((resolve, reject) => {
                    request.onsuccess = () => {
                        if (request.result) {
                            functions = JSON.parse(request.result.functions);
                            data = JSON.parse(request.result.data);
                            resolve({
                                functions: true,
                                data: true
                            });
                        } else {
                            resolve({ functions: null, data: null });
                        }
                    };
                    request.onerror = () => reject(request.error);
                });
            });
        }

        window.resetData = function() {
            return new Promise((resolve, reject) => {
                console.log("Data Reset")
                const request = indexedDB.deleteDatabase("ConsoleXDB");
                request.onerror = () => reject(request.error);
                request.onsuccess = () => resolve();
            });
        }

        class PRNG {
            constructor(seed) {
                this.seed = seed || Math.floor(Math.random() * 2**32);
                this.a = 1664525;
                this.c = 1013904223;
                this.m = 2**32;
                this.z = this.seed;
            }
            random() {
                this.z = (this.a * this.z + this.c) % this.m;
                return this.z / this.m;
            }
            range(min, max) {
                return min + (max - min) * this.random();
            }
            intRange(min, max) {
                return Math.floor(this.range(min, max));
            }
            reset() {
                this.z = this.seed;
            }
            newSeed(newSeed) {
                this.seed = newSeed;
                this.z = newSeed;
            }
        }

        window.loadData().then(data => {
            if (data.functions === null || data.data === null) {
                console.log("No data found or data not yet saved so using default.");
                window.saveData();
            }
            generateScripts();
            consolex();
        });

        function generateScripts() {
            for (const funcName in functions) {
                const scriptName = `Script_${funcName}`;
                if (document.getElementById(scriptName)) document.getElementById(scriptName).remove();
                let scriptTag = document.createElement('script');
                scriptTag.innerHTML = `window.${funcName} = function(arg) {${functions[funcName]}}`;
                scriptTag.id = scriptName;
                scriptTag.onerror = function(event) {
                    alert(`An error occurred in the script : ${funcName}`);
                };
                document.body.appendChild(scriptTag);
            }
        }

    </script>

</body></html>
