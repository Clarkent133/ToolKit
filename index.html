<html><head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="manifest" href="manifest.json">
        <title>ToolKit</title>
        <link rel="icon" type="image/png" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMAAAADACAYAAABS3GwHAAAG6ElEQVR4Ae3dbVqjOhQA4HgfF+Ks5Do78a7EupJxJ+NOZnbiJTpV7BAgtKSc9u0fKZDk8CaHj5ZKSl4ECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQOB6BG5Cb+pj2qWb9Bh6Gy4h+Nf0X3pKzxE3JWYC7NJrROyLjznvjoK9/gkWb+r2+T/CxXwtAecdUz4qB3rFS4CUHgL5Xl+owU5JYyWAvX+MhNqlnzECTSlWAtj7RxlX91ECjZYAUVzFGURAAgTpKGGuIyAB1nFVaxABCRCko4S5joAEWMdVrUEEJECQjhLmOgISYB1XtQYRkABBOkqY6whIgHVc1RpEQAIE6ShhriMgAdZxVWsQAQkQpKOEuY6ABFjHVa1BBCRAkI4S5joCt+tU27DWgD/Da6jTrqmgP1N1BGg3RLS0QQEJsMFOEVI7AQnQzlpLGxSQABvsFCG1E5AA7ay1tEEBCbDBThFSOwEJ0M5aSxsUkAAb7BQhtROQAO2stbRBAQmwwU4RUjuB+LdCtLNat6X+rQRu71jXule7I0AP4yyTu/Sr+3/KX//d++H7swR2HY1KgPP38935Q7jeCCTA9fa9Le8EXAOcchj0T11e07fusUG/T1b9Y7rrnr/y66M+1wkfFMdMOAIco9cv2x/8eX5/sPbXWzL9/iy0z8Gf6zhsb0m9yoR7PsD2uiw/tGPpYCyVyw+d679KT13J5YM9kqi/WVuYdgQ4phce031X/OGYKgbL1jxxMSfHexyDVZk5LiABxn3KS/Pe96bRo4Be0/dyIN2SVnGMBhFzoQRY0m+lU5d+Xae8SH1KL91p1vgjSHNMc+Lqx2jaNUD1GJgeZNODNTdaOncfG+hjy/YbMh3ffk1/OwFHgJphMGdw7SZOV/btlS5s98tLf+clwY9ScfO/CkiArx7ld9OD/3nyNKVce92SnASv3bcM5deD06EyTn/Jbf+N6QGB6YGfTjjwnwciGJ711LW6S/92C++HV+jm5tjnHDGKFVz+AkeAY/t46hOaofpLD/zeHXz+P1S2Py+fbh1+Z9BfnqfnJPBhmSt6LwHGOntq8OS9a/6Epv71UF+kUCJ/ZzC1l5/ajkLV1zBbAizt5alBt7TepeXyvUde1QISoJrsT4F8H/+WXqe892hL27VyLLcr1x+7+rxXLQ+su7fz61Pf9VkrdniX6FD5rR2thmI80zxHgDH4fDvz1EVmOUGGay5fAI9/0ztUWz63n2rf4B+S+5gnAT4oChP5InPq/LruIvOh0NLpZxv8k6ZOgSaJuhXef9hy83bKU1p/nwQtBt2+rVIseX6LOMbaD7LMEaCmo+YMqjmDs6bNw3Xn1D8nzsN6r/S9BKjt+DmDqzRId8Xbp19mhVGqt194Tnz99a98WgIsGQBzBtnwYL0fbG7qBrr8g5fh+j6ryzHNieuzhKlOQAIsHQYtB9zUD14M/KW9KAEWy30WfP6cXDR1bPmXRa0q9CbgCHDsQMg3sE19TJrbKJ3CzLkBrnTr8/tR6Puxm3DN5SXAKXo/f0x6eBpy+P6Ydt5vff76Rdkp6z8mtuBlb4PHv63w1x6Ua9e/Lc0m0TgCNGHWyFYFJMA5e8Ye/Zz6b21LgFZd8Pdg/92qae2UBVwDlG1Ov+TvJDh9G2qsEnAEqOKy8qUJSIBL61HbUyUgAaq4rHxpAhLg0nrU9lQJSIAqLitfmoAEuLQetT1VAhKgisvKlyYgAS6tR21PlYAEqOKy8qBA+aeeg6tvaWasb4Lz/+i56R5K13/l++xL98v31zO9jsDQcw6m/pfSOpEsqvXrPeaLqmhcqPTDksZhaG5EINAtH/ESILtLgpHRd+ZFgQZ/lop6DfBy5m7W/JBAsMGfNyHmEWCP70iwlzj/34CD//xoIiBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIEGgm8D9fZLEvqyRhqAAAAABJRU5ErkJggg==">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
        <style>
            body {
                margin: 0px;
                padding: 0px;
            }
        </style>
        <style id="customStyle"></style>
        <script src="https://cdn.jsdelivr.net/npm/phaser@3.60.0/dist/phaser.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/three@0.154.0/build/three.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    </head>
    <body>
        <div id="customHTML"></div>
        <script>
            const customHTML = document.getElementById("customHTML");
            const customStyle = document.getElementById("customStyle");
            //MARK1
            let toolKit = ["//Home\n\nwindow.home = function() {\n\n    customStyle.innerHTML = `\n        body {\n            font-family: 'Courier New', monospace;\n            font-weight: bold;\n        }\n    `\n\n    const templateIcon = \"https://lh3.googleusercontent.com/d/1f1I7G8rkCc94_7gjo4zNrf2kluoMdj7_\"\n    const panelWidth = ((innerWidth - 60) < 500) ? 'calc(100% - 60px)' : '500px'\n    const loginButton = ('username' in window && 'password' in window) ? `<button onclick=\"\" style=\"width: 300px; height: 80px;\">Logged in as ${window.username.split('@')[0]}</button>` : `<button onclick=\"loginPage(); toggleMenu();\" style=\"width: 200px; height: 60px;\">Login</button>`\n    customHTML.innerHTML = `\n        <img style=\"position: absolute; width: 100%; height: 100%; object-fit: cover;\" src=\"https://lh3.googleusercontent.com/d/1-xAEBprxq8GTYt6LLfUT9r2Y0ZRhWA3e\">\n        <div id=\"page\" style=\"position: absolute; width: 100%; height: 100%; z-index: 1; overflow-y: auto; scrollbar-width: none;\">\n            <div style=\"position: absolute; width: 100%; min-height: 100%; display: flex; flex-direction: ${(innerWidth > innerHeight) ? \"row\" : \"column\"}; justify-content: space-around; align-items: center;\">\n                <div style=\"width: calc(100% - 40px); height: 400px; font-size: 82px; margin: 20px; display: flex; justify-content: center; align-items: center; font-weight: bolder; color: rgba(255,255,255,0.9); text-decoration: underline; text-decoration-color: rgba(255,255,255,0.9);\">Welcome</div>\n                <div style=\"background-color: rgba(255,255,255,0.9); width: calc(100% - 40px); height: 200px; font-size: 32px; margin: 20px; align-items: center; display: flex; justify-content: center; border-radius: 8px;\">Area for something</div>\n            </div>\n        </div>\n        <div id=\"toggleMenuButton\" style=\"position: absolute; bottom: 5px; right: 5px; width: 50px; height: 50px; background-color: rgba(255, 255, 255, 0.9); border: solid black 2px; border-radius: 6px; z-index: 2; display: flex; flex-direction: column; justify-content: space-around; padding: 6px;\" onclick=\"toggleMenu();\">\n            <div style=\"height: 6px; width: 100%; background-color: black; border-radius: 4px;\"></div>\n            <div style=\"height: 6px; width: 100%; background-color: black; border-radius: 4px;\"></div>\n            <div style=\"height: 6px; width: 100%; background-color: black; border-radius: 4px;\"></div>\n        </div>\n        <div id=\"menuPanel\" style=\"position: absolute; left: -100%; top: 0px; width: ${panelWidth}; height: 100%; background-color: rgba(0, 0, 0, 0.9); transition: left 0.5s ease; z-index: 2; display: flex; flex-direction: column; gap: 20px; padding-top: 40px; overflow-y: auto; scrollbar-width: none;\">\n            <div style = \"display: flex; align-items: center; justify-content: center; height: 80px; font-size: 24px;\">\n                ${loginButton}\n            </div>\n            <hr style=\"background-color: white; height: 1px; width: calc(100% - 80px);\">\n            <div onclick=\"home();\" style = \"display: flex; align-items: center; text-align: left; height: 60px; font-size: 24px; color: white; padding-left: 40px;\"><img style=\"height: 50px; width: 50px; border: solid white 1px; border-radius: 4px; margin-right: 10px;\" src=\"${templateIcon}\"></img>Home</div>\n            <div onclick=\"passwordManager(''); toggleMenu();\" style = \"display: flex; align-items: center; text-align: left; height: 60px; font-size: 24px; color: white; padding-left: 40px;\"><img style=\"height: 50px; width: 50px; border: solid white 1px; border-radius: 4px; margin-right: 10px;\" src=\"${templateIcon}\"></img>Password Manager</div>\n            <div onclick=\"games(); toggleMenu();\" style = \"display: flex; align-items: center; text-align: left; height: 60px; font-size: 24px; color: white; padding-left: 40px;\"><img style=\"height: 50px; width: 50px; border: solid white 1px; border-radius: 4px; margin-right: 10px;\" src=\"${templateIcon}\"></img>Games</div>\n            <div onclick=\"cardCreator(); toggleMenu();\" style = \"display: flex; align-items: center; text-align: left; height: 60px; font-size: 24px; color: white; padding-left: 40px;\"><img style=\"height: 50px; width: 50px; border: solid white 1px; border-radius: 4px; margin-right: 10px;\" src=\"${templateIcon}\"></img>Card Creator</div>\n            <div onclick=\"tasks(); toggleMenu();\" style = \"display: flex; align-items: center; text-align: left; height: 60px; font-size: 24px; color: white; padding-left: 40px;\"><img style=\"height: 50px; width: 50px; border: solid white 1px; border-radius: 4px; margin-right: 10px;\" src=\"${templateIcon}\"></img>Tasks</div>\n            <div onclick=\"notes(); toggleMenu();\" style = \"display: flex; align-items: center; text-align: left; height: 60px; font-size: 24px; color: white; padding-left: 40px;\"><img style=\"height: 50px; width: 50px; border: solid white 1px; border-radius: 4px; margin-right: 10px;\" src=\"${templateIcon}\"></img>Notes</div>\n            <div onclick=\"importToolKit(); toggleMenu();\" style = \"display: flex; align-items: center; text-align: left; height: 60px; font-size: 24px; color: white; padding-left: 40px;\"><img style=\"height: 50px; width: 50px; border: solid white 1px; border-radius: 4px; margin-right: 10px;\" src=\"${templateIcon}\"></img>Import</div>\n            <div onclick=\"exportToolKit(); toggleMenu();\" style = \"display: flex; align-items: center; text-align: left; height: 60px; font-size: 24px; color: white; padding-left: 40px;\"><img style=\"height: 50px; width: 50px; border: solid white 1px; border-radius: 4px; margin-right: 10px;\" src=\"${templateIcon}\"></img>Export</div>\n            <div onclick=\"document.documentElement.requestFullscreen(); toggleMenu();\" style = \"display: flex; align-items: center; text-align: left; height: 60px; font-size: 24px; color: white; padding-left: 40px;\"><img style=\"height: 50px; width: 50px; border: solid white 1px; border-radius: 4px; margin-right: 10px;\" src=\"${templateIcon}\"></img>Fullscreen</div>\n            <div onclick=\"const check = prompt('If you are sure that you want to reset all custom data, enter : yes'); if (check == 'yes') {reset()}; toggleMenu();\" style = \"display: flex; align-items: center; text-align: left; height: 60px; font-size: 24px; color: white; padding-left: 40px;\"><img style=\"height: 50px; width: 50px; border: solid white 1px; border-radius: 4px; margin-right: 10px;\" src=\"${templateIcon}\"></img>Reset</div>\n            <div onclick=\"const newJS = prompt('Enter custom JS to run.'); eval(newJS); toggleMenu();\" style = \"display: flex; align-items: center; text-align: left; height: 60px; font-size: 24px; color: white; padding-left: 40px;\"><img style=\"height: 50px; width: 50px; border: solid white 1px; border-radius: 4px; margin-right: 10px;\" src=\"${templateIcon}\"></img>Run</div>\n            <div onclick=\"editToolKit(); toggleMenu();\" style = \"display: flex; align-items: center; text-align: left; height: 60px; font-size: 24px; color: white; padding-left: 40px;\"><img style=\"height: 50px; width: 50px; border: solid white 1px; border-radius: 4px; margin-right: 10px;\" src=\"${templateIcon}\"></img>Edit</div>\n            <div style = \"height: 60px;\"></div>\n        </div>\n    `;\n\n    window.page = document.getElementById(\"page\");\n    window.menuPanel = document.getElementById(\"menuPanel\");\n    window.toggleMenuButton = document.getElementById(\"toggleMenuButton\");\n\n    window.toggleMenu = function() {\n        menuPanel.style.left = (menuPanel.style.left == '-100%') ? '0px' : '-100%';\n    }\n}\n\n\nhome();\n\n\n\n\n\n","//Login\n\nwindow.loginPage = function() {\n    page.innerHTML += `\n\n    <div style=\"background-color: #fff; padding: 10px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.7); font-family: sans-serif; display: flex; justify-content: center; align-items: center; flex-direction: column; position: absolute; width: 300px; height: 400px; top: calc(50% - 200px); left: calc(50% - 150px);\">\n        <h2 style=\"text-align: center; margin-bottom: 20px; color: #333;\">Login</h2>\n        <form onsubmit=\"event.preventDefault(); login();\"> \n            <div style=\"margin-bottom: 15px;\">\n                <label for=\"username\" style=\"display: block; margin-bottom: 5px; color: #555;\">Username:</label>\n                <input type=\"text\" id=\"usrArea\" name=\"username\" required style=\"width: calc(100% - 12px); padding: 8px; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box;\">\n            </div>\n            <div style=\"margin-bottom: 15px;\">\n                <label for=\"password\" style=\"display: block; margin-bottom: 5px; color: #555;\">Password:</label>\n                <input type=\"password\" id=\"pswArea\" name=\"password\" required style=\"width: calc(100% - 12px); padding: 8px; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box;\">\n            </div>\n            <label for=\"uploadCheckbox\">\n                <input type=\"checkbox\" id=\"uploadCheckbox\" name=\"uploadCheckbox\" style=\"margin-left: 10px;\"> Upload Persistent\n            </label>\n            <label for=\"downloadCheckbox\">\n                <input type=\"checkbox\" id=\"downloadCheckbox\" name=\"downloadCheckbox\" style=\"margin-left: 10px;\"> Download Persistent\n            </label>\n            <label for=\"overwriteCheckbox\">\n                <input type=\"checkbox\" id=\"overwriteCheckbox\" name=\"overwriteCheckbox\" style=\"margin-left: 10px;\"> Overwrite Persistent\n            </label>\n            <hr style=\"width: 260px;\">\n            <button id=\"submitButton\" type=\"submit\" style=\"background-color: #007bff; color: #fff; padding: 10px 15px; border: none; border-radius: 4px; cursor: pointer; width: 100%;\">Login</button>\n        </form>\n    </div>\n    `\n}\n\n\n\n\nwindow.login = function() {\n    if (!document.getElementById(\"usrArea\")) return;\n    window.username = document.getElementById(\"usrArea\").value;\n    window.password = document.getElementById(\"pswArea\").value;\n    document.getElementById(\"submitButton\").innerHTML = \"Connecting ...\";\n    document.getElementById(\"submitButton\").style.backgroundColor = \"#ffa81c\";\n\n    if (document.getElementById(\"uploadCheckbox\").checked){\n        upload(Object.keys(persistent).filter(item => item !== \"games\"), () => {\n            if (document.getElementById(\"downloadCheckbox\").checked) {\n                download(document.getElementById(\"overwriteCheckbox\").checked, () => {saveData(); home();});\n            } else {home();}\n        })\n    } else if (document.getElementById(\"downloadCheckbox\").checked) {\n        download(document.getElementById(\"overwriteCheckbox\").checked, () => {saveData(); home();});\n    } else {\n        home();\n    }\n}\n\nwindow.upload = function(ary, callback = function() {}) {\n    if (!(\"username\" in window)) {\n        alert(\"You are not logged in\");\n        return;\n    } \n    let obj = {};\n    for (let i=0; i<ary.length; i++) {\n        if (ary[i] in persistent) obj[ary[i]] = JSON.stringify(persistent[ary[i]])\n    }\n    fetch(`https://script.google.com/macros/s/AKfycbzIbsWBCRZ14jYrDarQGBBNxBV5TQz2kuNzBIFI1H9XkaScOa0ku9QAgNSds7YAv2777g/exec`, {\n        redirect: \"follow\",\n        method: 'POST',\n        body: JSON.stringify({ username : username , password : password, type : \"set\", keys : obj }),\n        headers: {\n            'Content-Type': \"text/plain;charset=utf-8\"\n        }\n    })\n    .then(response => response.text())\n    .then(result => {\n        const data = JSON.parse(result);\n        alert(data.reply);\n        callback();\n    });\n}\n\nwindow.download = function(overwrite=false, callback = function() {}) {\n    if (!(\"username\" in window)) {\n        alert(\"You are not logged in\");\n        return;\n    } \n    fetch(`https://script.google.com/macros/s/AKfycbzIbsWBCRZ14jYrDarQGBBNxBV5TQz2kuNzBIFI1H9XkaScOa0ku9QAgNSds7YAv2777g/exec`, {\n        redirect: \"follow\",\n        method: 'POST',\n        body: JSON.stringify({ username : username , password : password, type : \"get\" }),\n        headers: {\n            'Content-Type': \"text/plain;charset=utf-8\"\n        }\n    })\n    .then(response => response.text())\n    .then(result => {\n        const data = JSON.parse(result);\n        if (\"result\" in data) {\n            for (const key in data.result) {\n                if (!(key in persistent) || (key in persistent && overwrite)) persistent[key] = JSON.parse(data.result[key]);\n            }\n        } else {\n            alert(data.reply);\n        }\n        callback();\n    });\n}\n\n\n\n","//Passwords\n\nwindow.passwordManager = function(code=\"\") {\n\n    window.returnCypheredText = function(text) {\n        if (text == \"\") return \" \";\n        let charAry = [\"a\", \"b\", \"c\", \"d\", \"e\", \"f\", \"g\", \"h\", \"i\", \"j\", \"k\", \"l\", \"m\", \"n\", \"o\", \"p\", \"q\", \"r\", \"s\", \"t\", \"u\", \"v\", \"w\", \"x\", \"y\", \"z\", \"A\", \"B\", \"C\", \"D\", \"E\", \"F\", \"G\", \"H\", \"I\", \"J\", \"K\", \"L\", \"M\", \"N\", \"O\", \"P\", \"Q\", \"R\", \"S\", \"T\", \"U\", \"V\", \"W\", \"X\", \"Y\", \"Z\", \"0\", \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \" \", \"!\", \"£\", \"%\", \"&\", \"^\", \"*\", \"(\", \")\", \"{\", \"}\", \"[\", \"]\", \":\", \";\", \"#\", \"@\", \"?\", \",\", \".\", \"/\", \"_\", \"-\", \"+\", \"=\", \"¬\" ];\n        let cypher = {};\n        myPRNG.newSeed(code);\n        if (code != 0) {\n            const aryLength = charAry.length;\n            for (let i=0; i<(aryLength/2); i++) {\n                let firstChr = charAry.splice(myPRNG.intRange(0, charAry.length), 1)[0];\n                let secondChr = charAry.splice(myPRNG.intRange(0, charAry.length), 1)[0];\n                cypher[firstChr] = secondChr;\n                cypher[secondChr] = firstChr;\n            }\n        } else {\n            for (let i=0; i<charAry.length; i++) {\n                cypher[charAry[i]] = charAry[i];\n            }\n        }\n        let outputText = \"\"\n        for (let i=0; i<text.length; i++) {\n            if (text[i].replace(\"\\n\", \"¬\") in cypher) {\n                outputText += cypher[text[i].replace(\"\\n\", \"¬\")].replace(\"¬\", \"\\n\");\n            } else {\n                console.log(`Unsupported Character : ${inputText[i]}`);\n            }\n        }\n        return outputText;\n    }\n\n    const codeAreaStyle = (innerWidth > innerHeight) ? `width: 284px; height: calc(100% - 20px);` : `width: calc(100% - 20px); height: 284px;`;\n    let entryText = \"\";\n    if (!(\"passwordManager\" in persistent)) persistent[\"passwordManager\"] = {};\n    for (const title in persistent.passwordManager) {\n        entryText += addForm(title);\n    }\n    function addForm(title) {\n        return `\n            <div id=\"entry_${title}\" style=\"width: 100%; height: 140px; padding: 10px; margin-bottom: 10px; border: solid black 2px; border-radius: 8px; display: flex; flex-direction: column; gap: 10px; background-color: white\">\n                <div style=\"width: 100%; height: 100%; display: flex; gap: 10px;\">\n                    <p id=\"entryTitle_${title}\" style=\"width: 100%; height: 100%; display: flex; align-items: center; font-size: 24px;\"></p>\n                    <button style=\"width: 80px; height: 100%;\" onclick=\"editEntry('${title}');\">Edit</button>\n                </div>\n                <div style=\"width: 100%; height: 100%; display: flex; gap: 10px;\">\n                    <button style=\"width: 100%; height: 100%;\" onclick=\"navigator.clipboard.writeText(returnCypheredText(persistent.passwordManager['${title}'].username)); alert('Copied Username');\">Copy Username</button>\n                    <button style=\"width: 100%; height: 100%;\" onclick=\"navigator.clipboard.writeText(returnCypheredText(persistent.passwordManager['${title}'].password)); alert('Copied Password');\">Copy Password</button>\n                </div>\n            </div>\n        `;\n    }\n\n    window.generateRandomPassword = function(pwLength) {\n        let pw = \"\";\n        let charAry = [\"a\", \"b\", \"c\", \"d\", \"e\", \"f\", \"g\", \"h\", \"i\", \"j\", \"k\", \"l\", \"m\", \"n\", \"o\", \"p\", \"q\", \"r\", \"s\", \"t\", \"u\", \"v\", \"w\", \"x\", \"y\", \"z\", \"A\", \"B\", \"C\", \"D\", \"E\", \"F\", \"G\", \"H\", \"I\", \"J\", \"K\", \"L\", \"M\", \"N\", \"O\", \"P\", \"Q\", \"R\", \"S\", \"T\", \"U\", \"V\", \"W\", \"X\", \"Y\", \"Z\", \"0\", \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"!\", \"£\", \"%\", \"&\", \"^\", \"*\", \"(\", \")\", \"#\", \"@\", \"?\", \"_\", \"-\", \"+\"]\n        for (let i=0; i<pwLength; i++) {\n            pw += charAry[Math.floor(Math.random() * charAry.length)]\n        }\n        return pw;\n    }\n\n    window.editEntry = function(title) {\n        const entryDiv = document.getElementById(`entry_${title}`);\n        const entry = persistent.passwordManager[title];\n        entryDiv.style.height = \"400px\";\n        entryDiv.innerHTML = `\n            <input id=\"newTitle_${title}\" type=\"text\" style=\"width: 100%; height: 60px;\" placeholder=\"Title\" value=\"${returnCypheredText(title)}\">\n            <input id=\"newUsername_${title}\" type=\"text\" style=\"width: 100%; height: 60px;\" placeholder=\"Username\" value=\"${returnCypheredText(entry.username)}\">\n            <div style=\"width: 100%; height: 60px; display: flex; gap: 10px;\">\n                <input id=\"newPassword_${title}\" type=\"text\" style=\"width: 100%; height: 100%;\" placeholder=\"Password\" value=\"${returnCypheredText(entry.password)}\">\n                <button onclick=\"newPassword.value = generateRandomPassword(14);\" style=\"width: 80px; height: 100%;\">Generate</button>\n            </div>\n            <textarea id=\"newNotes_${title}\" type=\"text\" style=\"width: 100%; height: 100%; padding: 5px;\" placeholder=\"Notes\">${returnCypheredText(entry.notes)}</textarea>\n            <button style=\"width: 100%; height: 60px;\" onclick=\"updateEntry('${title}')\">Save</button>\n            <button style=\"width: 100%; height: 60px;\" onclick=\"let answer = prompt('Are you sure you want to delete this entry? To confirm enter : ${returnCypheredText(title)}'); if (answer == '${returnCypheredText(title)}') {delete persistent.passwordManager['${title}']; saveData();} passwordManager(${(code == 0) ? '' : code});\">Delete</button>\n        `;\n        window.newUsername = document.getElementById(`newUsername_${title}`);\n        window.newPassword = document.getElementById(`newPassword_${title}`);\n        window.newTitle = document.getElementById(`newTitle_${title}`);\n        window.newNotes = document.getElementById(`newNotes_${title}`);\n        window.updateEntry = function(title) {\n            delete persistent.passwordManager[title];\n            persistent.passwordManager[returnCypheredText(newTitle.value)] = {username : returnCypheredText(newUsername.value) , password : returnCypheredText(newPassword.value) , notes : returnCypheredText(newNotes.value)};\n            saveData();\n            passwordManager((code == 0) ? '' : code);\n        }\n    }\n\n    page.innerHTML = `\n        <div style=\"display: flex; position: absolute; width: 100%; height: 100%; flex-direction: ${(innerWidth > innerHeight) ? \"row\" : \"column\"};\">\n            <div id=\"codeArea\" style=\"display: flex; flex-direction: column; padding: 10px; margin: 10px; background-color: white; gap: 10px; border: solid black 2px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.7); ${codeAreaStyle}\">\n                <div style=\"width: 100%; height: 40px; display: flex; gap: 10px;\">\n                    <input id=\"codeInputArea\" type=\"text\" style=\"width: 100%; height: 40px; font-size: 24px;\" readonly value=\"${code}\">\n                    <button style=\"width: 60px; height: 40px; font-size: 24px;\" onclick=\"updateCypher('-');\">&lt;</button>\n                </div>\n                <div style=\"display: grid; grid-template-columns: repeat(auto-fit, minmax(80px, 1fr)); gap: 10px; height: 100%; width: 100%\">\n                    <button onclick=\"updateCypher('1');\" style=\"font-size: 24px;\">1</button>\n                    <button onclick=\"updateCypher('2');\" style=\"font-size: 24px;\">2</button>\n                    <button onclick=\"updateCypher('3');\" style=\"font-size: 24px;\">3</button>\n                    <button onclick=\"updateCypher('4');\" style=\"font-size: 24px;\">4</button>\n                    <button onclick=\"updateCypher('5');\" style=\"font-size: 24px;\">5</button>\n                    <button onclick=\"updateCypher('6');\" style=\"font-size: 24px;\">6</button>\n                    <button onclick=\"updateCypher('7');\" style=\"font-size: 24px;\">7</button>\n                    <button onclick=\"updateCypher('8');\" style=\"font-size: 24px;\">8</button>\n                    <button onclick=\"updateCypher('9');\" style=\"font-size: 24px;\">9</button>\n                    <button onclick=\"updateCypher('0'); updateCypher()\" style=\"font-size: 24px;\">0</button>\n                </div>\n            </div>\n            <div style=\"width: ${(innerWidth > innerHeight) ? '100%' : 'calc(100% - 20px)'}; height: calc(100% - 20px); margin: 10px; overflow-y: auto; scrollbar-width: none;\">\n                ${entryText}\n                <button style=\"width: 100%; height: 60px; border-radius: 6px; font-size: 24px;\" onclick=\"persistent.passwordManager['New Entry'] = {username:'' , password:'' , notes:''}; saveData(); passwordManager(${(code == 0) ? '' : code});\">New Entry</button>\n            </div>\n        </div>\n    `;\n\n    window.codeInputArea = document.getElementById(\"codeInputArea\");\n    \n    window.updateCypher = function(char=\"\") {\n        if (char == \"-\" && codeInputArea.value != ' ') {\n            codeInputArea.value = codeInputArea.value.slice(0, -1);\n        } else {\n            codeInputArea.value += char;\n        }\n        code = (codeInputArea.value == \"\") ? 0 : parseInt(codeInputArea.value);\n        for (const title in persistent.passwordManager) {\n            const entry = persistent.passwordManager[title];\n            if (document.getElementById(`entryTitle_${title}`)) document.getElementById(`entryTitle_${title}`).innerHTML = returnCypheredText(title);\n            if (document.getElementById(`newTitle_${title}`)) document.getElementById(`newTitle_${title}`).value = returnCypheredText(title);\n            if (document.getElementById(`newUsername_${title}`)) document.getElementById(`newUsername_${title}`).value = returnCypheredText(entry.username);\n            if (document.getElementById(`newPassword_${title}`)) document.getElementById(`newPassword_${title}`).value = returnCypheredText(entry.password);\n            if (document.getElementById(`newNotes_${title}`)) document.getElementById(`newNotes_${title}`).value = returnCypheredText(entry.notes);\n        }\n    }\n\n    updateCypher();\n\n\n}\n\n\n\nwindow.myPRNG = new PRNG(0);\n","//Games\n\nwindow.gameEngine = function(levelJS) {\n\n    window.init = function(levelJS) {\n        window.cnv = document.createElement(\"canvas\");\n        window.ctx = cnv.getContext(\"2d\");\n        cnv.width = innerWidth;\n        cnv.height = innerHeight;\n        cnv.style.width = `${innerWidth}px`;\n        cnv.style.height = `${innerHeight}px`;\n        document.body.appendChild(cnv);\n        window.creations = {};\n        window.creationTracker = 0;\n        window.keys = {mouse:{x:0 , y:0 , isDown:false , clickUsed:false}};\n        window.levelInitJS = new Function(levelJS);\n        window.lastFrameTime = performance.now();\n        window.frameCount = 0;\n        window.lastFpsUpdate = performance.now();\n\n        const mouseTrigger = (e) => {\n            keys.mouse.x = e.clientX;\n            keys.mouse.y = e.clientY;\n        };\n        window.addEventListener('keydown', (e) => {\n            keys[e.key.toLowerCase()] = { isDown: true, clickUsed: false };\n        });\n        window.addEventListener('keyup', (e) => {\n            keys[e.key.toLowerCase()] = { isDown: false, clickUsed: false };\n        });\n        cnv.addEventListener('mousedown', (e) => {\n            keys.mouse.isDown = true;\n            mouseTrigger(e);\n        });\n        cnv.addEventListener('mousemove', mouseTrigger);\n        cnv.addEventListener('mouseup', (e) => {\n            keys.mouse.isDown = false;\n            keys.mouse.clickUsed = false;\n        });\n\n        levelInitJS();\n        updateGame();\n    };\n\n    window.updateGame = function() {\n        const now = performance.now();\n        window.delta = (now - lastFrameTime) / 1000; // Convert to seconds\n        lastFrameTime = now;\n        frameCount++;\n        if (now - lastFpsUpdate >= 5000) { // Every 5 seconds, update FPS\n            window.fps = frameCount / 5;\n            frameCount = 0;\n            lastFpsUpdate = now;\n            console.log(`FPS: ${fps}`);\n        }\n        ctx.clearRect(0, 0, cnv.width, cnv.height);\n        for (const creationName in creations) {\n            if (\"js\" in creations[creationName]) creations[creationName].js(creations[creationName]);\n        }\n        for (const creationName in creations) {\n            const creation = creations[creationName];\n            if (\"colour\" in creation) {\n                ctx.fillStyle = creation.colour;\n                ctx.imageSmoothingEnabled = false;\n                ctx.fillRect(creation.x, creation.y, creation.w, creation.h);\n            }\n            if (\"animation\" in creation) {\n                if (creation.animation.length == 1) {\n                    ctx.imageSmoothingEnabled = false;\n                    ctx.drawImage(creation.animation[0], creation.x, creation.y, creation.w, creation.h);\n                } else {\n                    ctx.imageSmoothingEnabled = false;\n                    ctx.drawImage(creation.animation[creation.currentFrame%creation.animation.length], creation.x, creation.y, creation.w, creation.h);\n                    creation.frameTimer += 1;\n                    if (creation.frameTimer >= creation.frameDuration) {\n                        creation.frameTimer = 0;\n                        creation.currentFrame += 1;\n                    }\n                }\n            }\n        }\n        requestAnimationFrame(updateGame)\n    };\n\n    window.create = function(obj) {\n        const creationName = `obj_${creationTracker}`;\n        creationTracker++;\n        defaultCreation = {\n            name : creationName,\n            x : 0,\n            y : 0,\n            w : 10,\n            h : 10,\n            anim : function(ary, duration) {if (ary.length == 0) {if (\"animation\" in this) delete this.animation} else {this[\"animation\"] = ary; this[\"frameDuration\"] = duration; this[\"currentFrame\"] = 0; this[\"frameTimer\"] = 0;}}\n        };\n        creations[creationName] = { ...defaultCreation, ...obj }\n        return creationName;\n    };\n\n    window.remove = function(creationName) {\n        if (creationName in creations) delete creations[creationName];\n    };\n\n    window.colliding = function(objName) {\n        if (!creations.hasOwnProperty(objName)) return false;\n        const targetObj = creations[objName];\n        for (const otherObjName in creations) {\n            if (otherObjName !== objName) {\n                const otherObj = creations[otherObjName];\n                if (targetObj.x < otherObj.x + otherObj.w && targetObj.x + targetObj.w > otherObj.x && targetObj.y < otherObj.y + otherObj.h && targetObj.y + targetObj.h > otherObj.y) {\n                    return otherObjName;\n                }\n            }\n        }\n        return false;\n    };\n\n    window.clicked = function(obj) {\n        if (typeof obj === \"string\") {\n            if (!(obj in keys)) return false;\n            if (keys[obj].isDown && !keys[obj].clickUsed) {\n                keys[obj].clickUsed = true;\n                return true;\n            }\n        } else if (keys.mouse.x >= obj.x && keys.mouse.x <= obj.x + obj.w && keys.mouse.y >= obj.y && keys.mouse.y <= obj.y + obj.h) {\n            if (!keys.mouse.clickUsed && keys.mouse.isDown) {\n                keys.mouse.clickUsed = true;\n                return true;\n            }\n        }\n        return false;\n    };\n\n    window.held = function(obj) {\n       if (typeof obj === \"string\") {\n            if (!(obj in keys)) return false;\n            return keys[obj].isDown;\n        } else if (keys.mouse.x >= obj.x && keys.mouse.x <= obj.x + obj.w && keys.mouse.y >= obj.y && keys.mouse.y <= obj.y + obj.h) {\n            return keys.mouse.isDown;\n        }\n        return false;\n    };\n\n    window.imagesFromBase64 = function(base64String, xCount, yCount, callback = function() {}) {\n        let newImage = new Image();\n        newImage.src = base64String;\n        newImage.onload = () => {\n            const width = newImage.width;\n            const height = newImage.height;\n            const spriteWidth = width / xCount;\n            const spriteHeight = height / yCount;\n            if (spriteWidth % 1 !== 0 || spriteHeight % 1 !== 0) {\n                alert(\"Image dimensions are not evenly divisible by xCount and yCount.\");\n            }\n            const sprites = [];\n            const tempCanvas = document.createElement(\"canvas\");\n            const tempCtx = tempCanvas.getContext(\"2d\");\n            tempCanvas.width = spriteWidth;\n            tempCanvas.height = spriteHeight;\n\n            for (let y = 0; y < yCount; y++) {\n                for (let x = 0; x < xCount; x++) {\n                    tempCtx.clearRect(0, 0, spriteWidth, spriteHeight);\n                    tempCtx.drawImage(newImage,x * spriteWidth,y * spriteHeight,spriteWidth,spriteHeight,0,0,spriteWidth,spriteHeight);\n                    const spriteDataUrl = tempCanvas.toDataURL();\n                    const spriteImage = new Image();\n                    spriteImage.src = spriteDataUrl;\n                    spriteImage.onload = () => {\n                        sprites.push(spriteImage);\n                        if (sprites.length === xCount * yCount) {\n                            callback(sprites)\n                        }\n                    };\n                }  \n            };\n        }\n    }\n\n    window.changeLevel = function(levelJS) {\n        creations = {};\n        levelInitJS = new Function(levelJS);\n        levelInitJS();\n    };\n    \n    init(levelJS);\n};\n\n\n\nwindow.games = function() {\n\n    if (!(\"games\" in persistent)) {\n        persistent[\"games\"] = {\n            \"Game1\" : ['']\n        }\n    }\n\n    window.showHelp = function(gameName, levelID) {\n        page.innerHTML = `\n            <div id=\"helpArea\" style=\"background-color: #fff; padding: 10px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.7); border: solid black 2px; font-family: sans-serif; display: flex; justify-content: center; align-items: center; flex-direction: column; position: absolute; width: calc(100% - 80px); height: calc(100% - 80px); top: 40px; left: 40px;\">\n                <h1 style=\"text-align: center; width: 100%\">Help</h1>\n                <hr style=\"width: 100%; min-height: 2px;\">\n                <h5>How to make a game?</h5>\n                <p>This text area for level JS, gives you a place to enter custom JavaScript which runs on running the level.There are a few functions available to you to make it a bit easier listed below.</p>\n                <hr style=\"width: 100%; min-height: 2px;\">\n                <ul style=\"width: 100%; height: 100%; border: solid black 1px; border-radius: 4px; overflow-y: auto; scrollbar-width: none;\">\n                    <li>\n                        <u>create(obj)</u> : This function creates a new object to the variable/object \"creations\" and returns a unique name used as the key in creations. It has default values and is ammended with those you state in obj ({}) and has default behaviour with the game Engine. Here are the defaults :\n                        <ul>\n                            <li>name : autoAssignedEqualToObjectsKeyInCreations</li>\n                            <li>x : 0 (This is the x position)</li>\n                            <li>y : 0 (This is the y position)</li>\n                            <li>w : 10 (This is the width)</li>\n                            <li>h : 10 (This is the height)</li>\n                            <li>colour : colourString (The colour string you enter makes the object have that background colour.)</li>\n                            <li>anim : function (arrayOfImages , NumberOfFramesToDisplayEachImage) This function takes an array of images and a value, it then shows them images looping.</li>\n                        </ul>\n                    </li>\n                    <li><u>remove(objName)</u> : This function removes the object in creations if it exists with name objName.</li>\n                    <li><u>clicked</u> : This function returns true if key is clicked or object is clicked with mouse.</li>\n                    <li><u>held</u> : This function returns true if key is held or object is held with mouse.</li>\n                    <li><u>imagesFromBase64(ImageBase64String, X-Across , Y-Across , callback(arrayOfIndividualImages))</u> : This function</li>\n                    <li><u>colliding(objName)</u> : This function returns the object of a collision, if no collision then it returns false.</li>\n                    <li><u>changeLevel(levelJS)</u> : This function resets and loads a new level</li>\n                </ul>\n                <hr style=\"width: 100%; min-height: 2px;\">\n                <button onclick=\"editLevel('${gameName}' , ${levelID});\" style=\"font-size: 24px;\">Return</button>\n            </div>\n        `;\n    }\n\n    window.editLevel = function(gameName, levelID) {\n        page.innerHTML = `\n            <div style=\"position: absolute; width: calc(100% - 20px); height: calc(100% - 20px); left: 10px; top: 10px; border: solid black 2px; border-radius: 6px; display: flex; flex-direction: column; gap: 10px; padding: 10px; background-color: white; overflow-y: auto; scrollbar-width: none;\">\n                <textarea id=\"levelCustomJS\" placeholder=\"Level JS\" style=\"height: 100%; width: 100%; border: solid black 1px; border-radius: 6px;\" wrap=off></textarea>\n                <div style=\"min-height: 40px; width: 100%; font-size: 24px; display: flex; justify-content: space-around;\">\n                    <button onclick=\"persistent.games['${gameName}'][${levelID}] = levelCustomJS.value; saveData(); showLevels('${gameName}');\" style=\"min-width: 120px; height: 100%; border: solid black 1px; border-radius: 6px;\">Save</button>\n                    <button onclick=\"persistent.games['${gameName}'][${levelID}] = levelCustomJS.value; saveData(); showHelp('${gameName}' , '${levelID}');\" style=\"min-width: 120px; height: 100%; border: solid black 1px; border-radius: 6px;\">Help</button>\n                    <button onclick=\"persistent.games['${gameName}'][${levelID}] = levelCustomJS.value; saveData(); customHTML.innerHTML = ''; gameEngine(levelCustomJS.value)\" style=\"min-width: 120px; height: 100%; border: solid black 1px; border-radius: 6px;\">Run</button>\n                </div>\n            </div>\n        `;\n        window.levelCustomJS = document.getElementById(\"levelCustomJS\");\n        levelCustomJS.value = persistent.games[gameName][levelID];\n\n        levelCustomJS.addEventListener('keydown', function(event) {\n            if (event.key === 'Tab') {\n                event.preventDefault();\n                const start = levelCustomJS.selectionStart;\n                const end = levelCustomJS.selectionEnd;\n                levelCustomJS.value = levelCustomJS.value.substring(0, start) + '    ' + levelCustomJS.value.substring(end);\n                levelCustomJS.selectionStart = levelCustomJS.selectionEnd = start + 4;\n            }\n        });\n    }\n\n    window.showLevels = function(gameName) {\n        let levelsText = \"\";\n        for (let i=0; i<persistent.games[gameName].length; i++) {\n            levelsText += `<button onclick=\"editLevel('${gameName}' , ${i})\" style=\"width: 100%; height: 200px; font-size: 24px; border-radius: 6px;\">Level ${i}</button>`;\n        }\n\n        page.innerHTML = `\n            <div style=\"display: flex; position: absolute; top: 10px; left: 10px; width: calc(100% - 20px); height: 50px; gap: 10px;\">\n                <button onclick=\"const levelID = prompt('Please enter the number of the Level to remove.'); if (parseInt(levelID) < persistent.games['${gameName}'].length) {persistent.games['${gameName}'].splice(parseInt(levelID), 1); saveData();} showLevels('${gameName}');\" style=\"height: 100%; width: 140px; font-size: 24px; border: solid black 2px; border-radius: 6px;\">Remove</button>\n                <div style=\"height: 100%; width: 100%; font-size: 24px; display: flex; justify-content: center; align-items: center; border: solid black 2px; border-radius: 6px; background-color: rgba(255,255,255,0.8);\">Levels</div>\n                <button onclick=\"persistent.games['${gameName}'].push(''); saveData(); showLevels('${gameName}');\" style=\"height: 100%; width: 140px; font-size: 24px; border: solid black 2px; border-radius: 6px;\">New</button>\n            </div>\n            <div style=\"display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); position: absolute; top: 70px; left: 10px; width: calc(100% - 20px); max-height: calc(100% - 80px); gap: 10px; overflow-y: auto; scrollbar-width: none; border: solid black 2px; border-radius: 6px; padding: 5px; background-color: rgba(255,255,255,0.6);\">\n                ${levelsText}\n            </div>\n        `;\n    }\n\n    window.showGames = function() {\n        let gamesText = \"\";\n        for (const gameName in persistent.games) {\n            gamesText += `<button onclick=\"showLevels('${gameName}');\" style=\"width: 100%; height: 200px; font-size: 24px; border-radius: 6px;\">${gameName}</button>`;\n        }\n\n        page.innerHTML = `\n            <div style=\"display: flex; position: absolute; top: 10px; left: 10px; width: calc(100% - 20px); height: 50px; gap: 10px;\">\n                <button onclick=\"const newName = prompt('Please enter the name of the Game to remove.'); if (newName in persistent.games) {delete persistent.games[newName]; saveData();} showGames();\" style=\"height: 100%; width: 140px; font-size: 24px; border: solid black 2px; border-radius: 6px;\">Remove</button>\n                <div style=\"height: 100%; width: 100%; font-size: 24px; display: flex; justify-content: center; align-items: center; border: solid black 2px; border-radius: 6px; background-color: rgba(255,255,255,0.8);\">Games</div>\n                <button onclick=\"const newName = prompt('Please enter the name for the new Game.'); persistent.games[newName] = ['']; saveData(); showGames();\" style=\"height: 100%; width: 140px; font-size: 24px; border: solid black 2px; border-radius: 6px;\">New</button>\n            </div>\n            <div style=\"display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); position: absolute; top: 70px; left: 10px; width: calc(100% - 20px); max-height: calc(100% - 80px); gap: 10px; overflow-y: auto; scrollbar-width: none; border: solid black 2px; border-radius: 6px; padding: 5px; background-color: rgba(255,255,255,0.6);\">\n                ${gamesText}\n            </div>\n        `;\n    }\n\n    showGames();\n\n};\n\n\n","//Cards\n\nwindow.cardCreator = function() {\n\n    window.cardIcons = [\"Slow\" , \"Tap\" , \"Power\" , \"Agility\" , \"Wisdom\"];\n    window.cardIconImage = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAAAQCAYAAACBSfjBAAAAAXNSR0IArs4c6QAAAORJREFUWIXtl+sOgyAMhWHZ+79y92cm2J1eaJkY0y8hIlIutT1ia0Wxk87uKWgn2aJ+j+IN2qxNa04ebYldV48fGcM7t9Tv5/nLuaAMfShZPBmi9fFmmBsUgdTsNzALgbrl0Ki8rLJ3wSPwmBRN5t04gts8RhtRCiMnZpzHx50Zg4YSIWPrskcpnMFabDbyroxcHkBwbkkD29eA1zV9lI42Xbla7HK4JmEneAoj5x3tmj5K8LSNpPFOzNODpIHSG5jduOTsv3wRF9OF+glJA1dFyEy63wm0PhhYK3/lEFkNLIpC5QPRVTgksfcGbAAAAABJRU5ErkJggg==\";\n    window.cardFont = \"'Courier New', monospace\";\n\n\n    if (!(\"decks\" in persistent)) {\n        persistent.decks = {\"Deck 1\" : {}}\n    }\n\n    window.showDeck = function(deckName) {\n        if (Object.keys(persistent.decks[deckName]).length == 0) {\n            const values = [\"Ace\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\", \"Jack\", \"Queen\", \"King\"];\n            const compactValues = [\"A\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\", \"J\", \"Q\", \"K\"];\n            const suits = [\"Clubs\", \"Hearts\", \"Spades\", \"Diamonds\"];\n            persistent.decks[deckName] = {};\n            for (let i=0; i<52; i++) {\n                persistent.decks[deckName][`${values[i%13]} of ${suits[Math.floor(i/13)]}`] = {\n                    title: `${values[i%13]} of ${suits[Math.floor(i/13)]}`,\n                    durability: 0,\n                    suitValue: `${compactValues[i%13]}${suits[Math.floor(i/13)][0]}`,\n                    footer: \"\",\n                    abilities: []\n                }\n            }\n            for (let i=1; i<9; i++) {\n                persistent.decks[deckName][`Joker ${i}`] = {\n                    title: `Joker ${i}`,\n                    durability: 0,\n                    suitValue: \"Jo\",\n                    footer: \"Joker\",\n                    abilities: []\n                }\n            }\n        }\n        let cardText = \"\"\n        for (const cardTitle in persistent.decks[deckName]) {\n            cardText += `\n                <div style=\"width: 100%; min-height: 60px; background-color: white; border: solid black 2px; border-radius: 6px; display: flex; padding: 10px;\">\n                    <p style=\"width: 100%; height: 50px; font-size: 24px; display: flex; align-items: center;\">${persistent.decks[deckName][cardTitle].title}</p>\n                    <button onclick=\"editCard('${deckName}', '${cardTitle}');\" style=\"width: 80px; height: 100%; font-size: 24px;\">${persistent.decks[deckName][cardTitle].suitValue}</button>\n                </div>\n            `;\n        }\n        page.innerHTML = `\n            <div style=\"position: absolute; top: 10px; left: 10px; width: calc(100% - 20px); height: calc(100% - 20px); display: flex; flex-direction: ${(innerWidth > innerHeight) ? 'row' : 'column'}; gap: 10px;\">\n                <div style=\"height: ${(innerWidth > innerHeight) ? '100%' : '25%'}; width: ${(innerWidth > innerHeight) ? '25%' : '100%'}; border: solid black 2px; border-radius: 6px; background-color: white; display: flex; flex-direction: ${(innerWidth > innerHeight) ? 'column' : 'row'};\">\n                    <div style=\"height: 100%; width: 100%; display: flex; flex-direction: column; justify-content: center; align-items: center; padding: 10px; border: solid black 1px;\">\n                        <p style=\"font-size: 24px; text-align: center;\">Export Cards</p>\n                    </div>\n                    <div style=\"height: 100%; width: 100%; display: flex; flex-direction: column; justify-content: center; align-items: center; padding: 10px; border: solid black 1px;\">\n                        <p style=\"font-size: 24px;\">Size</p>\n                        <div style=\"width: 100%; display: flex; gap: 10px; justify-content: center; align-items: center;\">\n                            <input id=\"acrossInput\" type=\"number\" style=\"font-size: 24px; width: 60px;\" value=\"1\" onchange=\"if (parseInt(acrossInput.value) < 1) acrossInput.value = '1'\">\n                            <p style=\"font-size: 24px; display: flex; justify-content: center; align-items; center\">X</p>\n                            <input id=\"downInput\" type=\"number\" style=\"font-size: 24px; width: 60px;\" value=\"1\" onchange=\"if (parseInt(downInput.value) < 1) downInput.value = '1'\">\n                        </div>\n                    </div>\n                    <div style=\"height: 100%; width: 100%; display: flex; flex-direction: column; justify-content: center; align-items: center; padding: 10px; border: solid black 1px;\">\n                        <button onclick=\"downloadDeck('${deckName}')\" style=\"font-size: 24px; width: 100px; height: 100px;\">Export</button>\n                    </div>\n                </div>\n                <div id=\"cardArea\" style=\"height: 100%; width: 100%; border: solid black 2px; border-radius: 6px; background-color: white; display: flex; flex-direction: column; padding: 10px; gap: 10px; overflow-y: auto; scrollbar-width: none;\">\n                    ${cardText}\n                </div>\n            </div>\n        `;\n        window.acrossInput = document.getElementById(\"acrossInput\");\n        window.downInput = document.getElementById(\"downInput\");\n        window.cardArea = document.getElementById(\"cardArea\");\n\n        window.editCard = function(deckName, cardTitle) {\n            let abilityText = \"\";\n            for (let i=0; i<persistent.decks[deckName][cardTitle].abilities.length; i++) {\n                abilityText += `\n                    <div style=\"width: 100%; min-height: 200px; font-size: 24px; display: flex; flex-direction: column; gap: 10px; border: solid black 2px; border-radius: 6px; background-color: rgba(200,200,200,1); padding: 10px;\">\n                        <div style=\"width: 100%; height: 100%; display: flex; gap: 10px;\">\n                            <input id=\"title_${i}\" placeholder=\" Ability Title\" type=\"text\" style=\"width: 100%; height: 100%;\" value=\"${persistent.decks[deckName][cardTitle].abilities[i].title}\">\n                            <button onclick=\"saveCard('${deckName}' , '${cardTitle}'); persistent.decks['${deckName}']['${cardTitle}'].abilities.splice(${i}, 1); editCard('${deckName}' , '${cardTitle}');\" style=\"width: 33%; height: 100%; border: solid black 2px; border-radius: 6px;\">Remove</button>\n                        </div>\n                        <div style=\"display: flex; width: 100%; height: 100%; gap: 10px;\">\n                            <select onchange=\"saveCard('${deckName}' , '${cardTitle}');\" id=\"cost1_${i}\" style=\"height: 100%; width: 100%; font-size: 24px;\">\n                                <option value=\"none\">None</option>\n                                <option value=\"Slow\">Slow</option>\n                                <option value=\"Tap\">Tap</option>\n                                <option value=\"Power\">Power</option>\n                                <option value=\"Agility\">Agility</option>\n                                <option value=\"Wisdom\">Wisdom</option>\n                            </select>\n                            <select onchange=\"saveCard('${deckName}' , '${cardTitle}');\" id=\"cost2_${i}\" style=\"height: 100%; width: 100%; font-size: 24px;\">\n                                <option value=\"none\">None</option>\n                                <option value=\"Slow\">Slow</option>\n                                <option value=\"Tap\">Tap</option>\n                                <option value=\"Power\">Power</option>\n                                <option value=\"Agility\">Agility</option>\n                                <option value=\"Wisdom\">Wisdom</option>\n                            </select>\n                            <select onchange=\"saveCard('${deckName}' , '${cardTitle}');\" id=\"cost3_${i}\" style=\"height: 100%; width: 100%; font-size: 24px;\">\n                                <option value=\"none\">None</option>\n                                <option value=\"Slow\">Slow</option>\n                                <option value=\"Tap\">Tap</option>\n                                <option value=\"Power\">Power</option>\n                                <option value=\"Agility\">Agility</option>\n                                <option value=\"Wisdom\">Wisdom</option>\n                            </select>\n                            <select onchange=\"saveCard('${deckName}' , '${cardTitle}');\" id=\"cost4_${i}\" style=\"height: 100%; width: 100%; font-size: 24px;\">\n                                <option value=\"none\">None</option>\n                                <option value=\"Slow\">Slow</option>\n                                <option value=\"Tap\">Tap</option>\n                                <option value=\"Power\">Power</option>\n                                <option value=\"Agility\">Agility</option>\n                                <option value=\"Wisdom\">Wisdom</option>\n                            </select>\n                        </div>\n                        <select id=\"textType_${i}\" onchange=\"\" id=\"textType\" style=\"height: 100%; width: 100%; font-size: 24px;\">\n                            <option value=\"normal\">Normal Text</option>\n                            <option value=\"italic\">Italic Text</option>\n                            <option value=\"whole\">Whole Card</option>\n                        </select>\n                        <input id=\"text_${i}\" type=\"text\" placeholder=\"Ability Text\" value=\"${persistent.decks[deckName][cardTitle].abilities[i].text}\">\n                    </div>\n                `;\n            }\n            cardArea.innerHTML = `\n                <div style=\"display: flex; width: 100%; height: 60px; gap: 10px;\">\n                    <input id=\"cardTitle\" type=\"text\" placeholder=\"Title\" value=\"${persistent.decks[deckName][cardTitle].title}\" style=\"height: 100%; width: 100%; font-size: 24px; border: solid black 2px; border-radius: 6px; padding-left: 10px;\">\n                    <input id=\"durabilityInput\" type=\"number\" value=\"${persistent.decks[deckName][cardTitle].durability}\"  onchange=\"if (parseInt(durabilityInput.value) < 0) durabilityInput.value = '0'\" style=\"height: 100%; width: 80px; font-size: 24px; border: solid black 2px; border-radius: 6px; text-align: center;\">\n                    <div style=\"height: 100%; min-width: 80px; font-size: 24px; background-colour: white; border: solid black 2px; border-radius: 6px; display: flex; justify-content: center; align-items: center;\">${persistent.decks[deckName][cardTitle].suitValue}</div>\n                </div>\n                <div style=\"height: 100%; width: 100%; border: solid black 2px; border-radius: 6px; display: flex; padding: 5px; flex-direction: column; overflow-y: auto; scrollbar-width: none; gap: 10px;\">\n                    ${abilityText}\n                    <button onclick=\"saveCard('${deckName}' , '${cardTitle}'); persistent.decks['${deckName}']['${cardTitle}'].abilities.push({'title':'' , 'textType':'normal' , 'text':'' , 'cost':[]}); editCard('${deckName}' , '${cardTitle}');\" style=\"width: 100%; min-height: 40px; font-size: 24px;\">New Ability</button>\n                </div>\n                <div style=\"display: flex; width: 100%; height: 60px; gap: 10px;\">\n                    <button onclick=\"saveCard('${deckName}' , '${cardTitle}'); showDeck('${deckName}');\" style=\"height: 100%; min-width: 80px; font-size: 24px; background-colour: white; border: solid black 2px; border-radius: 6px; display: flex; justify-content: center; align-items: center;\">Save</button>\n                    <input id=\"cardFooter\" type=\"text\" placeholder=\"Footer\" value=\"${persistent.decks[deckName][cardTitle].footer}\" style=\"height: 100%; width: 100%; font-size: 24px; border: solid black 2px; border-radius: 6px; padding-left: 10px;\">\n                </div>\n            `;\n            window.durabilityInput = document.getElementById(\"durabilityInput\");\n            for (let i=0; i<persistent.decks[deckName][cardTitle].abilities.length; i++) {\n                document.getElementById(`cost1_${i}`).value = (persistent.decks[deckName][cardTitle].abilities[i].cost.length > 0) ? persistent.decks[deckName][cardTitle].abilities[i].cost[0] : 'none';\n                document.getElementById(`cost2_${i}`).value = (persistent.decks[deckName][cardTitle].abilities[i].cost.length > 1) ? persistent.decks[deckName][cardTitle].abilities[i].cost[1] : 'none';\n                document.getElementById(`cost3_${i}`).value = (persistent.decks[deckName][cardTitle].abilities[i].cost.length > 2) ? persistent.decks[deckName][cardTitle].abilities[i].cost[2] : 'none';\n                document.getElementById(`cost4_${i}`).value = (persistent.decks[deckName][cardTitle].abilities[i].cost.length > 3) ? persistent.decks[deckName][cardTitle].abilities[i].cost[3] : 'none';\n                document.getElementById(`textType_${i}`).value = persistent.decks[deckName][cardTitle].abilities[i].textType\n            }\n\n            window.saveCard = function(deckName, cardTitle) {\n                persistent.decks[deckName][cardTitle].title = document.getElementById(\"cardTitle\").value;\n                persistent.decks[deckName][cardTitle].durability = document.getElementById(\"durabilityInput\").value;\n                persistent.decks[deckName][cardTitle].footer = document.getElementById(\"cardFooter\").value;\n                for (let i=0; i<persistent.decks[deckName][cardTitle].abilities.length; i++) {\n                    persistent.decks[deckName][cardTitle].abilities[i].title = document.getElementById(`title_${i}`).value;\n                    let newCost = [];\n                    if (document.getElementById(`cost1_${i}`).value != \"none\") newCost.push(document.getElementById(`cost1_${i}`).value);\n                    if (document.getElementById(`cost2_${i}`).value != \"none\") newCost.push(document.getElementById(`cost2_${i}`).value);\n                    if (document.getElementById(`cost3_${i}`).value != \"none\") newCost.push(document.getElementById(`cost3_${i}`).value);\n                    if (document.getElementById(`cost4_${i}`).value != \"none\") newCost.push(document.getElementById(`cost4_${i}`).value);\n                    persistent.decks[deckName][cardTitle].abilities[i].cost = newCost;\n                    persistent.decks[deckName][cardTitle].abilities[i].textType = document.getElementById(`textType_${i}`).value;\n                    persistent.decks[deckName][cardTitle].abilities[i].text = document.getElementById(`text_${i}`).value;\n                }\n                saveData();\n            }\n        }\n    }\n\n    window.showAllDecks = function() {\n\n        let deckText = \"\";\n        for (const deckName in persistent.decks) {\n            deckText += `<button onclick=\"showDeck('${deckName}');\" style=\"width: 100%; height: 200px; font-size: 24px; border-radius: 6px;\">${deckName}</button>`;\n        }\n\n        page.innerHTML = `\n            <div style=\"display: flex; position: absolute; top: 10px; left: 10px; width: calc(100% - 20px); height: 50px; gap: 10px;\">\n                <button onclick=\"const newName = prompt('Please enter the name of the Deck to remove.'); if (newName in persistent.decks) {delete persistent.decks[newName]; saveData();} showAllDecks();\" style=\"height: 100%; width: 140px; font-size: 24px; border: solid black 2px; border-radius: 6px;\">Remove</button>\n                <div style=\"height: 100%; width: 100%; font-size: 24px; display: flex; justify-content: center; align-items: center; border: solid black 2px; border-radius: 6px; background-color: rgba(255,255,255,0.8);\">Decks</div>\n                <button onclick=\"const newName = prompt('Please enter the name for the new Deck.'); persistent.decks[newName] = {}; saveData(); showAllDecks();\" style=\"height: 100%; width: 140px; font-size: 24px; border: solid black 2px; border-radius: 6px;\">New</button>\n            </div>\n            <div style=\"display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); position: absolute; top: 70px; left: 10px; width: calc(100% - 20px); max-height: calc(100% - 80px); gap: 10px; overflow-y: auto; scrollbar-width: none; border: solid black 2px; border-radius: 6px; padding: 5px; background-color: rgba(255,255,255,0.6);\">\n                ${deckText}\n            </div>\n\n        `;\n    };\n\n    showAllDecks();\n\n\n\n\n\n    window.downloadDeck = function(deckName) {\n\n        const cardCnv = document.createElement('canvas');\n        const cardCtx = cardCnv.getContext('2d');\n        let icons = {};\n        for (let i=0; i<cardIcons.length; i++) {\n            icons[cardIcons[i]] = \"\"\n        }\n\n        splitBase64Image(cardIconImage, cardIcons.length, deckName);\n\n\n        function drawCard(deckName, cardTitle, x=0, y=0) {\n\n            cardCtx.fillStyle = \"black\";\n            cardCtx.fillRect(x, y, 512, 768);\n            cardCtx.fillStyle = \"white\";\n            cardCtx.fillRect(x+8, y+8, 512-16, 768-16);\n            const cardData = persistent.decks[deckName][cardTitle];\n\n            if (cardData.durability == 0) {\n                drawShape([{x:x , y:y+16} , {x:x+436 , y:y+16} , {x:x+436-48 , y:y+16+48} , {x:x , y:y+16+48}], 4); // <---- T I T L E   A R E A   ---- T E X T   A R E A ----> X+0 -> X+388\n                drawCenteredAndWrappedText(cardCtx, cardData.title, x+4, y+40, 388-8, `bold 32px ${cardFont}`, \"black\", \"center\"); // <---- T I T L E   T E X T\n            } else {\n                drawShape([{x:x , y:y+16} , {x:x+342 , y:y+16} , {x:x+342-48 , y:y+16+48} , {x:x , y:y+16+48}], 4); // <---- T I T L E   A R E A   ---- T E X T   A R E A ----> X+0 -> X+294\n                drawShape([{x:x+436 , y:y+16} , {x:x+358 , y:y+16} , {x:x+358-48 , y:y+16+48} , {x:x+436-48 , y:y+16+48}], 4); // <---- D U R A B I L I T Y   A R E A   ---- T E X T   A R E A ----> X+358 -> X+388\n                drawCenteredAndWrappedText(cardCtx, cardData.title, x+4, y+40, 294-8, `bold 32px ${cardFont}`, \"black\", \"center\"); // <---- T I T L E   T E X T\n                drawCenteredAndWrappedText(cardCtx, `${cardData.durability}`, x+358, y+40, 30, `bold 32px ${cardFont}`, \"black\", \"center\"); // <---- D U R A B I L I T Y   T E X T\n            }\n\n\n            drawShape([{x:x+512 , y:y+16} , {x:x+452 , y:y+16} , {x:x+452-48 , y:y+16+48} , {x:x+512 , y:y+16+48}], 4); // <---- S U I T   V A L U E   A R E A   ---- T E X T   A R E A ----> X+452 -> X+512\n            drawCenteredAndWrappedText(cardCtx, `${cardData.suitValue}`, x+444, y+40, 60, `bold 32px ${cardFont}`, \"black\", \"left\"); // <---- S U I T   V A L U E   T E X T\n\n            for (let i=0; i<cardData.abilities.length; i++) {\n                const ability = cardData.abilities[cardData.abilities.length-1-i];\n                if (ability.textType == \"whole\") {\n                    drawCenteredAndWrappedText(cardCtx, ability.text.replace(/\\\\n/g, '\\n'), x+12, y+400, 512-24, `bold 16px ${cardFont}`, \"black\", \"left\"); // <---- W H O L E   T E X T\n                } else {\n                    cardCtx.fillStyle = \"black\";\n                    cardCtx.fillRect(x+24, y+768-24-96-(i*112)-24, 464, 96); // <---- A B I L I T Y   O U T E R   A R E A\n                    cardCtx.fillStyle = \"white\";\n                    cardCtx.fillRect(x+24+4, y+768-24-96-(i*112)+4-24, 464-8, 96-8); // <---- A B I L I T Y   I N N E R   A R E A\n\n                    for (let j=0; j<ability.cost.length; j++) {\n                        drawCircle(x+40+(56*j) , y+768-24-96-(i*112)+16-24 , 24 , \"black\"); // <---- A B I L I T Y   C O S T   O U T E R   A R E A\n                        drawCircle(x+40+(56*j) , y+768-24-96-(i*112)+16-24 , 20 , \"white\"); // <---- A B I L I T Y   C O S T   I N N E R   A R E A\n                        cardCtx.imageSmoothingEnabled = false;\n                        cardCtx.drawImage(icons[ability.cost[j]], x+40+(56*j)-16 , y+768-24-96-(i*112)+16-16-24, 32, 32); // <---- D R A W   A B I L I T Y   I C O N\n                    }\n                    drawCenteredAndWrappedText(cardCtx, ability.title, x+24+4+(ability.cost.length*56), y+768-24-96-(i*112)+4+16-24, 512-56-(ability.cost.length*56), `bold 24px ${cardFont}`, \"black\", \"left\"); // <---- A B I L I T Y   T I T L E   T E X T\n\n                    if (ability.textType == \"normal\") drawCenteredAndWrappedText(cardCtx, ability.text.replace(/\\\\n/g, '\\n'), x+24+4+4, y+768-24-96-(i*112)+66-24, 512-64, `bold 14px ${cardFont}`, \"black\", \"left\"); // <---- A B I L I T Y   T E X T\n                    if (ability.textType == \"italic\") drawCenteredAndWrappedText(cardCtx, ability.text.replace(/\\\\n/g, '\\n'), x+24+4+4, y+768-24-96-(i*112)+44-24, 512-64, `italic bold 14px ${cardFont}`, \"black\", \"center\"); // <---- A B I L I T Y   F L A V O U R   T E X T\n                }\n\n            }\n            drawShape([{x:x , y:y+768} , {x:x+32 , y:y+768-32} , {x:x+512-32 , y:y+768-32} , {x:x+512 , y:y+768}], 4); // <---- D R A W   F O O T E R   A R E A\n            drawCenteredAndWrappedText(cardCtx, cardData.footer, x+32, y+768-20, 512-64, `16px ${cardFont}`, \"black\", \"center\"); // <---- F O O T E R   T E X T\n        }\n\n\n\n\n\n\n\n\n\n        function splitBase64Image(base64String, numOfImages, deckName) {\n            var img = new Image();\n            img.onload = function() {\n                var tempCnv = document.createElement('canvas');\n                var tempCtx = tempCnv.getContext('2d');\n                tempCnv.width = img.width;\n                tempCnv.height = img.height;\n                tempCtx.drawImage(img, 0, 0);\n\n                var subWidth = Math.floor(img.width / numOfImages);\n                var loadedCount = 0;\n\n                for (let i = 0; i < numOfImages; i++) {\n                    var subCnv = document.createElement('canvas');\n                    var subCtx = subCnv.getContext('2d');\n                    subCnv.width = subWidth;\n                    subCnv.height = img.height;\n\n                    subCtx.drawImage(tempCnv, \n                             i * subWidth, 0, \n                             subWidth, img.height, \n                             0, 0, \n                             subWidth, img.height);\n\n                    var subImage = new Image();\n                    subImage.onload = function() {\n                        loadedCount++;\n                        if (loadedCount === numOfImages) {\n                            downloadCardsFromDeck(deckName, parseInt(document.getElementById('acrossInput').value) , parseInt(document.getElementById('downInput').value));\n                        }\n                    };\n                    subImage.src = subCnv.toDataURL('image/png');\n                    icons[Object.keys(icons)[i]] = subImage;\n                }\n            };\n            img.src = base64String;\n        }\n\n\n\n        function downloadCardsFromDeck(deckToDownload, xCoord , yCoord) {\n            cardCtx.clearRect(0, 0, cardCnv.width, cardCnv.height);\n            let snapTrack = 0;\n            let yTrack = 0;\n            let xTrack = 0;\n            cardCnv.width = xCoord*512;\n            cardCnv.height = yCoord*768;\n\n            for (const cardTitle in persistent.decks[deckToDownload]) {\n                drawCard(deckToDownload , cardTitle , xTrack*512 , yTrack*768);\n                if (xTrack < (xCoord-1)) {\n                    xTrack += 1;\n                } else {\n                    xTrack = 0;\n                    if (yTrack < (yCoord-1)) {\n                        yTrack += 1;\n                    } else {\n                        snapCanvas(`Cards_${snapTrack}`);\n                        snapTrack += 1;\n                        cardCtx.clearRect(0, 0, cardCnv.width, cardCnv.height);\n                        yTrack = 0;\n                    }\n                } \n            }\n            if (!(xTrack == 0 && yTrack == 0)) {\n                snapCanvas(`Cards_${snapTrack}`);\n                cardCtx.clearRect(0, 0, cardCnv.width, cardCnv.height);\n            }\n            showDeck(deckToDownload);\n        }\n\n\n\n\n        function snapCanvas(name) {\n            cardCtx.imageSmoothingEnabled = false;\n            let cardCnvImage = cardCnv.toDataURL(\"image/png\", 1.0);\n            let link = document.createElement('a');\n            link.download = `${name}.png`;\n            link.href = cardCnvImage;\n            document.body.appendChild(link);\n            link.click();\n            document.body.removeChild(link);\n        }\n\n\n\n        function drawCircle(centerX , centerY , radius , colour) {\n            cardCtx.beginPath();\n            cardCtx.arc(centerX, centerY, radius, 0, 2 * Math.PI);\n            cardCtx.fillStyle = colour;\n            cardCtx.fill();\n        }\n\n\n\n        function drawShape(locations, width) {\n            cardCtx.beginPath();\n            cardCtx.moveTo(locations[0].x, locations[0].y);\n            for (let i=1; i<locations.length; i++) {\n                cardCtx.lineTo(locations[i].x, locations[i].y);\n            }\n            cardCtx.closePath();\n            cardCtx.lineWidth = width;\n            cardCtx.strokeStyle = \"black\";\n            cardCtx.stroke();\n        }\n\n        function drawCenteredAndWrappedText(canvasCtx, text, x, y, maxWidth, font, textStyle, align) {\n            canvasCtx.fillStyle = textStyle;\n            let xCoord = (align == \"left\") ? x : x + (maxWidth / 2);\n            canvasCtx.font = font;\n            let fontSize = parseInt(font.match(/\\d+px/)[0]);\n            let lineHeight = fontSize * 1.2;\n            canvasCtx.textAlign = align;\n            canvasCtx.textBaseline = \"middle\";\n        \n            // Split the text by \\n and keep track of empty lines for multiple newlines\n            let parts = text.split('\\n');\n            let lines = [];\n            \n            for (let part of parts) {\n                let words = part.split(' ');\n                let currentLine = '';\n        \n                for (let word of words) {\n                    let testLine = currentLine + word + ' ';\n                    let metrics = canvasCtx.measureText(testLine);\n                    \n                    if (metrics.width > maxWidth) {\n                        if (currentLine) lines.push(currentLine.trim());\n                        currentLine = word + ' ';\n                    } else {\n                        currentLine = testLine;\n                    }\n                }\n                \n                if (currentLine.trim().length > 0) lines.push(currentLine.trim());\n                // If there's an empty part (i.e., \\n\\n), just push a blank line\n                if (part === '') lines.push('');\n            }\n\n            // Calculate total height including any extra space for blank lines (multiple \\n)\n            let totalHeight = lines.length * lineHeight;\n            let startY = y - totalHeight / 2 + lineHeight / 2;\n            \n            lines.forEach((line, index) => {\n                // If the line is empty (for consecutive \\n), add more vertical space\n                let yOffset = line === '' ? lineHeight * 1.5 : lineHeight; // Increase the gap for blank lines\n                canvasCtx.fillText(line, xCoord, startY + index * yOffset);\n            });\n        }\n    }\n\n}\n\n","//Tasks\n\nwindow.tasks = function() {\n    window.allDays = [\"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\", \"Sunday\", \"01\", \"02\", \"03\", \"04\", \"05\", \"06\", \"07\", \"08\", \"09\", \"10\", \"11\", \"12\", \"13\", \"14\", \"15\", \"16\", \"17\", \"18\", \"19\", \"20\", \"21\", \"22\", \"23\", \"24\", \"25\", \"26\", \"27\", \"28\", \"29\", \"30\", \"31\"]\n\n    if (!(\"tasks\" in persistent)) {\n        persistent[\"tasks\"] = {}\n        for (let i=0; i<allDays.length; i++) {\n            persistent.tasks[allDays[i]] = [];\n        }\n    }\n\n    const today = new Date();\n    const year = today.getFullYear();\n    const month = String(today.getMonth() + 1).padStart(2, '0'); \n    const day = String(today.getDate()).padStart(2, '0');\n    const weekDay = today.toLocaleDateString('en-US', { weekday: 'long' });\n    const longDate = `${year}-${month}-${day}`;\n    const colours = [\"white\" , \"#ff93f4\" , \"#5966ff\" , \"#ffca60\"];\n\n    if (!(\"calender\" in persistent)) {\n        persistent[\"calender\"] = {\"lastChecked\" : longDate};\n    }\n\n    if (!(longDate in persistent.calender)) persistent.calender[longDate] = {};\n    for (let i=0; i<persistent.tasks[weekDay].length; i++) {\n        if (!(persistent.tasks[weekDay][i] in persistent.calender[longDate])) persistent.calender[longDate][persistent.tasks[weekDay][i]] = 0;\n    }\n    for (let i=0; i<persistent.tasks[day].length; i++) {\n        if (!(persistent.tasks[day][i] in persistent.calender[longDate])) persistent.calender[longDate][persistent.tasks[day][i]] = 0;\n    }\n    if (persistent.calender.lastChecked != longDate) {\n        for (const taskName in persistent.calender[persistent.calender.lastChecked]) {\n            if (persistent.calender[persistent.calender.lastChecked][taskName] == 3) {\n                if (!(taskName in persistent.calender[longDate])) persistent.calender[longDate][taskName] = 0;\n            }\n        }\n        persistent.calender.lastChecked = longDate;\n    }\n\n    window.showTasks = function() {\n        saveData();\n        let taskText = \"\";\n        for (const taskName in persistent.calender[longDate]) {\n            taskText += `<button style=\"width:100%; height: 60px; background-color: ${colours[persistent.calender[longDate][taskName]]}; border-radius: 6px; font-size: 24px;\" onclick=\"toggleTask('${taskName}')\">${taskName}</button>`\n        }\n        page.innerHTML = `\n            <div style=\"position: absolute; top: 10px; left: 10px; width: calc(100% - 20px); height: 40px; gap: 10px; display: flex;\">\n                <button onclick=\"removeTask();\" style=\"width: 100%; height: 40px; border-radius: 6px; font-size: 24px;\">Remove Task</button>\n                <button onclick=\"showBreakdown();\" style=\"min-width: 40px; height: 40px; border-radius: 6px; font-size: 24px;\">!</button>\n                <button onclick=\"addTask();\" style=\"width: 100%; height: 40px; border-radius: 6px; font-size: 24px;\">New Task</button>\n            </div>\n            <div style=\"position: absolute; width: calc(100% - 20px); height: calc(100% - 70px); left: 10px; top: 60px; display: flex; flex-direction: column; gap: 10px; padding: 5px; border: solid black 2px; border-radius: 6px; overflow-y: auto; scrollbar-width: none; background-color: rgba(255,255,255,0.4);\">\n                ${taskText}\n            </div>\n        `;\n    }\n\n    window.removeTask = function() {\n        page.innerHTML += `\n            <div style=\"position: absolute; width: 300px; height: 460px; left: calc(50% - 150px); top: calc(50% - 230px); border: solid black 2px; border-radius: 6px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.7); background-color: white; display: flex; flex-direction: column; justify-content: space-around; padding: 10px;\">\n                <div style=\"height: 40px; font-size: 24px; display: flex; align-items: center; justify-content: center;padding-top: 20px;\"><u>Remove Task</u></div>\n                <div style=\"height: 40px; font-size: 24px; padding-top: 20px;\">Frequency</div>\n                <select onchange=\"if (freqInput.value == 'weekly') {weekInput.style.display = 'block'; dateInput.style.display = 'none'} else {weekInput.style.display = 'none'; dateInput.style.display = 'block'}\" id=\"freqInput\" style=\"height: 40px; font-size: 24px;\">\n                    <option value=\"once\">Once</option>\n                    <option value=\"weekly\">Weekly</option>\n                    <option value=\"monthly\">Monthly</option>\n                </select>\n                <div style=\"height: 40px; font-size: 24px; padding-top: 20px;\">Start Date</div>\n                <input id=\"dateInput\" type=\"date\" style=\"height: 40px; font-size: 24px; width: 100%;\">\n                <select id=\"weekInput\" style=\"height: 40px; font-size: 24px; display: none;\">\n                    <option value=\"Monday\">Monday</option>\n                    <option value=\"Tuesday\">Tuesday</option>\n                    <option value=\"Wednesday\">Wednesday</option>\n                    <option value=\"Thursday\">Thursday</option>\n                    <option value=\"Friday\">Friday</option>\n                    <option value=\"Saturday\">Saturday</option>\n                    <option value=\"Sunday\">Sunday</option>\n                </select>\n                <div style=\"height: 40px; font-size: 24px; padding-top: 20px;\">Name</div>\n                <input id=\"nameInput\" type=\"text\" style=\"height: 40px; font-size: 24px;\">\n                <button onclick=\"removeTaskFromPersistent(); tasks();\" style=\"height: 40px;\">Remove</button>\n            </div>\n        `;\n        window.freqInput = document.getElementById(\"freqInput\");\n        window.dateInput = document.getElementById(\"dateInput\");\n        window.weekInput = document.getElementById(\"weekInput\");\n        const nameInput = document.getElementById(\"nameInput\");\n\n        window.removeTaskFromPersistent = function() {\n            const freq = freqInput.value;\n            const date = dateInput.value;\n            const week = weekInput.value\n            const name = nameInput.value;\n            if (date in persistent.calender) {\n                if (name in persistent.calender[date]) delete persistent.calender[date][name]\n            }\n            if (freq == \"weekly\") {\n                persistent.tasks[week] = persistent.tasks[week].filter(item => item != name)\n            } else if (freq == \"monthly\") {\n                if (date.split(\"-\")[2] in persistent.tasks) {\n                    persistent.tasks[date.split(\"-\")[2]] = persistent.tasks[date.split(\"-\")[2]].filter(item => item != name)\n                }\n            }\n        }\n    };\n\n    window.showBreakdown = function() {\n        if (document.getElementById(\"breakdownArea\")) return;\n        let calenderText = \"\";\n        let reoccuringTaskText = \"\";\n        for (let i=1; i<Object.keys(persistent.calender).length; i++) {\n            const day = Object.keys(persistent.calender)[i]\n            let taskText = \"\";\n            const colourCode = [\"Not Done\", \"Pink\" , \"Blue\" , \"Will do Tomorrow\"]\n            for (const taskName in persistent.calender[day]) {\n                taskText += `<li>${taskName} : ${colourCode[persistent.calender[day][taskName]]}</li>`;\n            }\n            calenderText += `<li><u>${day}</u> : <ul>${taskText}</ul></li><hr>`\n        }\n        for (let i=0; i<allDays.length; i++) {\n            const day = allDays[i]\n            let taskText = \"\";\n            for (let j=0; j<persistent.tasks[day].length; j++) {\n                taskText += `<li>${persistent.tasks[day][j]}</li>`;\n            }\n            reoccuringTaskText += `<li><u>${day}</u> : <ul>${taskText}</ul></li><hr>`\n        }\n        page.innerHTML += `\n            <div id=\"breakdownArea\" style=\"background-color: #fff; padding: 10px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.7); border: solid black 2px; font-family: sans-serif; display: flex; justify-content: center; align-items: center; flex-direction: column; position: absolute; width: calc(100% - 80px); height: calc(100% - 80px); top: 40px; left: 40px;\">\n                <h1 style=\"text-align: center; width: 100%\">Calender</h1>\n                <ul style=\"width: 100%; height: 100%; border: solid black 1px; border-radius: 4px; overflow-y: auto; scrollbar-width: none;\">\n                    ${calenderText}\n                </ul>\n                <hr style=\"width: 100%; min-height: 2px;\">\n                <h1 style=\"text-align: center; width: 100%\">Reoccurring Tasks</h1>\n                <ul style=\"width: 100%; height: 100%; border: solid black 1px; border-radius: 4px; overflow-y: auto; scrollbar-width: none;\">\n                    ${reoccuringTaskText}\n                </ul>\n                <button onclick=\"breakdownArea.remove();\" style=\"font-size: 24px;\">Return</button>\n            </div>\n        `;\n        window.breakdownArea = document.getElementById(\"breakdownArea\");\n    };\n\n    window.addTask = function(weekly=false) {\n        page.innerHTML += `\n            <div style=\"position: absolute; width: 300px; height: 460px; left: calc(50% - 150px); top: calc(50% - 230px); border: solid black 2px; border-radius: 6px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.7); background-color: white; display: flex; flex-direction: column; justify-content: space-around; padding: 10px;\">\n                <div style=\"height: 40px; font-size: 24px; display: flex; align-items: center; justify-content: center;padding-top: 20px;\"><u>New Task</u></div>\n                <div style=\"height: 40px; font-size: 24px; padding-top: 20px;\">Frequency</div>\n                <select onchange=\"if (freqInput.value == 'weekly') {weekInput.style.display = 'block'; dateInput.style.display = 'none'} else {weekInput.style.display = 'none'; dateInput.style.display = 'block'}\" id=\"freqInput\" style=\"height: 40px; font-size: 24px;\">\n                    <option value=\"once\">Once</option>\n                    <option value=\"weekly\">Weekly</option>\n                    <option value=\"monthly\">Monthly</option>\n                </select>\n                <div style=\"height: 40px; font-size: 24px; padding-top: 20px;\">Start Date</div>\n                <input id=\"dateInput\" type=\"date\" style=\"height: 40px; font-size: 24px; width: 100%;\">\n                <select id=\"weekInput\" style=\"height: 40px; font-size: 24px; display: none;\">\n                    <option value=\"Monday\">Monday</option>\n                    <option value=\"Tuesday\">Tuesday</option>\n                    <option value=\"Wednesday\">Wednesday</option>\n                    <option value=\"Thursday\">Thursday</option>\n                    <option value=\"Friday\">Friday</option>\n                    <option value=\"Saturday\">Saturday</option>\n                    <option value=\"Sunday\">Sunday</option>\n                </select>\n                <div style=\"height: 40px; font-size: 24px; padding-top: 20px;\">Name</div>\n                <input id=\"nameInput\" type=\"text\" style=\"height: 40px; font-size: 24px;\">\n                <button onclick=\"addTaskToPersistent(); tasks();\" style=\"height: 40px;\">Add</button>\n            </div>\n        `;\n        window.freqInput = document.getElementById(\"freqInput\");\n        window.dateInput = document.getElementById(\"dateInput\");\n        window.weekInput = document.getElementById(\"weekInput\");\n        const nameInput = document.getElementById(\"nameInput\");\n\n        window.addTaskToPersistent = function() {\n            const freq = freqInput.value;\n            const date = dateInput.value;\n            const week = weekInput.value;\n            const name = nameInput.value;\n            if (freq == \"once\") {\n                if (!(date in persistent.calender)) persistent.calender[date] = {};\n                if (!(name in persistent.calender[date])) persistent.calender[date][name] = 0;\n            } else if (freq == \"weekly\") {\n                if (!(persistent.tasks[week].includes(name))) persistent.tasks[week].push(name);\n            } else if (freq == \"monthly\") {\n                if (!(persistent.tasks[date.split(\"-\")[2]].includes(name))) persistent.tasks[date.split(\"-\")[2]].push(name);\n            }\n        }\n    };\n\n    window.toggleTask = function(taskName) {\n        persistent.calender[longDate][taskName] = (persistent.calender[longDate][taskName] == 3) ? 0 : (persistent.calender[longDate][taskName] + 1);\n        showTasks();\n    }\n\n    showTasks();\n}\n\n\n\n\n\n","//Notes\n\nwindow.notes = function() {\n    if (!(\"notes\" in persistent)) persistent[\"notes\"] = {\"Initial Folder\" : [\"First Note\"]}\n\n    window.note = function(pageNumber=0, editMode=false) {\n        if ((pageNumber+1) == persistent.notes[collection].length) persistent.notes[collection].push(\"\");\n        let listButtons = \"\";\n        for (let i=0; i<persistent.notes[collection].length; i++) {\n            listButtons += `<button style=\"margin: 0 0 5px 5px; width: calc(100% - 12px); height: 40px; font-size: 24px;\" onclick=\"if (${editMode}) {persistent.notes['${collection}'][${pageNumber}] = editArea.value; saveData();} note(${i} , ${editMode});\">${i}</button>`;\n        }\n        page.innerHTML = `\n            <${editMode ? 'textarea' : 'div'} id=\"editArea\" style=\"position:absolute; border:solid black 2px; width:calc(100% - 20px); height:calc(100% - 70px); left:10px; top:60px; padding:5px; overflow-y:auto; background-color: white; border-radius: 6px;\" wrap=off></${editMode ? 'textarea' : 'div'}>\n            <button id=\"editButton\" onclick=\"if (${editMode}) {persistent.notes['${collection}'][${pageNumber}] = editArea.value; saveData();} note(${pageNumber} , ${!editMode});\" style=\"position:absolute; top:10px; left: 10px; height: 40px; width: 100px; font-size: 24px; border-radius: 6px;\">${editMode ? 'Save' : 'Edit'}</button>\n            <div style=\"position:absolute; top:10px; right: 10px; height: 40px; width: 140px; font-size: 24px; display: flex; align-items: center; background-color: white; border-radius: 6px; padding-left: 8px; white-space: pre;\" onclick=\"noteList.style.display = (noteList.style.display == 'none') ? 'flex' : 'none'\">Note:${pageNumber}</div>\n            <div id=\"noteList\" style=\"position: absolute; top: 55px; right: 10px; max-height: calc(100% - 115px); width: 140px; background-color: rgba(200,200,200, 1); padding-top: 5px; border: solid black 4px;  display: none; flex-direction: column; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.7); overflow-y: auto; scrollbar-width: none;\"> \n                ${listButtons}\n            </div>\n        `;\n        window.editArea = document.getElementById(\"editArea\");\n        editArea.addEventListener('keydown', function(event) {\n            if (event.key === 'Tab' && editMode) {\n                event.preventDefault();\n                const start = editArea.selectionStart;\n                const end = editArea.selectionEnd;\n                editArea.value = editArea.value.substring(0, start) + '    ' + editArea.value.substring(end);\n                editArea.selectionStart = editArea.selectionEnd = start + 4;\n            }\n        });\n        if (editMode) {\n            editArea.value =  persistent.notes[collection][pageNumber];\n        } else {\n            editArea.innerHTML =  persistent.notes[collection][pageNumber];\n        }\n    };\n\n    window.showCollections = function() {\n\n        let collectionText = \"\";\n        for (const collectionName in persistent.notes) {\n            collectionText += `<button onclick=\"window.collection = '${collectionName}'; note();\" style=\"width: 100%; height: 200px; font-size: 24px; border-radius: 6px;\">${collectionName}</button>`;\n        }\n\n        page.innerHTML = `\n            <div style=\"display: flex; position: absolute; top: 10px; left: 10px; width: calc(100% - 20px); height: 50px; gap: 10px;\">\n                <button onclick=\"const newName = prompt('Please enter the name of the Folder to remove.'); if (newName in persistent.notes) {delete persistent.notes[newName]; saveData();} showCollections();\" style=\"height: 100%; width: 140px; font-size: 24px; border: solid black 2px; border-radius: 6px;\">Remove</button>\n                <div style=\"height: 100%; width: 100%; font-size: 24px; display: flex; justify-content: center; align-items: center; border: solid black 2px; border-radius: 6px; background-color: rgba(255,255,255,0.8);\">Folders</div>\n                <button onclick=\"const newName = prompt('Please enter the name for the new Folder.'); persistent.notes[newName] = ['First Note']; saveData(); showCollections();\" style=\"height: 100%; width: 140px; font-size: 24px; border: solid black 2px; border-radius: 6px;\">New</button>\n            </div>\n            <div style=\"display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); position: absolute; top: 70px; left: 10px; width: calc(100% - 20px); max-height: calc(100% - 80px); gap: 10px; overflow-y: auto; scrollbar-width: none; border: solid black 2px; border-radius: 6px; padding: 5px; background-color: rgba(255,255,255,0.6);\">\n                ${collectionText}\n            </div>\n\n        `;\n    };\n\n    showCollections();\n} ","//Import\n\nwindow.importToolKit = function() {\n\n    const input = document.createElement('input');\n    input.type = 'file';\n    input.accept = '.json';\n\n    input.onchange = function(event) {\n        const file = event.target.files[0];\n        const reader = new FileReader();\n\n        reader.onload = function(e) {\n            try {\n                const data = JSON.parse(e.target.result);\n                if (Array.isArray(data)) {\n                    toolKit = data[0];\n                    persistent = data[1];        \n                    saveData();\n                    createScript();\n                    home();\n                }\n            } catch (error) {\n                console.log(error);\n            }\n        };\n        reader.onerror = function(error) {\n            console.log(error);\n        };\n        reader.readAsText(file);\n    };\n    input.click();\n}","//Export\n\nwindow.exportToolKit = function() {\n\n\n    page.innerHTML += `\n\n        <div style=\"background-color: #fff; padding: 10px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.7); font-family: sans-serif; display: flex; justify-content: center; align-items: center; flex-direction: column; position: absolute; width: 300px; height: 300px; top: calc(50% - 150px); left: calc(50% - 150px);\">\n            <h2 style=\"text-align: center; margin-bottom: 20px; color: #333;\">How would you like to export this ToolKit?</h2>\n            <form onsubmit=\"event.preventDefault(); exportAsHTMLAndJSON();\">\n                <label for=\"jsonCheckbox\">\n                    <input type=\"checkbox\" id=\"jsonCheckbox\" name=\"jsonCheckbox\" checked=true>  <u>JSON</u> : Can be Imported\n                </label>\n                <label for=\"htmlCheckbox\">\n                    <input type=\"checkbox\" id=\"htmlCheckbox\" name=\"htmlCheckbox\">  <u>HTML</u> : Can be run\n                </label>\n                <hr style=\"width: 260px;\">\n                <button id=\"exportButton\" type=\"submit\" style=\"background-color: #007bff; color: #fff; padding: 10px 15px; border: none; border-radius: 4px; cursor: pointer; width: 100%;\">Export</button>\n            </form>\n        </div>\n    `\n    window.jsonCheckbox = document.getElementById(\"jsonCheckbox\");\n    window.htmlCheckbox = document.getElementById(\"htmlCheckbox\");\n\n    window.exportAsHTMLAndJSON = function() {\n\n        if (jsonCheckbox.checked) {\n            const data = [toolKit, persistent];\n            const jsonStr = JSON.stringify(data, null, 2);\n            const blob = new Blob([jsonStr], {type: \"application/json\"});\n            const link = document.createElement('a');\n            link.href = URL.createObjectURL(blob);\n            link.download = \"SaveFile.json\";\n            link.click();\n            URL.revokeObjectURL(link.href);\n        }\n\n        if (htmlCheckbox.checked) {\n            persistent = {};\n            document.getElementById(`ToolKitScript`).remove();\n            customHTML.innerHTML = \"\";\n            customStyle.innerHTML = \"\";\n            let htmlContent = document.documentElement.outerHTML;\n\n            const htmlStart = htmlContent.split(\"//MARK1\").shift();\n            const htmlFinish =  htmlContent.split(\"//MARK2\").pop();\n            const newHTML = htmlStart + `//MARK1\\n            let toolKit = ` + JSON.stringify(toolKit) + \";\\n            let persistent = \" +  JSON.stringify(persistent) + \";\\n            //MARK2\" + htmlFinish;\n\n            const blob = new Blob([newHTML], {type: 'text/html'});\n            const a = document.createElement('a');\n            a.href = URL.createObjectURL(blob);\n            a.download = 'index.html';\n            a.click();\n            URL.revokeObjectURL(a.href);\n        }\n\n        home();\n    }\n}\n\n\n","//Edit\n\nwindow.editToolKit = function(editingPage=0) {\n    window.page.innerHTML = '';\n    if (editingPage == toolKit.length-1) toolKit.push(`//Page ${editingPage+1}\\n`)\n    if (editingPage > 0) page.innerHTML += `<button onclick=\"toolKit[${editingPage}] = editArea.value; saveData(); editToolKit(${editingPage-1});\" style=\"position:absolute; top:10px; left:10px; height:40px; width:calc(50% - 60px); font-size: 24px; border-radius: 6px;\">${toolKit[editingPage-1].split(\"\\n\")[0].substring(2)}</button>`;\n    page.innerHTML += `\n            <textarea id=\"editArea\" style=\"position:absolute; border:solid black 2px; width:calc(100% - 20px); height:calc(100% - 70px); left:10px; top:60px; padding:5px; overflow-y:auto;\" wrap=off></textarea>\n            <button onclick=\"toolKit[${editingPage}] = editArea.value; saveData(); createScript(); home();\" style=\"position:absolute; top:10px; left:calc(50% - 40px); height:40px; width: 80px; font-size: 24px; border-radius: 6px;\">Save</button>\n            <button onclick=\"toolKit[${editingPage}] = editArea.value; saveData(); editToolKit(${editingPage+1});\" style=\"position:absolute; top:10px; right:10px; height:40px; width:calc(50% - 60px); font-size: 24px; border-radius: 6px;\">${toolKit[editingPage+1].split(\"\\n\")[0].substring(2)}</button>\n        `;\n    window.editArea = document.getElementById(\"editArea\");\n    editArea.value = toolKit[editingPage];\n    editArea.addEventListener('keydown', function(event) {\n        if (event.key === 'Tab') {\n            event.preventDefault();\n            const start = editArea.selectionStart;\n            const end = editArea.selectionEnd;\n            editArea.value = editArea.value.substring(0, start) + '    ' + editArea.value.substring(end);\n            editArea.selectionStart = editArea.selectionEnd = start + 4;\n        }\n    });\n}\n\n\n","//Page 10","//Page 11\n","//Page 12\n","//Page 13\n"];
            let persistent = {};
            //MARK2
            customHTML.innerHTML = `<button onclick="const broken=JSON.parse(JSON.stringify(toolKit)); toolKit = defaultToolKit; createScript(); toolKit = broken;" style="position: absolute; left: calc(50% - 80px); top: calc(50% - 80px); width: 160px; height: 160px;">Fatal Error<br>Click to Run Default</button>`
            window.defaultToolKit = JSON.parse(JSON.stringify(toolKit));
            window.db;
            window.openDB = function() {
                return new Promise((resolve, reject) => {
                    const request = indexedDB.open("myDataDB", 1);
                    request.onerror = () => reject(request.error);
                    request.onsuccess = () => {
                        window.db = request.result;
                        resolve();
                    };
                    request.onupgradeneeded = (event) => {
                        window.db = event.target.result;
                        window.db.createObjectStore("data", { keyPath: "id" });
                    };
                });
            }
            window.saveData = function() {
                return window.openDB().then(() => {
                    const transaction = window.db.transaction(["data"], "readwrite");
                    const objectStore = transaction.objectStore("data");
                    const request = objectStore.put({
                        id: "allData",
                        toolKit: JSON.stringify(toolKit),
                        persistent: JSON.stringify(persistent)
                    });
                    return new Promise((resolve, reject) => {
                        request.onsuccess = () => resolve();
                        request.onerror = () => reject(request.error);
                    });
                });
            }
            window.loadData = function() {
                return window.openDB().then(() => {
                    const transaction = window.db.transaction(["data"], "readonly");
                    const objectStore = transaction.objectStore("data");
                    const request = objectStore.get("allData");
                    return new Promise((resolve, reject) => {
                        request.onsuccess = () => {
                            if (request.result) {
                                toolKit = JSON.parse(request.result.toolKit);
                                persistent = JSON.parse(request.result.persistent);
                                resolve({
                                    toolKit: true,
                                    persistent: true
                                });
                            } else {
                                resolve({ toolKit: null, persistent: null });
                            }
                        };
                        request.onerror = () => reject(request.error);
                    });
                });
            }
            window.reset = function() {
                return new Promise((resolve, reject) => {
                    const request = indexedDB.deleteDatabase("myDataDB");
                    request.onerror = () => reject(request.error);
                    request.onsuccess = () => resolve();
                });
            }
            class PRNG {
                constructor(seed) {
                    this.seed = seed || Math.floor(Math.random() * 2**32);
                    this.a = 1664525;
                    this.c = 1013904223;
                    this.m = 2**32;
                    this.z = this.seed;
                }
                random() {
                    this.z = (this.a * this.z + this.c) % this.m;
                    return this.z / this.m;
                }
                range(min, max) {
                    return min + (max - min) * this.random();
                }
                intRange(min, max) {
                    return Math.floor(this.range(min, max));
                }
                reset() {
                    this.z = this.seed;
                }
                newSeed(newSeed) {
                    this.seed = newSeed;
                    this.z = newSeed;
                }
            }     
            window.loadData().then(data => {
                if (data.toolKit === null || data.persistent === null) {
                    console.log("No data found or data not yet saved so using default.");
                    window.saveData();
                }
                createScript();
            });
            function createScript() {
                if (document.getElementById(`ToolKitScript`)) {
                    document.getElementById(`ToolKitScript`).remove();
                }
                let funcText = "";
                for (let i = 0; i < toolKit.length; i++) {
                    funcText += toolKit[i] + "\n";
                }
                let scriptTag = document.createElement('script');
                scriptTag.innerHTML = funcText;
                scriptTag.id = `ToolKitScript`;
                scriptTag.onerror = function(event) {
                    alert("An error occurred in the ToolKit script.");
                };
                document.body.appendChild(scriptTag);
            }



        </script>



<style>input[data-keeper-lock-id="k-jdgqdqae5g"]:hover ~ keeper-lock#k-jdgqdqae5g {opacity: 1;}
input[data-keeper-lock-id="k-yxy2opnlbvg"]:hover ~ keeper-lock#k-yxy2opnlbvg {opacity: 1;}
input[data-keeper-lock-id="k-jdgqdqae5g"]:not(:hover) ~ keeper-lock#k-jdgqdqae5g {animation-name: hide-lock; animation-duration: .5s;}
input[data-keeper-lock-id="k-yxy2opnlbvg"]:not(:hover) ~ keeper-lock#k-yxy2opnlbvg {animation-name: hide-lock; animation-duration: .5s;}
input[data-keeper-lock-id="k-msqlv2evd3f"]:hover ~ keeper-lock#k-msqlv2evd3f {opacity: 1;}
input[data-keeper-lock-id="k-bcicje3kky8"]:hover ~ keeper-lock#k-bcicje3kky8 {opacity: 1;}
input[data-keeper-lock-id="k-bcicje3kky8"]:not(:hover) ~ keeper-lock#k-bcicje3kky8 {animation-name: hide-lock; animation-duration: .5s;}
input[data-keeper-lock-id="k-msqlv2evd3f"]:not(:hover) ~ keeper-lock#k-msqlv2evd3f {animation-name: hide-lock; animation-duration: .5s;}
input[data-keeper-lock-id="k-ixff5jjhwf"]:hover ~ keeper-lock#k-ixff5jjhwf {opacity: 1;}
input[data-keeper-lock-id="k-p3mrqrtxw9"]:hover ~ keeper-lock#k-p3mrqrtxw9 {opacity: 1;}
input[data-keeper-lock-id="k-ixff5jjhwf"]:not(:hover) ~ keeper-lock#k-ixff5jjhwf {animation-name: hide-lock; animation-duration: .5s;}
input[data-keeper-lock-id="k-p3mrqrtxw9"]:not(:hover) ~ keeper-lock#k-p3mrqrtxw9 {animation-name: hide-lock; animation-duration: .5s;}
</style>

</body></html>