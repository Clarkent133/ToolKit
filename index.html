<html><head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="manifest" href="manifest.json">
        <title>ToolKit</title>
        <link rel="icon" type="image/png" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMAAAADACAMAAABlApw1AAAAAXNSR0IArs4c6QAAABtQTFRFAAAAAH8AAH8AAH8AAIAAAIAAAIAAAIAAAH8AS4/2/wAAAAl0Uk5TACBggJ+/3/9Aan6BKAAAAwVJREFUeJztnO16gyAMhVe/6P1f8VY3LWhCAjYEn533XxXCOZAWFerXFwAAAAAAAAAAAAAAAAAAAABgZZhCP8xjqfzRW/KJqUT+w1stid7C7C2V43Fz/SGo9D+9VebQGPDWmGWQ9Q/eGvPcfAAUBjofANlAT/Mvxd0zCAbcgQFvYMAbGPAGBryBAW9gwBsY8AYGvPk/BsSCzZlgwBkY8AYGvIEBb2DAGxjwBga8gYFqgmp9WsTNwBpuuR7Hy8BfvOtj4GzgekAnAwEGNloYeFUcz4figEQRJQ0M/NZM9oXtu6eGJHxNdHMDM1V1SQ8u9eHNDbx3qlHhwuFjhQNjA4HWxhoon9psDUTKlAaKu8jUQOCUbcf+Nq0+uXIKDA2kGzXPjUYHl7hkWRYZGmD1E9NYsim7aEIwM5ButKajjUzxkjGwMpDIP+7Pzg9LWUcZGZhzcgb6eJ0DGwN5LdyZpJb2i2BhQMpn1lrNF8HCgJQL26nzXxeSzNONwecNZNP/3SR9bpAqM9HEYgUhYwVztoBYXZNFHzcQ77LOx5JO6/rr4wbkDhTkxd9kubnPG5il9vchIvPLfwREAftJ+s9HQap/wNYAJTKvLvkNU7RmMQ8IV5bbGfIPbKX97zETZ0L1MhOn/XgQwlzJnevpmrK6GuWl8AKT9H9qW2pyPzBSJ7I11O3Y3ZExeiZOI+tYwO6eOLlR3zNCpb+glWY39eF4MFO2pBHT50LJr+J4UEqGf1H4bM70wVYypR2kUtErmmj9bJS+manvf/un0wcDUgYVx7dfHygyoJ6+3tiv0ExxbtAGHvXRWywxrfLmqDUiTlX6RyHFYlcM/FzAbTMrn+vPqSJ9XrRdZr3wZeXwMVD0QpE8bQ1MHx+A1iv1y90NrHctdUvyDNix5Q0MeAMD3sCANzDgDQx4ozQw393A2K2BWafrynMDW7S6Os0hfcf2+abLHYXXjt8VqcwLb5EZmDX/Ax2/7lKlv98x0PX/Sn+v3A3d/S4CAAAAAAAAAAAAAAAAAAAAAP4p3zdg4GWrLZCeAAAAAElFTkSuQmCC">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
        <style>
            body {
                margin: 0px;
                padding: 0px;
            }
        </style>
        <style id="customStyle"></style>
        <script src="https://cdn.jsdelivr.net/npm/phaser@3.60.0/dist/phaser.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/three@0.154.0/build/three.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    </head>
    <body>
        <div id="customHTML"></div>
        <script>
            const customHTML = document.getElementById("customHTML");
            const customStyle = document.getElementById("customStyle");
            //MARK1
            let toolKit = ["//Home\n\nwindow.home = function() {\n\n    customStyle.innerHTML = `\n        body {\n            font-family: 'Courier New', monospace;\n            font-weight: bold;\n        }\n    `\n\n    const templateIcon = \"https://drive.google.com/thumbnail?id=1A1FGKgktqL5aCCfQn9bYPXAxrEZRg4Dl\"\n    const panelWidth = ((innerWidth - 60) < 500) ? 'calc(100% - 60px)' : '500px'\n    const loginButton = ('username' in window && 'password' in window) ? `<button onclick=\"\" style=\"width: 300px; height: 80px;\">Logged in as ${window.username.split('@')[0]}</button>` : `<button onclick=\"loginPage(); toggleMenu();\" style=\"width: 200px; height: 60px;\">Login</button>`\n    customHTML.innerHTML = `\n        <img style=\"position: absolute; width: 100%; height: 100%; object-fit: cover;\" src=\"https://lh3.googleusercontent.com/d/1LTVdiaax08-DvdQLlKg_ticEoKHgzyuQ\">\n        <div id=\"page\" style=\"position: absolute; width: 100%; height: 100%; z-index: 1; overflow-y: auto; scrollbar-width: none;\">\n            <div style=\"position: absolute; width: 100%; min-height: 100%; display: flex; flex-direction: ${(innerWidth > innerHeight) ? \"row\" : \"column\"}; justify-content: space-around; align-items: center;\">\n                <div style=\"width: calc(100% - 40px); height: 400px; font-size: 82px; margin: 20px; display: flex; justify-content: center; align-items: center; font-weight: bolder; color: rgba(255,255,255,0.9); text-decoration: underline; text-decoration-color: rgba(255,255,255,0.9);\">Welcome</div>\n                <div style=\"background-color: rgba(255,255,255,0.9); width: calc(100% - 40px); height: 200px; font-size: 32px; margin: 20px; align-items: center; display: flex; justify-content: center; border-radius: 8px;\">Area for something</div>\n            </div>\n        </div>\n        <div id=\"toggleMenuButton\" style=\"position: absolute; bottom: 5px; right: 5px; width: 50px; height: 50px; background-color: rgba(255, 255, 255, 0.9); border: solid black 2px; border-radius: 6px; z-index: 2;\" onclick=\"toggleMenu();\">\n            <div style=\"height: 6px; margin: 10px 0 0 6px; width: 34px; background-color: black; border-radius: 4px;\"></div>\n            <div style=\"height: 6px; margin: 4px 0 0 6px; width: 34px; background-color: black; border-radius: 4px;\"></div>\n            <div style=\"height: 6px; margin: 4px 0 0 6px; width: 34px; background-color: black; border-radius: 4px;\"></div>\n        </div>\n        <div id=\"menuPanel\" style=\"position: absolute; left: -100%; top: 0px; width: ${panelWidth}; height: 100%; background-color: rgba(0, 0, 0, 0.9); transition: left 0.5s ease; z-index: 2; display: flex; flex-direction: column; gap: 20px; padding-top: 40px; overflow-y: auto; scrollbar-width: none;\">\n            <div style = \"display: flex; align-items: center; justify-content: center; height: 80px; font-size: 24px;\">\n                ${loginButton}\n            </div>\n            <hr style=\"background-color: white; height: 1px; width: calc(100% - 80px);\">\n            <div onclick=\"home();\" style = \"display: flex; align-items: center; text-align: left; height: 60px; font-size: 24px; color: white; padding-left: 40px;\"><img style=\"height: 50px; width: 50px; border: solid white 1px; border-radius: 4px; margin-right: 10px;\" src=\"${templateIcon}\"></img>Home</div>\n            <div onclick=\"passwordManager(''); toggleMenu();\" style = \"display: flex; align-items: center; text-align: left; height: 60px; font-size: 24px; color: white; padding-left: 40px;\"><img style=\"height: 50px; width: 50px; border: solid white 1px; border-radius: 4px; margin-right: 10px;\" src=\"${templateIcon}\"></img>Password Manager</div>\n            <div onclick=\"upload({'sent 1' : 'sent value 1' , 'sent 2' : 'sent value 2' , 'sent 3' : 'sent value 3'}, toggleMenu);\" style = \"display: flex; align-items: center; text-align: left; height: 60px; font-size: 24px; color: white; padding-left: 40px;\"><img style=\"height: 50px; width: 50px; border: solid white 1px; border-radius: 4px; margin-right: 10px;\" src=\"${templateIcon}\"></img>Game Engine</div>\n            <div onclick=\"cardCreator();\" style = \"display: flex; align-items: center; text-align: left; height: 60px; font-size: 24px; color: white; padding-left: 40px;\"><img style=\"height: 50px; width: 50px; border: solid white 1px; border-radius: 4px; margin-right: 10px;\" src=\"${templateIcon}\"></img>Card Creator</div>\n            <div onclick=\"tasks(); toggleMenu();\" style = \"display: flex; align-items: center; text-align: left; height: 60px; font-size: 24px; color: white; padding-left: 40px;\"><img style=\"height: 50px; width: 50px; border: solid white 1px; border-radius: 4px; margin-right: 10px;\" src=\"${templateIcon}\"></img>Tasks</div>\n            <div onclick=\"notes(); toggleMenu();\" style = \"display: flex; align-items: center; text-align: left; height: 60px; font-size: 24px; color: white; padding-left: 40px;\"><img style=\"height: 50px; width: 50px; border: solid white 1px; border-radius: 4px; margin-right: 10px;\" src=\"${templateIcon}\"></img>Notes</div>\n            <div onclick=\"toggleMenu();\" style = \"display: flex; align-items: center; text-align: left; height: 60px; font-size: 24px; color: white; padding-left: 40px;\"><img style=\"height: 50px; width: 50px; border: solid white 1px; border-radius: 4px; margin-right: 10px;\" src=\"${templateIcon}\"></img>Import</div>\n            <div onclick=\"exportToolKit(); toggleMenu();\" style = \"display: flex; align-items: center; text-align: left; height: 60px; font-size: 24px; color: white; padding-left: 40px;\"><img style=\"height: 50px; width: 50px; border: solid white 1px; border-radius: 4px; margin-right: 10px;\" src=\"${templateIcon}\"></img>Export</div>\n            <div onclick=\"const check = prompt('If you are sure that you want to reset all custom data, enter : yes'); if (check == 'yes') {reset()}; toggleMenu();\" style = \"display: flex; align-items: center; text-align: left; height: 60px; font-size: 24px; color: white; padding-left: 40px;\"><img style=\"height: 50px; width: 50px; border: solid white 1px; border-radius: 4px; margin-right: 10px;\" src=\"${templateIcon}\"></img>Reset</div>\n            <div onclick=\"editToolKit(); toggleMenu();\" style = \"display: flex; align-items: center; text-align: left; height: 60px; font-size: 24px; color: white; padding-left: 40px;\"><img style=\"height: 50px; width: 50px; border: solid white 1px; border-radius: 4px; margin-right: 10px;\" src=\"${templateIcon}\"></img>Edit</div>\n            <div style = \"height: 60px;\"></div>\n        </div>\n    `;\n\n    window.page = document.getElementById(\"page\");\n    window.menuPanel = document.getElementById(\"menuPanel\");\n    window.toggleMenuButton = document.getElementById(\"toggleMenuButton\");\n\n    window.toggleMenu = function() {\n        menuPanel.style.left = (menuPanel.style.left == '-100%') ? '0px' : '-100%';\n    }\n}\n\n\nhome();\n\n\n\n\n\n","//Login\n\nwindow.loginPage = function() {\n    page.innerHTML += `\n\n    <div style=\"background-color: #fff; padding: 10px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.7); font-family: sans-serif; display: flex; justify-content: center; align-items: center; flex-direction: column; position: absolute; width: 300px; height: 400px; top: calc(50% - 200px); left: calc(50% - 150px);\">\n        <h2 style=\"text-align: center; margin-bottom: 20px; color: #333;\">Login</h2>\n        <form onsubmit=\"event.preventDefault(); login();\"> \n            <div style=\"margin-bottom: 15px;\">\n                <label for=\"username\" style=\"display: block; margin-bottom: 5px; color: #555;\">Username:</label>\n                <input type=\"text\" id=\"usrArea\" name=\"username\" required style=\"width: calc(100% - 12px); padding: 8px; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box;\">\n            </div>\n            <div style=\"margin-bottom: 15px;\">\n                <label for=\"password\" style=\"display: block; margin-bottom: 5px; color: #555;\">Password:</label>\n                <input type=\"password\" id=\"pswArea\" name=\"password\" required style=\"width: calc(100% - 12px); padding: 8px; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box;\">\n            </div>\n            <label for=\"uploadCheckbox\">\n                <input type=\"checkbox\" id=\"uploadCheckbox\" name=\"uploadCheckbox\" style=\"margin-left: 10px;\"> Upload Persistent\n            </label>\n            <label for=\"downloadCheckbox\">\n                <input type=\"checkbox\" id=\"downloadCheckbox\" name=\"downloadCheckbox\" style=\"margin-left: 10px;\"> Download Persistent\n            </label>\n            <label for=\"overwriteCheckbox\">\n                <input type=\"checkbox\" id=\"overwriteCheckbox\" name=\"overwriteCheckbox\" style=\"margin-left: 10px;\"> Overwrite Persistent\n            </label>\n            <hr style=\"width: 260px;\">\n            <button id=\"submitButton\" type=\"submit\" style=\"background-color: #007bff; color: #fff; padding: 10px 15px; border: none; border-radius: 4px; cursor: pointer; width: 100%;\">Login</button>\n        </form>\n    </div>\n    `\n}\n\n\n\n\nwindow.login = function() {\n    if (!document.getElementById(\"usrArea\")) return;\n    window.username = document.getElementById(\"usrArea\").value;\n    window.password = document.getElementById(\"pswArea\").value;\n    document.getElementById(\"submitButton\").innerHTML = \"Connecting ...\";\n    document.getElementById(\"submitButton\").style.backgroundColor = \"#ffa81c\";\n\n    if (document.getElementById(\"uploadCheckbox\").checked){\n        upload(Object.keys(persistent), () => {\n            if (document.getElementById(\"downloadCheckbox\").checked) {\n                download(document.getElementById(\"overwriteCheckbox\").checked, () => {saveData(); home();});\n            } else {home();}\n        })\n    } else if (document.getElementById(\"downloadCheckbox\").checked) {\n        download(document.getElementById(\"overwriteCheckbox\").checked, () => {saveData(); home();});\n    } else {\n        home();\n    }\n}\n\nwindow.upload = function(ary, callback = function() {}) {\n    if (!(\"username\" in window)) {\n        alert(\"You are not logged in\");\n        return;\n    } \n    let obj = {};\n    for (let i=0; i<ary.length; i++) {\n        if (ary[i] in persistent) obj[ary[i]] = JSON.stringify(persistent[ary[i]])\n    }\n    fetch(`https://script.google.com/macros/s/AKfycbzIbsWBCRZ14jYrDarQGBBNxBV5TQz2kuNzBIFI1H9XkaScOa0ku9QAgNSds7YAv2777g/exec`, {\n        redirect: \"follow\",\n        method: 'POST',\n        body: JSON.stringify({ username : username , password : password, type : \"set\", keys : obj }),\n        headers: {\n            'Content-Type': \"text/plain;charset=utf-8\"\n        }\n    })\n    .then(response => response.text())\n    .then(result => {\n        const data = JSON.parse(result);\n        alert(data.reply);\n        callback();\n    });\n}\n\nwindow.download = function(overwrite=false, callback = function() {}) {\n    if (!(\"username\" in window)) {\n        alert(\"You are not logged in\");\n        return;\n    } \n    fetch(`https://script.google.com/macros/s/AKfycbzIbsWBCRZ14jYrDarQGBBNxBV5TQz2kuNzBIFI1H9XkaScOa0ku9QAgNSds7YAv2777g/exec`, {\n        redirect: \"follow\",\n        method: 'POST',\n        body: JSON.stringify({ username : username , password : password, type : \"get\" }),\n        headers: {\n            'Content-Type': \"text/plain;charset=utf-8\"\n        }\n    })\n    .then(response => response.text())\n    .then(result => {\n        const data = JSON.parse(result);\n        if (\"result\" in data) {\n            for (const key in data.result) {\n                if (!(key in persistent) || (key in persistent && overwrite)) persistent[key] = JSON.parse(data.result[key]);\n            }\n        } else {\n            alert(data.reply);\n        }\n        callback();\n    });\n}\n\n\n\n","//PW Manager\n\nwindow.passwordManager = function(code=\"\") {\n\n    window.returnCypheredText = function(text) {\n        let charAry = [\"a\", \"b\", \"c\", \"d\", \"e\", \"f\", \"g\", \"h\", \"i\", \"j\", \"k\", \"l\", \"m\", \"n\", \"o\", \"p\", \"q\", \"r\", \"s\", \"t\", \"u\", \"v\", \"w\", \"x\", \"y\", \"z\", \"A\", \"B\", \"C\", \"D\", \"E\", \"F\", \"G\", \"H\", \"I\", \"J\", \"K\", \"L\", \"M\", \"N\", \"O\", \"P\", \"Q\", \"R\", \"S\", \"T\", \"U\", \"V\", \"W\", \"X\", \"Y\", \"Z\", \"0\", \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \" \", \"!\", \"£\", \"%\", \"&\", \"^\", \"*\", \"(\", \")\", \"{\", \"}\", \"[\", \"]\", \":\", \";\", \"#\", \"@\", \"?\", \"<\", \">\", \",\", \".\", \"/\", \"_\", \"-\", \"+\", \"=\", \"¬\" , \"\\\\\" , \"|\" ]\n        let cypher = {};\n        myPRNG.newSeed(code);\n        if (code != 0) {\n            const aryLength = charAry.length;\n            for (let i=0; i<(aryLength/2); i++) {\n                let firstChr = charAry.splice(myPRNG.intRange(0, charAry.length), 1)[0];\n                let secondChr = charAry.splice(myPRNG.intRange(0, charAry.length), 1)[0];\n                cypher[firstChr] = secondChr;\n                cypher[secondChr] = firstChr;\n            }\n        } else {\n            for (let i=0; i<charAry.length; i++) {\n                cypher[charAry[i]] = charAry[i];\n            }\n        }\n        let outputText = \"\"\n        for (let i=0; i<text.length; i++) {\n            if (text[i].replace(\"\\n\", \"¬\") in cypher) {\n                outputText += cypher[text[i].replace(\"\\n\", \"¬\")].replace(\"¬\", \"\\n\");\n            } else {\n                console.log(`Unsupported Character : ${inputText[i]}`);\n            }\n        }\n        return outputText;\n    }\n\n    const codeAreaStyle = (innerWidth > innerHeight) ? `width: 284px; height: calc(100% - 20px);` : `width: calc(100% - 20px); height: 284px;`;\n    let entryText = \"\";\n    if (!(\"passwordManager\" in persistent)) persistent[\"passwordManager\"] = {};\n    for (const title in persistent.passwordManager) {\n        entryText += addForm(title);\n    }\n    function addForm(title) {\n        return `\n            <div id=\"entry_${title}\" style=\"width: 100%; height: 140px; padding: 10px; margin-bottom: 10px; border: solid black 2px; border-radius: 8px; display: flex; flex-direction: column; gap: 10px; background-color: white\">  <!-- ENTRY -->\n                <div style=\"width: 100%; height: 100%; display: flex; gap: 10px;\">\n                    <p id=\"entryTitle_${title}\" style=\"width: 100%; height: 100%; display: flex; align-items: center; font-size: 24px;\"></p>\n                    <button style=\"width: 80px; height: 100%;\" onclick=\"editEntry('${title}');\">Edit</button>\n                </div>\n                <div style=\"width: 100%; height: 100%; display: flex; gap: 10px;\">\n                    <button style=\"width: 100%; height: 100%;\" onclick=\"navigator.clipboard.writeText(returnCypheredText(persistent.passwordManager['${title}'].username)); alert('Copied Username');\">Copy Username</button>\n                    <button style=\"width: 100%; height: 100%;\" onclick=\"navigator.clipboard.writeText(returnCypheredText(persistent.passwordManager['${title}'].password)); alert('Copied Password');\">Copy Password</button>\n                </div>\n            </div>\n        `;\n    }\n\n    window.editEntry = function(title) {\n        const entryDiv = document.getElementById(`entry_${title}`);\n        const entry = persistent.passwordManager[title];\n        entryDiv.style.height = \"400px\";\n        entryDiv.innerHTML = `\n            <input id=\"newTitle_${title}\" type=\"text\" style=\"width: 100%; height: 60px;\" placeholder=\"Title\" value=\"${returnCypheredText(title)}\">\n            <input id=\"newUsername_${title}\" type=\"text\" style=\"width: 100%; height: 60px;\" placeholder=\"Username\" value=\"${returnCypheredText(entry.username)}\">\n            <input id=\"newPassword_${title}\" type=\"text\" style=\"width: 100%; height: 60px;\" placeholder=\"Password\" value=\"${returnCypheredText(entry.password)}\">\n            <textarea id=\"newNotes_${title}\" type=\"text\" style=\"width: 100%; height: 100%; padding: 5px;\" placeholder=\"Notes\">${returnCypheredText(entry.notes)}</textarea>\n            <button style=\"width: 100%; height: 60px;\" onclick=\"updateEntry('${title}')\">Save</button>\n            <button style=\"width: 100%; height: 60px;\" onclick=\"let answer = prompt('Are you sure you want to delete this entry? To confirm enter : ${returnCypheredText(title)}'); if (answer == '${returnCypheredText(title)}') {delete persistent.passwordManager['${title}']; saveData();} passwordManager(${(code == 0) ? '' : code});\">Delete</button>\n        `;\n        window.updateEntry = function(title) {\n            window.newTitle = document.getElementById(`newTitle_${title}`);\n            window.newUsername = document.getElementById(`newUsername_${title}`);\n            window.newPassword = document.getElementById(`newPassword_${title}`);\n            window.newNotes = document.getElementById(`newNotes_${title}`);\n            delete persistent.passwordManager[title];\n            persistent.passwordManager[returnCypheredText(newTitle.value)] = {username : returnCypheredText(newUsername.value) , password : returnCypheredText(newPassword.value) , notes : returnCypheredText(newNotes.value)};\n            saveData();\n            passwordManager((code == 0) ? '' : code);\n        }\n    }\n\n    page.innerHTML = `\n        <div style=\"display: flex; position: absolute; width: 100%; height: 100%; flex-direction: ${(innerWidth > innerHeight) ? \"row\" : \"column\"};\">\n            <div id=\"codeArea\" style=\"display: flex; flex-direction: column; padding: 10px; margin: 10px; background-color: white; gap: 10px; border: solid black 2px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.7); ${codeAreaStyle}\">\n                <div style=\"width: 100%; height: 40px; display: flex; gap: 10px;\">\n                    <input id=\"codeInputArea\" type=\"text\" style=\"width: 100%; height: 40px; font-size: 24px;\" readonly value=\"${code}\">\n                    <button style=\"width: 60px; height: 40px; font-size: 24px;\" onclick=\"updateCypher('-');\">&lt;</button>\n                </div>\n                <div style=\"display: grid; grid-template-columns: repeat(auto-fit, minmax(80px, 1fr)); gap: 10px; height: 100%; width: 100%\">\n                    <button onclick=\"updateCypher('1');\" style=\"font-size: 24px;\">1</button>\n                    <button onclick=\"updateCypher('2');\" style=\"font-size: 24px;\">2</button>\n                    <button onclick=\"updateCypher('3');\" style=\"font-size: 24px;\">3</button>\n                    <button onclick=\"updateCypher('4');\" style=\"font-size: 24px;\">4</button>\n                    <button onclick=\"updateCypher('5');\" style=\"font-size: 24px;\">5</button>\n                    <button onclick=\"updateCypher('6');\" style=\"font-size: 24px;\">6</button>\n                    <button onclick=\"updateCypher('7');\" style=\"font-size: 24px;\">7</button>\n                    <button onclick=\"updateCypher('8');\" style=\"font-size: 24px;\">8</button>\n                    <button onclick=\"updateCypher('9');\" style=\"font-size: 24px;\">9</button>\n                    <button onclick=\"updateCypher('0'); updateCypher()\" style=\"font-size: 24px;\">0</button>\n                </div>\n            </div>\n            <div style=\"width: ${(innerWidth > innerHeight) ? '100%' : 'calc(100% - 20px)'}; height: calc(100% - 20px); margin: 10px; overflow-y: auto; scrollbar-width: none;\">\n                ${entryText}\n                <button style=\"width: 100%; height: 60px; border-radius: 6px; font-size: 24px;\" onclick=\"persistent.passwordManager['New Entry'] = {username:'' , password:'' , notes:''}; saveData(); passwordManager(${(code == 0) ? '' : code});\">New Entry</button>\n            </div>\n        </div>\n    `;\n\n    window.codeInputArea = document.getElementById(\"codeInputArea\");\n    \n    window.updateCypher = function(char=\"\") {\n        if (char == \"-\" && codeInputArea.value != ' ') {\n            codeInputArea.value = codeInputArea.value.slice(0, -1);\n        } else {\n            codeInputArea.value += char;\n        }\n        code = (codeInputArea.value == \"\") ? 0 : parseInt(codeInputArea.value);\n        for (const title in persistent.passwordManager) {\n            const entry = persistent.passwordManager[title];\n            if (document.getElementById(`entryTitle_${title}`)) document.getElementById(`entryTitle_${title}`).innerHTML = returnCypheredText(title);\n            if (document.getElementById(`newTitle_${title}`)) document.getElementById(`newTitle_${title}`).value = returnCypheredText(title);\n            if (document.getElementById(`newUsername_${title}`)) document.getElementById(`newUsername_${title}`).value = returnCypheredText(entry.username);\n            if (document.getElementById(`newPassword_${title}`)) document.getElementById(`newPassword_${title}`).value = returnCypheredText(entry.password);\n            if (document.getElementById(`newNotes_${title}`)) document.getElementById(`newNotes_${title}`).value = returnCypheredText(entry.notes);\n        }\n    }\n\n    updateCypher();\n\n\n}\n\n\n\nwindow.myPRNG = new PRNG(0);\n","//Game Engine\n\n\n\n\n\n// OLD GAME ENGINE\n\n/*\n\ncustomStyle.innerHTML = \"body {background-color: white;}\";\ncustomHTML.innerHTML = \"\";\n\nconst game = {\n\n    config : {\n        mapSize : 16,\n        levelSize : 16\n    },\n\n    spriteSheetString : \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAAAgCAYAAADaInAlAAAAAXNSR0IArs4c6QAAAItJREFUeJzt18ENgCAMBVA1ruEEjuOcjOMEDqInE2NEvNq+dyP0VviFrgPy6msb07zs1/W2lmotwdybf18Tx9Aq0PzYmgdA9Cd13nwJENvj7fYATG6al/16CKRAXK9vAI2Pb6xtiP0cmr8AYqsmgPjP4TUBtrX0RkFsRkByn38BRgIAAAAAAAAAwD8cQ6Uk6ZS0IU8AAAAASUVORK5CYII=\",\n\n    sprites : [], // <---- To be populated with new Images of the broken sprite sheet.\n\n    startingLevel : \"LevelEditor\",\n\n    currentLevel : \"\",\n\n    keys : {mouse:{x:0 , y:0 , isDown:false , clickUsed:false}},\n\n    init: (levelName) => {\n        //Prepare for FPS\n        window.lastFrameTime = performance.now();\n        window.frameCount = 0;\n        window.lastFpsUpdate = performance.now();\n\n        //Canvas Setup\n        let canvasStyle = (innerHeight > innerWidth) ? ` margin-top:;` : `margin-left`;\n        document.body.innerHTML = `<canvas id=\"canvas\" width=\"${(game.config.mapSize + 2)*game.config.mapSize}px\" height=\"${(game.config.mapSize + 2)*game.config.mapSize}px\"></canvas>`;\n        window.canvas = document.getElementById(\"canvas\");\n        window.ctx = canvas.getContext(\"2d\");\n\n        function scaleCanvas() {\n            canvas.style.width = (innerHeight > innerWidth) ? `${innerWidth}px` : `${innerHeight}px`;\n            canvas.style.height= (innerHeight > innerWidth) ? `${innerWidth}px` : `${innerHeight}px`;\n            canvas.style.marginLeft = (innerHeight > innerWidth) ? `0px` : `${(innerWidth-innerHeight)/2}px`;\n            canvas.style.marginTop = (innerHeight > innerWidth) ? `${(innerHeight-innerWidth)/2}px` : `0px`;\n            canvas.style.imageRendering = \"pixelated\";\n        }\n        scaleCanvas();\n        window.addEventListener('resize', scaleCanvas);\n\n\n\n\n\n\n\n        //Engine\n        window.create = function(obj) {\n            game.levels[game.currentLevel].objectTracker += 1;\n            const objID = `object_${game.levels[game.currentLevel].objectTracker}`;\n            game.levels[game.currentLevel].objects[objID] = obj;\n            return objID;\n        };\n\n        window.destroy = function(objID) {\n            if (objID in game.levels[game.currentLevel].objects) delete game.levels[game.currentLevel].objects[objID];\n        };\n\n        window.clicked = function(obj) {\n            if (typeof obj === \"string\") {\n                if (!(obj in game.keys)) return;\n                if (game.keys[obj].isDown && !game.keys[obj].clickUsed) {\n                    game.keys[obj].clickUsed = true;\n                    return true;\n                }\n            } else if (game.keys.mouse.x >= obj.x && game.keys.mouse.y >= obj.y && game.keys.mouse.x < obj.x+game.config.mapSize && game.keys.mouse.y < obj.y+game.config.mapSize) {\n                if (!game.keys.mouse.clickUsed && game.keys.mouse.isDown) {\n                    game.keys.mouse.clickUsed = true;\n                    return true;\n                }\n            }\n            return false;\n        };\n\n        window.held= function(obj) {\n            if (typeof obj === \"string\") {\n                if (!(obj in game.keys)) return;\n                return game.keys[obj].isDown;\n            } else if (game.keys.mouse.x >= obj.x && game.keys.mouse.y >= obj.y && game.keys.mouse.x < obj.x+game.config.mapSize && game.keys.mouse.y < obj.y+game.config.mapSize) {\n                return game.keys.mouse.isDown;\n            }\n            return false;\n        };\n\n        function mouseTrigger(e) {\n            const leftOffset = (innerHeight > innerWidth) ? 0 : (innerWidth-innerHeight)/2;\n            const topOffset = (innerHeight > innerWidth) ? (innerHeight-innerWidth)/2 : 0;\n            const canvasStyleSize = (innerHeight > innerWidth) ? innerWidth : innerHeight;\n            const scale = ((game.config.mapSize + 2)*game.config.mapSize) / canvasStyleSize;\n            game.keys.mouse.x = Math.floor((e.clientX-leftOffset)*scale);\n            game.keys.mouse.y = Math.floor((e.clientY-topOffset)*scale);\n        }\n        window.addEventListener('keydown', function(e) {game.keys[e.key.toLowerCase()] = {isDown:true , clickUsed:false}});\n        window.addEventListener('keyup', function(e) {game.keys[e.key.toLowerCase()] = {isDown:false , clickUsed:false}});\n        canvas.addEventListener('mousedown', (e) => {game.keys.mouse.isDown = true; mouseTrigger(e);});\n        canvas.addEventListener('mousemove', mouseTrigger);\n        canvas.addEventListener('mouseup', (e) => {\n            game.keys.mouse.isDown = false;\n            game.keys.mouse.clickUsed = false;\n        });\n\n\n        //Create Images from SpriteSheet\n        let ss = new Image();\n        ss.src = game.spriteSheetString;\n        ss.onload = () => {\n            const cols = ss.width / game.config.mapSize;\n            const rows = ss.height / game.config.mapSize;\n            const tempCanvas = document.createElement(\"canvas\");\n            const tempCtx = tempCanvas.getContext(\"2d\");\n            tempCanvas.width = game.config.mapSize;\n            tempCanvas.height = game.config.mapSize;\n            let imagesLoaded = 0\n            for (let y = 0; y < rows; y++) {\n                for (let x = 0; x < cols; x++) {\n                    tempCtx.clearRect(0, 0, tempCanvas.width, tempCanvas.height);\n                    tempCtx.drawImage(ss, x * game.config.mapSize, y * game.config.mapSize, game.config.mapSize, game.config.mapSize, 0, 0, game.config.mapSize, game.config.mapSize);\n                    let sprite = new Image();\n                    sprite.src = tempCanvas.toDataURL();\n                    sprite.onload = () => {\n                        game.sprites.push(sprite);\n                        imagesLoaded++;\n                        if (imagesLoaded == (cols*rows)) {\n                            console.log(\"Sprites loaded:\", game.sprites.length);\n                            console.log(game.sprites)\n                            game.update(); // <---- Begins Updating each frame\n                            game.runLevel(game.startingLevel);\n                        }\n                    }\n                }\n            }\n            \n        };\n\n    },\n\n\n    update: (timestamp) => {\n        requestAnimationFrame(game.update);\n        const now = performance.now();\n        window.delta = (now - lastFrameTime) / 1000; // Convert to seconds\n        lastFrameTime = now;\n        frameCount++;\n        if (now - lastFpsUpdate >= 5000) { // Every 5 seconds, update FPS\n            window.fps = frameCount / 5;\n            frameCount = 0;\n            lastFpsUpdate = now;\n            console.log(`FPS: ${fps}`);\n        }\n        \n    },\n\n\n\n    runLevel : (levelName) => {\n        game.currentLevel = levelName;\n\n        if (Object.keys(game.levels[levelName].maps).length == 0) { // <---- L E V E L   C R E A T I O N\n\n            game.levels[levelName].maps['0x0'] = game.levels[levelName].startingMap\n\n            // <---- C O D E   F O R   S P A W N I N G   S I D E   M A P S   H E R E\n\n            for (const mapPos in game.levels[levelName].maps) {\n                const mapName = game.levels[levelName].maps[mapPos];\n                for (const objPos in game.maps[mapName].foreground) {\n                    const xPos = parseInt(objPos.split(\"x\")[0]) * game.config.mapSize;\n                    const yPos = parseInt(objPos.split(\"x\")[1]) * game.config.mapSize;\n                    create(Object.assign({x:xPos , y:yPos}, game.maps[mapName].foreground[objPos]));\n                }\n            }\n\n            // <---- G E N E R A T E   L E V E L   B A C K G R O U N D   I M A G E   H E R E\n        }\n\n        game.levels[levelName].init();\n        for (const objName in game.levels[levelName].objects) {\n            game.levels[levelName].objects[objName].init(game.levels[levelName].objects[objName]);\n        }\n        // Draw level Background here !\n        function updateLevel() {\n            requestAnimationFrame(updateLevel);\n            if (game.currentLevel != levelName) return;\n            ctx.clearRect(0, 0, canvas.width, canvas.height);\n            game.levels[levelName].update();\n            for (const objName in game.levels[levelName].objects) {\n                const obj = game.levels[levelName].objects[objName];\n                obj.update(obj);\n                ctx.imageSmoothingEnabled = false;\n                ctx.drawImage(game.sprites[obj.spr], Math.floor(obj.x), Math.floor(obj.y), game.config.mapSize, game.config.mapSize);\n            }\n        }\n        updateLevel()\n    },\n\n\n\n    maps : {\n        LevelEditor : {\n            background : [], // <---- List of Sprite ID's\n            foreground : {\n                \"3x2\" : {spr:1 , anim:[1] , speed:1 , init:(obj) => {} , update:(obj) => {\n                    if (held(\"w\")) obj.y -= 50*delta; \n                    if (held(\"a\")) obj.x -= 50*delta; \n                    if (held(\"s\")) obj.y += 50*delta; \n                    if (held(\"d\")) obj.x += 50*delta;\n                }}\n            },\n            top : [],\n            left : [],\n            right : [],\n            bottom : []\n        }\n    },\n\n\n    levels : {\n        LevelEditor : {\n            startingMap : \"LevelEditor\",\n            backgroundImage : \"\",\n            init : () => {},\n            update : () => {\n                ctx.fillStyle = \"black\";\n                ctx.fillRect(0, 0, canvas.width, canvas.height);\n            },\n            objectTracker : 0,\n            maps : {},\n            objects : {}\n        }\n    }\n\n}\n\ngame.init();\n\n*/","//Card Creator\n\nwindow.cardCreator = function() {\n\n//---------- F O R   E D I T I N G   E X P O R T   G R I D ----------\n\n\nconst xCoord = 4;\nconst yCoord = 15;\nconst deckToDownload = \"Deck 1\";\n\n\n//---------- C A R D S ----------\n\n\nconst decks = {\n\n    \"Deck 1\" : {\n        \"Garran Stonefist\" : {\n            Durability:18,\n            SuitValue:\"AC\",\n            Footer:\"Character\",\n            Abilities:[\n                {Title:\"Play\" , Text:\"Play 1 Card from your Hand into your Field.\" , Flavour:\"\" , Cost:[\"Slow\"]},\n                {Title:\"Draw\" , Text:\"Draw the top Card from your Deck into your Hand.\" , Flavour:\"\" , Cost:[\"Slow\"]},\n                {Title:\"Untap\" , Text:\"Untap all cards in your field.\" , Flavour:\"\" , Cost:[\"Slow\"]},\n                {Title:\"Attribute\" , Text:\"Generate 2 Power Points and 1 Agility Point.\" , Flavour:\"\" , Cost:[\"Tap\"]},\n                {Title:\"\" , Text:\"\" , Flavour:\"Half-Orc Barbarian\" , Cost:[]}\n            ]\n        },\n        \"Tessa Vale\" : {\n            Durability:14,\n            SuitValue:\"AH\",\n            Footer:\"Character\",\n            Abilities:[\n                {Title:\"Play\" , Text:\"Play 1 Card from your Hand into your Field.\" , Flavour:\"\" , Cost:[\"Tap\"]},\n                {Title:\"Draw\" , Text:\"Draw the top Card from your Deck into your Hand.\" , Flavour:\"\" , Cost:[\"Slow\"]},\n                {Title:\"Untap\" , Text:\"Untap all cards in your field.\" , Flavour:\"\" , Cost:[\"Slow\"]},\n                {Title:\"Attribute\" , Text:\"Generate 2 Agility Points and 1 Wisdom Point.\" , Flavour:\"\" , Cost:[\"Tap\"]},\n                {Title:\"\" , Text:\"\" , Flavour:\"Tiefling Rogue\" , Cost:[]}\n            ]\n        },\n        \"Victor Wren\" : {\n            Durability:14,\n            SuitValue:\"AS\",\n            Footer:\"Character\",\n            Abilities:[\n                {Title:\"Play\" , Text:\"Play 1 Card from your Hand into your Field.\" , Flavour:\"\" , Cost:[\"Slow\"]},\n                {Title:\"Draw\" , Text:\"Draw the top 2 Cards from your Deck into your Hand.\" , Flavour:\"\" , Cost:[\"Slow\", \"Tap\"]},\n                {Title:\"Untap\" , Text:\"Untap all cards in your field.\" , Flavour:\"\" , Cost:[\"Slow\"]},\n                {Title:\"Attribute\" , Text:\"Generate 2 Wisdom Points and 1 Power Point.\" , Flavour:\"\" , Cost:[\"Tap\"]},\n                {Title:\"\" , Text:\"\" , Flavour:\"Human Wizard\" , Cost:[]}\n            ]\n        },\n        \"Rosie Goodwin\" : {\n            Durability:16,\n            SuitValue:\"AD\",\n            Footer:\"Character\",\n            Abilities:[\n                {Title:\"Play\" , Text:\"Play 1 Card from your Hand into your Field.\" , Flavour:\"\" , Cost:[\"Slow\"]},\n                {Title:\"Draw\" , Text:\"Draw the top Card from your Deck into your Hand.\" , Flavour:\"\" , Cost:[\"Slow\"]},\n                {Title:\"Untap\" , Text:\"Untap all cards in your field.\" , Flavour:\"\" , Cost:[\"Slow\"]},\n                {Title:\"Attribute\" , Text:\"Generate 1 Power Point, 1 Agility Point and 1 Wisdom Point.\" , Flavour:\"\" , Cost:[\"Tap\"]},\n                {Title:\"\" , Text:\"\" , Flavour:\"Gnome Bard\" , Cost:[]}\n            ]\n        },\n        \"Warhammer\" : {\n            Durability:4,\n            SuitValue:\"2C\",\n            Footer:\"Item\",\n            Abilities:[\n                {Title:\"Damage 2\" , Text:\"Target player assigns 2 DC to a card in their field.\" , Flavour:\"\" , Cost:[\"Tap\"]}\n            ]\n        },\n        \"Twin Daggers\" : {\n            Durability:3,\n            SuitValue:\"2H\",\n            Footer:\"Item\",\n            Abilities:[\n                {Title:\"Damage 2\" , Text:\"Target player assigns 2 DC to a card in their field.\" , Flavour:\"\" , Cost:[\"Tap\"]}\n            ]\n        },\n        \"Simple Wand\" : {\n            Durability:4,\n            SuitValue:\"2S\",\n            Footer:\"Item\",\n            Abilities:[\n                {Title:\"Damage 2\" , Text:\"Target player assigns 2 DC to a card in their field.\" , Flavour:\"\" , Cost:[\"Tap\"]}\n            ]\n        },\n        \"Lucky Coin\" : {\n            Durability:4,\n            SuitValue:\"2D\",\n            Footer:\"Item\",\n            Abilities:[\n                {Title:\"Damage 2\" , Text:\"Target player assigns 2 DC to a card in their field.\" , Flavour:\"\" , Cost:[\"Tap\"]}\n            ]\n        },\n        \"Battle Axe\" : {\n            Durability:4,\n            SuitValue:\"3C\",\n            Footer:\"Item\",\n            Abilities:[\n                {Title:\"Damage 2\" , Text:\"Target player assigns 2 DC to a card in their field.\" , Flavour:\"\" , Cost:[\"Tap\"]}\n            ]\n        },\n        \"Throwing Stars\" : {\n            Durability:4,\n            SuitValue:\"3H\",\n            Footer:\"Item\",\n            Abilities:[\n                {Title:\"Damage 2\" , Text:\"Target player assigns 2 DC to a card in their field.\" , Flavour:\"\" , Cost:[\"Tap\"]}\n            ]\n        },\n        \"Crystal Orb\" : {\n            Durability:4,\n            SuitValue:\"3S\",\n            Footer:\"Item\",\n            Abilities:[\n                {Title:\"Damage 2\" , Text:\"Target player assigns 2 DC to a card in their field.\" , Flavour:\"\" , Cost:[\"Tap\"]}\n            ]\n        },\n        \"Multi-Tool\" : {\n            Durability:4,\n            SuitValue:\"3D\",\n            Footer:\"Item\",\n            Abilities:[\n                {Title:\"Damage 2\" , Text:\"Target player assigns 2 DC to a card in their field.\" , Flavour:\"\" , Cost:[\"Tap\"]}\n            ]\n        },\n        \"Iron Shield\" : {\n            Durability:4,\n            SuitValue:\"4C\",\n            Footer:\"Item\",\n            Abilities:[\n                {Title:\"Damage 2\" , Text:\"Target player assigns 2 DC to a card in their field.\" , Flavour:\"\" , Cost:[\"Tap\"]}\n            ]\n        },\n        \"Leather Armour\" : {\n            Durability:4,\n            SuitValue:\"4H\",\n            Footer:\"Item\",\n            Abilities:[\n                {Title:\"Damage 2\" , Text:\"Target player assigns 2 DC to a card in their field.\" , Flavour:\"\" , Cost:[\"Tap\"]}\n            ]\n        },\n        \"Ancient Map\" : {\n            Durability:4,\n            SuitValue:\"4S\",\n            Footer:\"Item\",\n            Abilities:[\n                {Title:\"Damage 2\" , Text:\"Target player assigns 2 DC to a card in their field.\" , Flavour:\"\" , Cost:[\"Tap\"]}\n            ]\n        },\n        \"Traveler's Cloak\" : {\n            Durability:4,\n            SuitValue:\"4D\",\n            Footer:\"Item\",\n            Abilities:[\n                {Title:\"Damage 2\" , Text:\"Target player assigns 2 DC to a card in their field.\" , Flavour:\"\" , Cost:[\"Tap\"]}\n            ]\n        },\n        \"Chainmail Armour\" : {\n            Durability:4,\n            SuitValue:\"5C\",\n            Footer:\"Item\",\n            Abilities:[\n                {Title:\"Damage 2\" , Text:\"Target player assigns 2 DC to a card in their field.\" , Flavour:\"\" , Cost:[\"Tap\"]}\n            ]\n        },\n        \"Grappling Hook\" : {\n            Durability:4,\n            SuitValue:\"5H\",\n            Footer:\"Item\",\n            Abilities:[\n                {Title:\"Damage 2\" , Text:\"Target player assigns 2 DC to a card in their field.\" , Flavour:\"\" , Cost:[\"Tap\"]}\n            ]\n        },\n        \"Mystic Hourglass\" : {\n            Durability:4,\n            SuitValue:\"5S\",\n            Footer:\"Item\",\n            Abilities:[\n                {Title:\"Damage 2\" , Text:\"Target player assigns 2 DC to a card in their field.\" , Flavour:\"\" , Cost:[\"Tap\"]}\n            ]\n        },\n        \"Versatile Sword\" : {\n            Durability:4,\n            SuitValue:\"5D\",\n            Footer:\"Item\",\n            Abilities:[\n                {Title:\"Damage 2\" , Text:\"Target player assigns 2 DC to a card in their field.\" , Flavour:\"\" , Cost:[\"Tap\"]}\n            ]\n        },\n        \"Spiked Gauntlets\" : {\n            Durability:4,\n            SuitValue:\"6C\",\n            Footer:\"Item\",\n            Abilities:[\n                {Title:\"Damage 2\" , Text:\"Target player assigns 2 DC to a card in their field.\" , Flavour:\"\" , Cost:[\"Tap\"]}\n            ]\n        },\n        \"Climbing Rope\" : {\n            Durability:4,\n            SuitValue:\"6H\",\n            Footer:\"Item\",\n            Abilities:[\n                {Title:\"Damage 2\" , Text:\"Target player assigns 2 DC to a card in their field.\" , Flavour:\"\" , Cost:[\"Tap\"]}\n            ]\n        },\n        \"Grimoire of Spells\" : {\n            Durability:4,\n            SuitValue:\"6S\",\n            Footer:\"Item\",\n            Abilities:[\n                {Title:\"Damage 2\" , Text:\"Target player assigns 2 DC to a card in their field.\" , Flavour:\"\" , Cost:[\"Tap\"]}\n            ]\n        },\n        \"Healing Salve\" : {\n            Durability:4,\n            SuitValue:\"6D\",\n            Footer:\"Item\",\n            Abilities:[\n                {Title:\"Damage 2\" , Text:\"Target player assigns 2 DC to a card in their field.\" , Flavour:\"\" , Cost:[\"Tap\"]}\n            ]\n        },\n        \"Greatsword\" : {\n            Durability:4,\n            SuitValue:\"7C\",\n            Footer:\"Item\",\n            Abilities:[\n                {Title:\"Damage 2\" , Text:\"Target player assigns 2 DC to a card in their field.\" , Flavour:\"\" , Cost:[\"Tap\"]}\n            ]\n        },\n        \"Silent Boots\" : {\n            Durability:4,\n            SuitValue:\"7H\",\n            Footer:\"Item\",\n            Abilities:[\n                {Title:\"Damage 2\" , Text:\"Target player assigns 2 DC to a card in their field.\" , Flavour:\"\" , Cost:[\"Tap\"]}\n            ]\n        },\n        \"Potion of Clarity\" : {\n            Durability:4,\n            SuitValue:\"7S\",\n            Footer:\"Item\",\n            Abilities:[\n                {Title:\"Damage 2\" , Text:\"Target player assigns 2 DC to a card in their field.\" , Flavour:\"\" , Cost:[\"Tap\"]}\n            ]\n        },\n        \"Enchanted Lyre\" : {\n            Durability:4,\n            SuitValue:\"7D\",\n            Footer:\"Item\",\n            Abilities:[\n                {Title:\"Damage 2\" , Text:\"Target player assigns 2 DC to a card in their field.\" , Flavour:\"\" , Cost:[\"Tap\"]}\n            ]\n        },\n        \"Reinforced Boots\" : {\n            Durability:4,\n            SuitValue:\"8C\",\n            Footer:\"Item\",\n            Abilities:[\n                {Title:\"Damage 2\" , Text:\"Target player assigns 2 DC to a card in their field.\" , Flavour:\"\" , Cost:[\"Tap\"]}\n            ]\n        },\n        \"Lockpicks\" : {\n            Durability:4,\n            SuitValue:\"8H\",\n            Footer:\"Item\",\n            Abilities:[\n                {Title:\"Damage 2\" , Text:\"Target player assigns 2 DC to a card in their field.\" , Flavour:\"\" , Cost:[\"Tap\"]}\n            ]\n        },\n        \"Mystic Amulet\" : {\n            Durability:4,\n            SuitValue:\"8S\",\n            Footer:\"Item\",\n            Abilities:[\n                {Title:\"Damage 2\" , Text:\"Target player assigns 2 DC to a card in their field.\" , Flavour:\"\" , Cost:[\"Tap\"]}\n            ]\n        },\n        \"Rations\" : {\n            Durability:4,\n            SuitValue:\"8D\",\n            Footer:\"Item\",\n            Abilities:[\n                {Title:\"Damage 2\" , Text:\"Target player assigns 2 DC to a card in their field.\" , Flavour:\"\" , Cost:[\"Tap\"]}\n            ]\n        },\n        \"Mighty Gauntlets\" : {\n            Durability:4,\n            SuitValue:\"9C\",\n            Footer:\"Item\",\n            Abilities:[\n                {Title:\"Damage 2\" , Text:\"Target player assigns 2 DC to a card in their field.\" , Flavour:\"\" , Cost:[\"Tap\"]}\n            ]\n        },\n        \"Shortbow\" : {\n            Durability:4,\n            SuitValue:\"9H\",\n            Footer:\"Item\",\n            Abilities:[\n                {Title:\"Damage 2\" , Text:\"Target player assigns 2 DC to a card in their field.\" , Flavour:\"\" , Cost:[\"Tap\"]}\n            ]\n        },\n        \"Runestone\" : {\n            Durability:4,\n            SuitValue:\"9S\",\n            Footer:\"Item\",\n            Abilities:[\n                {Title:\"Damage 2\" , Text:\"Target player assigns 2 DC to a card in their field.\" , Flavour:\"\" , Cost:[\"Tap\"]}\n            ]\n        },\n        \"Bag of Tricks\" : {\n            Durability:4,\n            SuitValue:\"9D\",\n            Footer:\"Item\",\n            Abilities:[\n                {Title:\"Damage 2\" , Text:\"Target player assigns 2 DC to a card in their field.\" , Flavour:\"\" , Cost:[\"Tap\"]}\n            ]\n        },\n        \"Heavy Crossbow\" : {\n            Durability:4,\n            SuitValue:\"10C\",\n            Footer:\"Item\",\n            Abilities:[\n                {Title:\"Damage 2\" , Text:\"Target player assigns 2 DC to a card in their field.\" , Flavour:\"\" , Cost:[\"Tap\"]}\n            ]\n        },\n        \"Smoke Bombs\" : {\n            Durability:4,\n            SuitValue:\"10H\",\n            Footer:\"Item\",\n            Abilities:[\n                {Title:\"Damage 2\" , Text:\"Target player assigns 2 DC to a card in their field.\" , Flavour:\"\" , Cost:[\"Tap\"]}\n            ]\n        },\n        \"Sage's Robes\" : {\n            Durability:4,\n            SuitValue:\"10S\",\n            Footer:\"Item\",\n            Abilities:[\n                {Title:\"Damage 2\" , Text:\"Target player assigns 2 DC to a card in their field.\" , Flavour:\"\" , Cost:[\"Tap\"]}\n            ]\n        },\n        \"Portable Tent\" : {\n            Durability:4,\n            SuitValue:\"10D\",\n            Footer:\"Item\",\n            Abilities:[\n                {Title:\"Damage 2\" , Text:\"Target player assigns 2 DC to a card in their field.\" , Flavour:\"\" , Cost:[\"Tap\"]}\n            ]\n        },\n        \"Dragonbone Mace\" : {\n            Durability:6,\n            SuitValue:\"JC\",\n            Footer:\"Item\",\n            Abilities:[\n                {Title:\"Damage 2\" , Text:\"Target player assigns 2 DC to a card in their field.\" , Flavour:\"\" , Cost:[\"Tap\"]}\n            ]\n        },\n        \"Phantom Cloak\" : {\n            Durability:6,\n            SuitValue:\"JH\",\n            Footer:\"Item\",\n            Abilities:[\n                {Title:\"Damage 2\" , Text:\"Target player assigns 2 DC to a card in their field.\" , Flavour:\"\" , Cost:[\"Tap\"]}\n            ]\n        },\n        \"Arcane Tome\" : {\n            Durability:6,\n            SuitValue:\"JS\",\n            Footer:\"Item\",\n            Abilities:[\n                {Title:\"Damage 2\" , Text:\"Target player assigns 2 DC to a card in their field.\" , Flavour:\"\" , Cost:[\"Tap\"]}\n            ]\n        },\n        \"Ring of Adaptation\" : {\n            Durability:6,\n            SuitValue:\"JD\",\n            Footer:\"Item\",\n            Abilities:[\n                {Title:\"Damage 2\" , Text:\"Target player assigns 2 DC to a card in their field.\" , Flavour:\"\" , Cost:[\"Tap\"]}\n            ]\n        },\n        \"Titan's Gauntlets\" : {\n            Durability:6,\n            SuitValue:\"QC\",\n            Footer:\"Item\",\n            Abilities:[\n                {Title:\"Damage 2\" , Text:\"Target player assigns 2 DC to a card in their field.\" , Flavour:\"\" , Cost:[\"Tap\"]}\n            ]\n        },\n        \"Shadow Blade\" : {\n            Durability:6,\n            SuitValue:\"QH\",\n            Footer:\"Item\",\n            Abilities:[\n                {Title:\"Damage 2\" , Text:\"Target player assigns 2 DC to a card in their field.\" , Flavour:\"\" , Cost:[\"Tap\"]}\n            ]\n        },\n        \"Archmage's Staff\" : {\n            Durability:6,\n            SuitValue:\"QS\",\n            Footer:\"Item\",\n            Abilities:[\n                {Title:\"Damage 2\" , Text:\"Target player assigns 2 DC to a card in their field.\" , Flavour:\"\" , Cost:[\"Tap\"]}\n            ]\n        },\n        \"Chameleon Cloak\" : {\n            Durability:6,\n            SuitValue:\"QD\",\n            Footer:\"Item\",\n            Abilities:[\n                {Title:\"Damage 2\" , Text:\"Target player assigns 2 DC to a card in their field.\" , Flavour:\"\" , Cost:[\"Tap\"]}\n            ]\n        },\n        \"Ironclad Bruiser\" : {\n            Durability:8,\n            SuitValue:\"KC\",\n            Footer:\"Item\",\n            Abilities:[\n                {Title:\"Damage 2\" , Text:\"Target player assigns 2 DC to a card in their field.\" , Flavour:\"\" , Cost:[\"Tap\"]}\n            ]\n        },\n        \"The Elven Scout\" : {\n            Durability:8,\n            SuitValue:\"KH\",\n            Footer:\"Item\",\n            Abilities:[\n                {Title:\"Damage 2\" , Text:\"Target player assigns 2 DC to a card in their field.\" , Flavour:\"\" , Cost:[\"Tap\"]}\n            ]\n        },\n        \"The Wise Sage\" : {\n            Durability:8,\n            SuitValue:\"KS\",\n            Footer:\"Item\",\n            Abilities:[\n                {Title:\"Damage 2\" , Text:\"Target player assigns 2 DC to a card in their field.\" , Flavour:\"\" , Cost:[\"Tap\"]}\n            ]\n        },\n        \"The Mercenary\" : {\n            Durability:8,\n            SuitValue:\"KD\",\n            Footer:\"Item\",\n            Abilities:[\n                {Title:\"Damage 2\" , Text:\"Target player assigns 2 DC to a card in their field.\" , Flavour:\"\" , Cost:[\"Tap\"]}\n            ]\n        },\n        \"- Garran Stonefist -\" : {\n            Durability:18,\n            SuitValue:\"Jo\",\n            Footer:\"Character Placeholder\",\n            Abilities:[]\n        },\n        \"- Tessa Vale -\" : {\n            Durability:14,\n            SuitValue:\"Jo\",\n            Footer:\"Character Placeholder\",\n            Abilities:[]\n        },\n        \"- Victor Wren -\" : {\n            Durability:14,\n            SuitValue:\"Jo\",\n            Footer:\"Character Placeholder\",\n            Abilities:[]\n        },\n        \"- Rosie Goodwin -\" : {\n            Durability:16,\n            SuitValue:\"Jo\",\n            Footer:\"Character Placeholder\",\n            Abilities:[]\n        },\n        \"Help Card\" : {\n            Durability:0,\n            SuitValue:\"Jo\",\n            Footer:\"Help Card\",\n            Abilities:[],\n            HelpText:\"Setup for each player:\\n- Remove the 4 'Character' cards from your deck; place 1 in front of you (your Field) and set the rest aside. Your deck now has 48 'Item' and 'Ally' cards.\\n- Shuffle your deck and draw 5 cards from it. Players decide who goes first and turns proceed clockwise.\\n\\nDuring your Turn:\\n- Use abilities from cards in your field, most have costs. For what abilities look like and what their costs mean, see Help Card 2.\\n- If an abilities cost cannot be paid, the ability does not happen.\\n- Some cards have a durability value in the top-right of the card between its Name and Value-Suit (For use as standard playing cards).\\n\\nEnd of Turn:\\n- Any cards with no durability or Damage Counters (DC) at least equal to it, is destroyed.\\n- When a card is destroyed or discarded, it leaves your hand or field and moves next to it's owners Deck face-up (this is their Discard pile).\\n- Any player's with more than 5 cards in their hand has to discard cards from their hand until they have 5.\\n- Any player without a Character card in their field is out of the game and removes all cards they own from play.\\n- If you are the last remaining player, you win.\"\n        },\n        \"Help Card 2\" : {\n            Durability:0,\n            SuitValue:\"Jo\",\n            Footer:\"Help Card\",\n            Abilities:[\n                {Title:\"Slow\" , Text:\"After this ability fully resolves, your turn ends.\" , Flavour:\"\" , Cost:[\"Slow\"]},\n                {Title:\"Tap\" , Text:\"Tap a card by turning it sideways. You can't use the ability if it's already tapped. Untapping resets this.\" , Flavour:\"\" , Cost:[\"Tap\"]},\n                {Title:\"Power Point\" , Text:\"Consume 1 Power Point generated from other abilities. Power Points only last until the end of the current turn.\" , Flavour:\"\" , Cost:[\"Power\"]},\n                {Title:\"Agility Point\" , Text:\"Consume 1 Agility Point generated from other abilities. Agility Points only last until the end of the current turn.\" , Flavour:\"\" , Cost:[\"Agility\"]},\n                {Title:\"Wisdom Point\" , Text:\"Consume 1 Wisdom Point generated from other abilities. Wisdom Points only last until the end of the current turn.\" , Flavour:\"\" , Cost:[\"Wisdom\"]}\n            ]\n        }\n    }\n};\n\n\n//---------- C R E A T I O N ----------\n\n\nconst cardCnv = document.createElement('canvas');\nconst cardCtx = cardCnv.getContext('2d');\nconst icons = {\"Slow\":\"\" , \"Tap\":\"\" , \"Power\":\"\" , \"Agility\":\"\" , \"Wisdom\":\"\"};\n\n\n\nconst iconImage = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAAAQCAYAAACBSfjBAAAAAXNSR0IArs4c6QAAAORJREFUWIXtl+sOgyAMhWHZ+79y92cm2J1eaJkY0y8hIlIutT1ia0Wxk87uKWgn2aJ+j+IN2qxNa04ebYldV48fGcM7t9Tv5/nLuaAMfShZPBmi9fFmmBsUgdTsNzALgbrl0Ki8rLJ3wSPwmBRN5t04gts8RhtRCiMnZpzHx50Zg4YSIWPrskcpnMFabDbyroxcHkBwbkkD29eA1zV9lI42Xbla7HK4JmEneAoj5x3tmj5K8LSNpPFOzNODpIHSG5jduOTsv3wRF9OF+glJA1dFyEy63wm0PhhYK3/lEFkNLIpC5QPRVTgksfcGbAAAAABJRU5ErkJggg==\";\nsplitBase64Image(iconImage, Object.keys(icons).length);\n\n\n\n\n\n\n\nfunction drawCard(deck, cardTitle, x=0, y=0) {\n\n    cardCtx.fillStyle = \"black\";\n    cardCtx.fillRect(x, y, 512, 768);\n    cardCtx.fillStyle = \"white\";\n    cardCtx.fillRect(x+8, y+8, 512-16, 768-16);\n    const cardData = decks[deck][cardTitle];\n\n\n    if (cardData.Durability == 0) {\n        drawShape([{x:x , y:y+16} , {x:x+436 , y:y+16} , {x:x+436-48 , y:y+16+48} , {x:x , y:y+16+48}], 4); // <---- T I T L E   A R E A   ---- T E X T   A R E A ----> X+0 -> X+388\n        drawCenteredAndWrappedText(cardCtx, cardTitle, x+4, y+40, 388-8, \"bold 32px MyCustomFont\", \"black\", \"center\"); // <---- T I T L E   T E X T\n    } else {\n        drawShape([{x:x , y:y+16} , {x:x+342 , y:y+16} , {x:x+342-48 , y:y+16+48} , {x:x , y:y+16+48}], 4); // <---- T I T L E   A R E A   ---- T E X T   A R E A ----> X+0 -> X+294\n        drawShape([{x:x+436 , y:y+16} , {x:x+358 , y:y+16} , {x:x+358-48 , y:y+16+48} , {x:x+436-48 , y:y+16+48}], 4); // <---- D U R A B I L I T Y   A R E A   ---- T E X T   A R E A ----> X+358 -> X+388\n        drawCenteredAndWrappedText(cardCtx, cardTitle, x+4, y+40, 294-8, \"bold 32px MyCustomFont\", \"black\", \"center\"); // <---- T I T L E   T E X T\n        drawCenteredAndWrappedText(cardCtx, `${cardData.Durability}`, x+358, y+40, 30, \"bold 32px MyCustomFont\", \"black\", \"center\"); // <---- D U R A B I L I T Y   T E X T\n    }\n\n\n    drawShape([{x:x+512 , y:y+16} , {x:x+452 , y:y+16} , {x:x+452-48 , y:y+16+48} , {x:x+512 , y:y+16+48}], 4); // <---- S U I T   V A L U E   A R E A   ---- T E X T   A R E A ----> X+452 -> X+512\n    drawCenteredAndWrappedText(cardCtx, `${cardData.SuitValue}`, x+444, y+40, 60, \"bold 32px MyCustomFont\", \"black\", \"left\"); // <---- S U I T   V A L U E   T E X T\n\n    for (let i=0; i<cardData.Abilities.length; i++) {\n        const ability = cardData.Abilities[cardData.Abilities.length-1-i];\n        cardCtx.fillStyle = \"black\";\n        cardCtx.fillRect(x+24, y+768-24-96-(i*112)-24, 464, 96); // <---- A B I L I T Y   O U T E R   A R E A\n        cardCtx.fillStyle = \"white\";\n        cardCtx.fillRect(x+24+4, y+768-24-96-(i*112)+4-24, 464-8, 96-8); // <---- A B I L I T Y   I N N E R   A R E A\n\n        for (let j=0; j<ability.Cost.length; j++) {\n            drawCircle(x+40+(56*j) , y+768-24-96-(i*112)+16-24 , 24 , \"black\"); // <---- A B I L I T Y   C O S T   O U T E R   A R E A\n            drawCircle(x+40+(56*j) , y+768-24-96-(i*112)+16-24 , 20 , \"white\"); // <---- A B I L I T Y   C O S T   I N N E R   A R E A\n            cardCtx.imageSmoothingEnabled = false;\n            cardCtx.drawImage(icons[ability.Cost[j]], x+40+(56*j)-16 , y+768-24-96-(i*112)+16-16-24, 32, 32); // <---- D R A W   A B I L I T Y   I C O N\n        }\n        drawCenteredAndWrappedText(cardCtx, ability.Title, x+24+4+(ability.Cost.length*56), y+768-24-96-(i*112)+4+16-24, 512-56-(ability.Cost.length*56), \"bold 24px MyCustomFont\", \"black\", \"left\"); // <---- A B I L I T Y   T I T L E   T E X T\n\n        if (ability.Text != \"\") drawCenteredAndWrappedText(cardCtx, ability.Text, x+24+4+4, y+768-24-96-(i*112)+66-24, 512-64, \"16px MyCustomFont\", \"black\", \"left\"); // <---- A B I L I T Y   T E X T\n        if (ability.Flavour != \"\") drawCenteredAndWrappedText(cardCtx, ability.Flavour, x+24+4+4, y+768-24-96-(i*112)+44-24, 512-64, \"italic bold 16px MyCustomFont\", \"black\", \"center\"); // <---- A B I L I T Y   F L A V O U R   T E X T\n    }\n    drawShape([{x:x , y:y+768} , {x:x+32 , y:y+768-32} , {x:x+512-32 , y:y+768-32} , {x:x+512 , y:y+768}], 4); // <---- D R A W   C L A S S   A R E A\n    drawCenteredAndWrappedText(cardCtx, cardData.Footer, x+32, y+768-20, 512-64, \"16px MyCustomFont\", \"black\", \"center\"); // <---- C L A S S   T E X T\n\n    if (\"HelpText\" in cardData) drawCenteredAndWrappedText(cardCtx, cardData.HelpText, x+12, y+400, 512-24, \"bold 19px MyCustomFont\", \"black\", \"left\"); // <---- H E L P   T E X T\n}\n\n\n\n\n\n\n\n\n\nfunction splitBase64Image(base64String, numOfImages) {\n    var img = new Image();\n    img.onload = function() {\n        var tempCnv = document.createElement('canvas');\n        var tempCtx = tempCnv.getContext('2d');\n        tempCnv.width = img.width;\n        tempCnv.height = img.height;\n        tempCtx.drawImage(img, 0, 0);\n\n        var subWidth = Math.floor(img.width / numOfImages);\n        var loadedCount = 0;\n\n        for (let i = 0; i < numOfImages; i++) {\n            var subCnv = document.createElement('canvas');\n            var subCtx = subCnv.getContext('2d');\n            subCnv.width = subWidth;\n            subCnv.height = img.height;\n\n            subCtx.drawImage(tempCnv, \n                             i * subWidth, 0, \n                             subWidth, img.height, \n                             0, 0, \n                             subWidth, img.height);\n\n            var subImage = new Image();\n            subImage.onload = function() {\n                loadedCount++;\n                if (loadedCount === numOfImages) {\n                    downloadCardsFromDeck();\n                }\n            };\n            subImage.src = subCnv.toDataURL('image/png');\n            icons[Object.keys(icons)[i]] = subImage;\n        }\n    };\n    img.src = base64String;\n}\n\n\n\nfunction downloadCardsFromDeck() {\n    cardCtx.clearRect(0, 0, cardCnv.width, cardCnv.height);\n    let snapTrack = 0;\n    let yTrack = 0;\n    let xTrack = 0;\n    cardCnv.width = xCoord*512;\n    cardCnv.height = yCoord*768;\n\n    for (const cardTitle in decks[deckToDownload]) {\n        drawCard(deckToDownload , cardTitle , xTrack*512 , yTrack*768);\n        if (xTrack < (xCoord-1)) {\n            xTrack += 1;\n        } else {\n            xTrack = 0;\n            if (yTrack < (yCoord-1)) {\n                yTrack += 1;\n            } else {\n                snapCanvas(`Cards_${snapTrack}`);\n                snapTrack += 1;\n                cardCtx.clearRect(0, 0, cardCnv.width, cardCnv.height);\n                yTrack = 0;\n            }\n        } \n    }\n    if (!(xTrack == 0 && yTrack == 0)) {\n        snapCanvas(`Cards_${snapTrack}`);\n        cardCtx.clearRect(0, 0, cardCnv.width, cardCnv.height);\n    }\n    home();\n}\n\n\n\n\nfunction snapCanvas(name) {\n    cardCtx.imageSmoothingEnabled = false;\n    let cardCnvImage = cardCnv.toDataURL(\"image/png\", 1.0);\n    let link = document.createElement('a');\n    link.download = `${name}.png`;\n    link.href = cardCnvImage;\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n}\n\n\n\nfunction drawCircle(centerX , centerY , radius , colour) {\n    cardCtx.beginPath();\n    cardCtx.arc(centerX, centerY, radius, 0, 2 * Math.PI);\n    cardCtx.fillStyle = colour;\n    cardCtx.fill();\n}\n\n\n\nfunction drawShape(locations, width) {\n    cardCtx.beginPath();\n    cardCtx.moveTo(locations[0].x, locations[0].y);\n    for (let i=1; i<locations.length; i++) {\n        cardCtx.lineTo(locations[i].x, locations[i].y);\n    }\n    cardCtx.closePath();\n    cardCtx.lineWidth = width;\n    cardCtx.strokeStyle = \"black\";\n    cardCtx.stroke();\n}\n\nfunction drawCenteredAndWrappedText(canvasCtx, text, x, y, maxWidth, font, textStyle, align) {\n    canvasCtx.fillStyle = textStyle;\n    let xCoord = (align == \"left\") ? x : x + (maxWidth / 2);\n    canvasCtx.font = font;\n    let fontSize = parseInt(font.match(/\\d+px/)[0]);\n    let lineHeight = fontSize * 1.2;\n    canvasCtx.textAlign = align;\n    canvasCtx.textBaseline = \"middle\";\n\n    // Split the text by \\n and keep track of empty lines for multiple newlines\n    let parts = text.split('\\n');\n    let lines = [];\n    \n    for (let part of parts) {\n        let words = part.split(' ');\n        let currentLine = '';\n\n        for (let word of words) {\n            let testLine = currentLine + word + ' ';\n            let metrics = canvasCtx.measureText(testLine);\n            \n            if (metrics.width > maxWidth) {\n                if (currentLine) lines.push(currentLine.trim());\n                currentLine = word + ' ';\n            } else {\n                currentLine = testLine;\n            }\n        }\n        \n        if (currentLine.trim().length > 0) lines.push(currentLine.trim());\n        // If there's an empty part (i.e., \\n\\n), just push a blank line\n        if (part === '') lines.push('');\n    }\n\n    // Calculate total height including any extra space for blank lines (multiple \\n)\n    let totalHeight = lines.length * lineHeight;\n    let startY = y - totalHeight / 2 + lineHeight / 2;\n    \n    lines.forEach((line, index) => {\n        // If the line is empty (for consecutive \\n), add more vertical space\n        let yOffset = line === '' ? lineHeight * 1.5 : lineHeight; // Increase the gap for blank lines\n        canvasCtx.fillText(line, xCoord, startY + index * yOffset);\n    });\n}\n\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","//Tasks\n\nwindow.tasks = function() {\n    if (!(\"tasks\" in persistent)) {\n        persistent[\"tasks\"] = {\n            \"Sunday\" : [\"Washing Up\", \"Hoover\", \"Exercise\", \"Clean Draining Board\"],\n            \"Monday\" : [\"Washing Up\", \"Laundry\", \"Exercise\", \"Clean Draining Board\"],\n            \"Tuesday\" : [\"Empty all the Bin's\", \"Washing Up\", \"Exercise\", \"Clean Draining Board\"],\n            \"Wednesday\" : [\"Washing Up\", \"Exercise\", \"Clean Draining Board\"],\n            \"Thursday\" : [\"Clean the Bath\", \"Clean Sinks\", \"Washing Up\", \"Hoover\", \"Exercise\", \"Clean Draining Board\"],\n            \"Friday\" : [\"Washing Up\", \"Exercise\", \"Clean Draining Board\"],\n            \"Saturday\" : [\"Washing Up\", \"Laundry\", \"Mop Kitchen\", \"Tidy Lounge\", \"Exercise\", \"Clean Draining Board\", \"Clean Zuri Bowl's\"],\n            \"01\" : [\"Deep Clean Kitchen\"],\n            \"03\" : [\"Wash Bedding\"],\n            \"06\" : [\"Car Check\"],\n            \"10\" : [\"Wash Zuri's Bedding\"],\n            \"17\" : [\"Dust\"]\n        }\n    }\n\n    const today = new Date();\n    const year = today.getFullYear();\n    const month = String(today.getMonth() + 1).padStart(2, '0'); \n    const day = String(today.getDate()).padStart(2, '0');\n    const weekDay = today.toLocaleDateString('en-US', { weekday: 'long' });\n    const longDate = `${year}-${month}-${day}`;\n    const colours = [\"white\" , \"#ff93f4\" , \"#5966ff\" , \"#ffca60\"];\n\n    if (!(\"calender\" in persistent)) {\n        persistent[\"calender\"] = {\"lastChecked\" : longDate};\n    }\n\n    if (!(longDate in persistent.calender)) persistent.calender[longDate] = {};\n    for (let i=0; i<persistent.tasks[weekDay].length; i++) {\n        if (!(persistent.tasks[weekDay][i] in persistent.calender[longDate])) persistent.calender[longDate][persistent.tasks[weekDay][i]] = 0;\n    }\n    if (day in persistent.tasks) {\n        for (let i=0; i<persistent.tasks[day].length; i++) {\n            if (!(persistent.tasks[day][i] in persistent.calender[longDate])) persistent.calender[longDate][persistent.tasks[day][i]] = 0;\n        }\n    }\n    if (persistent.calender.lastChecked != longDate) {\n        for (const taskName in persistent.calender[persistent.calender.lastChecked]) {\n            if (persistent.calender[persistent.calender.lastChecked][taskName] == 3) {\n                if (!(taskName in persistent.calender[longDate])) persistent.calender[longDate][taskName] = 0;\n            }\n        }\n        persistent.calender.lastChecked = longDate;\n    }\n\n    window.showTasks = function() {\n        saveData();\n        let taskText = \"\";\n        for (const taskName in persistent.calender[longDate]) {\n            taskText += `<button style=\"width:100%; height: 60px; background-color: ${colours[persistent.calender[longDate][taskName]]}; border-radius: 6px; font-size: 24px;\" onclick=\"toggleTask('${taskName}')\">${taskName}</button>`\n        }\n        page.innerHTML = `\n            <button style=\"position: absolute; width: 140px; height: 40px; right: 10px; top: 10px; border-radius: 6px; font-size: 24px;\">New Task</button>\n            <div style=\"position: absolute; width: calc(100% - 20px); height: calc(100% - 70px); left: 10px; top: 60px; display: flex; flex-direction: column; gap: 10px; padding: 5px; border: solid black 2px; border-radius: 6px; overflow-y: auto; scrollbar-width: none; background-color: rgba(255,255,255,0.2);\">\n                ${taskText}\n            </div>\n        `;\n    }\n\n    window.toggleTask = function(taskName) {\n        persistent.calender[longDate][taskName] = (persistent.calender[longDate][taskName] == 3) ? 0 : (persistent.calender[longDate][taskName] + 1);\n        showTasks();\n    }\n\n    showTasks();\n}\n\n\n\n\n\n","//Notes\n\nwindow.notes = function() {\n    if (!(\"notes\" in persistent)) persistent[\"notes\"] = {\"Initial Collection\" : [\"First Page\"]}\n\n    window.note = function(pageNumber=0, editMode=false) {\n        if ((pageNumber+1) == persistent.notes[collection].length) persistent.notes[collection].push(\"\");\n        let listButtons = \"\";\n        for (let i=0; i<persistent.notes[collection].length; i++) {\n            listButtons += `<button style=\"margin: 0 0 5px 5px; width: calc(100% - 12px); height: 40px; font-size: 24px;\" onclick=\"if (${editMode}) {persistent.notes['${collection}'][${pageNumber}] = editArea.value; saveData();} note(${i} , ${editMode});\">${i}</button>`;\n        }\n        page.innerHTML = `\n            <${editMode ? 'textarea' : 'div'} id=\"editArea\" style=\"position:absolute; border:solid black 2px; width:calc(100% - 20px); height:calc(100% - 70px); left:10px; top:60px; padding:5px; overflow-y:auto; background-color: white; border-radius: 6px;\" wrap=off></${editMode ? 'textarea' : 'div'}>\n            <button id=\"editButton\" onclick=\"if (${editMode}) {persistent.notes['${collection}'][${pageNumber}] = editArea.value; saveData();} note(${pageNumber} , ${!editMode});\" style=\"position:absolute; top:10px; left: 10px; height: 40px; width: 100px; font-size: 24px; border-radius: 6px;\">${editMode ? 'Save' : 'Edit'}</button>\n            <div style=\"position:absolute; top:10px; right: 10px; height: 40px; width: 140px; font-size: 24px; display: flex; align-items: center; background-color: white; border-radius: 6px; padding-left: 8px; white-space: pre;\" onclick=\"noteList.style.display = (noteList.style.display == 'none') ? 'flex' : 'none'\">Page:${pageNumber}</div>\n            <div id=\"noteList\" style=\"position: absolute; top: 55px; right: 10px; max-height: calc(100% - 115px); width: 140px; background-color: rgba(200,200,200, 1); padding-top: 5px; border: solid black 4px;  display: none; flex-direction: column; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.7); overflow-y: auto; scrollbar-width: none;\"> \n                ${listButtons}\n            </div>\n        `;\n        window.editArea = document.getElementById(\"editArea\");\n        editArea.addEventListener('keydown', function(event) {\n            if (event.key === 'Tab' && editMode) {\n                event.preventDefault();\n                const start = editArea.selectionStart;\n                const end = editArea.selectionEnd;\n                editArea.value = editArea.value.substring(0, start) + '    ' + editArea.value.substring(end);\n                editArea.selectionStart = editArea.selectionEnd = start + 4;\n            }\n        });\n        if (editMode) {\n            editArea.value =  persistent.notes[collection][pageNumber];\n        } else {\n            editArea.innerHTML =  persistent.notes[collection][pageNumber];\n        }\n    };\n\n    window.showCollections = function() {\n\n        let collectionText = \"\";\n        for (const collectionName in persistent.notes) {\n            collectionText += `<button onclick=\"window.collection = '${collectionName}'; note();\" style=\"width: 100%; height: 200px; font-size: 24px; border-radius: 6px;\">${collectionName}</button>`;\n        }\n\n        page.innerHTML = `\n            <div style=\"display: flex; position: absolute; top: 10px; left: 10px; width: calc(100% - 20px); height: 50px; gap: 10px;\">\n                <button onclick=\"const newName = prompt('Please enter the name of the Collection to remove.'); if (newName in persistent.notes) {delete persistent.notes[newName]; saveData();} showCollections();\" style=\"height: 100%; width: 140px; font-size: 24px; border: solid black 2px; border-radius: 6px;\">Remove</button>\n                <div style=\"height: 100%; width: 100%; font-size: 24px; display: flex; justify-content: center; align-items: center; border: solid black 2px; border-radius: 6px; background-color: rgba(255,255,255,0.8);\">Note Collections</div>\n                <button onclick=\"const newName = prompt('Please enter the new name for the Collection.'); persistent.notes[newName] = ['First Page']; saveData(); showCollections();\" style=\"height: 100%; width: 140px; font-size: 24px; border: solid black 2px; border-radius: 6px;\">New</button>\n            </div>\n            <div style=\"display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); position: absolute; top: 70px; left: 10px; width: calc(100% - 20px); max-height: calc(100% - 80px); gap: 10px; overflow-y: auto; scrollbar-width: none; border: solid black 2px; border-radius: 6px; padding: 5px; background-color: rgba(255,255,255,0.6);\">\n                ${collectionText}\n            </div>\n\n        `;\n    };\n\n    showCollections();\n} ","//Import\n\nwindow.exportToolKit = function() {\n\n    const input = document.createElement('input');\n    input.type = 'file';\n    input.accept = '.json';\n\n    input.onchange = function(event) {\n        const file = event.target.files[0];\n        const reader = new FileReader();\n\n        reader.onload = function(e) {\n            try {\n                const data = JSON.parse(e.target.result);\n                if (Array.isArray(data)) {\n                    toolKit = data[0];\n                    persistent = data[1];        \n                    saveData();\n                    createScript();\n                    home();\n                }\n            } catch (error) {\n                console.log(error);\n            }\n        };\n        reader.onerror = function(error) {\n            console.log(error);\n        };\n        reader.readAsText(file);\n    };\n    input.click();\n}","//Export\n\nwindow.exportToolKit = function() {\n\n\n    page.innerHTML += `\n\n        <div style=\"background-color: #fff; padding: 10px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.7); font-family: sans-serif; display: flex; justify-content: center; align-items: center; flex-direction: column; position: absolute; width: 300px; height: 300px; top: calc(50% - 150px); left: calc(50% - 150px);\">\n            <h2 style=\"text-align: center; margin-bottom: 20px; color: #333;\">How would you like to export this ToolKit?</h2>\n            <form onsubmit=\"event.preventDefault(); exportAsHTMLAndJSON();\">\n                <label for=\"jsonCheckbox\">\n                    <input type=\"checkbox\" id=\"jsonCheckbox\" name=\"jsonCheckbox\" checked=true>  <u>JSON</u> : Can be Imported\n                </label>\n                <label for=\"htmlCheckbox\">\n                    <input type=\"checkbox\" id=\"htmlCheckbox\" name=\"htmlCheckbox\">  <u>HTML</u> : Can be run\n                </label>\n                <hr style=\"width: 260px;\">\n                <button id=\"exportButton\" type=\"submit\" style=\"background-color: #007bff; color: #fff; padding: 10px 15px; border: none; border-radius: 4px; cursor: pointer; width: 100%;\">Export</button>\n            </form>\n        </div>\n    `\n    window.jsonCheckbox = document.getElementById(\"jsonCheckbox\");\n    window.htmlCheckbox = document.getElementById(\"htmlCheckbox\");\n\n    window.exportAsHTMLAndJSON = function() {\n\n        if (jsonCheckbox.checked) {\n            const data = [toolKit, persistent];\n            const jsonStr = JSON.stringify(data, null, 2);\n            const blob = new Blob([jsonStr], {type: \"application/json\"});\n            const link = document.createElement('a');\n            link.href = URL.createObjectURL(blob);\n            link.download = \"SaveFile.json\";\n            link.click();\n            URL.revokeObjectURL(link.href);\n        }\n\n        if (htmlCheckbox.checked) {\n            document.getElementById(`ToolKitScript`).remove();\n            customHTML.innerHTML = \"\";\n            customStyle.innerHTML = \"\";\n            let htmlContent = document.documentElement.outerHTML;\n\n            const htmlStart = htmlContent.split(\"//MARK1\").shift();\n            const htmlFinish =  htmlContent.split(\"//MARK2\").pop();\n            const newHTML = htmlStart + `//MARK1\\n            let toolKit = ` + JSON.stringify(toolKit) + \";\\n            let persistent = \" +  JSON.stringify(persistent) + \";\\n            //MARK2\" + htmlFinish;\n\n            const blob = new Blob([newHTML], {type: 'text/html'});\n            const a = document.createElement('a');\n            a.href = URL.createObjectURL(blob);\n            a.download = 'ToolKit.html';\n            a.click();\n            URL.revokeObjectURL(a.href);\n        }\n\n        home();\n    }\n}\n\n\n","//Edit\n\nwindow.editToolKit = function(editingPage=0) {\n    window.page.innerHTML = '';\n    if (editingPage == toolKit.length-1) toolKit.push(`//Page ${editingPage+1}\\n`)\n    if (editingPage > 0) page.innerHTML += `<button onclick=\"toolKit[${editingPage}] = editArea.value; saveData(); editToolKit(${editingPage-1});\" style=\"position:absolute; top:10px; left:10px; height:40px; width:calc(50% - 60px); font-size: 24px; border-radius: 6px;\">${toolKit[editingPage-1].split(\"\\n\")[0].substring(2)}</button>`;\n    page.innerHTML += `\n            <textarea id=\"editArea\" style=\"position:absolute; border:solid black 2px; width:calc(100% - 20px); height:calc(100% - 70px); left:10px; top:60px; padding:5px; overflow-y:auto;\" wrap=off></textarea>\n            <button onclick=\"toolKit[${editingPage}] = editArea.value; saveData(); createScript(); home();\" style=\"position:absolute; top:10px; left:calc(50% - 40px); height:40px; width: 80px; font-size: 24px; border-radius: 6px;\">Save</button>\n            <button onclick=\"toolKit[${editingPage}] = editArea.value; saveData(); editToolKit(${editingPage+1});\" style=\"position:absolute; top:10px; right:10px; height:40px; width:calc(50% - 60px); font-size: 24px; border-radius: 6px;\">${toolKit[editingPage+1].split(\"\\n\")[0].substring(2)}</button>\n        `;\n    window.editArea = document.getElementById(\"editArea\");\n    editArea.value = toolKit[editingPage];\n    editArea.addEventListener('keydown', function(event) {\n        if (event.key === 'Tab') {\n            event.preventDefault();\n            const start = editArea.selectionStart;\n            const end = editArea.selectionEnd;\n            editArea.value = editArea.value.substring(0, start) + '    ' + editArea.value.substring(end);\n            editArea.selectionStart = editArea.selectionEnd = start + 4;\n        }\n    });\n}\n\n\n","//Page 10\n"];
            let persistent = {};
            //MARK2
            window.db;
            window.openDB = function() {
                return new Promise((resolve, reject) => {
                    const request = indexedDB.open("myDataDB", 1);
                    request.onerror = () => reject(request.error);
                    request.onsuccess = () => {
                        window.db = request.result;
                        resolve();
                    };
                    request.onupgradeneeded = (event) => {
                        window.db = event.target.result;
                        window.db.createObjectStore("data", { keyPath: "id" });
                    };
                });
            }
            window.saveData = function() {
                return window.openDB().then(() => {
                    const transaction = window.db.transaction(["data"], "readwrite");
                    const objectStore = transaction.objectStore("data");
                    const request = objectStore.put({
                        id: "allData",
                        toolKit: JSON.stringify(toolKit),
                        persistent: JSON.stringify(persistent)
                    });
                    return new Promise((resolve, reject) => {
                        request.onsuccess = () => resolve();
                        request.onerror = () => reject(request.error);
                    });
                });
            }
            window.loadData = function() {
                return window.openDB().then(() => {
                    const transaction = window.db.transaction(["data"], "readonly");
                    const objectStore = transaction.objectStore("data");
                    const request = objectStore.get("allData");
                    return new Promise((resolve, reject) => {
                        request.onsuccess = () => {
                            if (request.result) {
                                toolKit = JSON.parse(request.result.toolKit);
                                persistent = JSON.parse(request.result.persistent);
                                resolve({
                                    toolKit: true,
                                    persistent: true
                                });
                            } else {
                                resolve({ toolKit: null, persistent: null });
                            }
                        };
                        request.onerror = () => reject(request.error);
                    });
                });
            }
            window.reset = function() {
                return new Promise((resolve, reject) => {
                    const request = indexedDB.deleteDatabase("myDataDB");
                    request.onerror = () => reject(request.error);
                    request.onsuccess = () => resolve();
                });
            }
            class PRNG {
                constructor(seed) {
                    this.seed = seed || Math.floor(Math.random() * 2**32);
                    this.a = 1664525;
                    this.c = 1013904223;
                    this.m = 2**32;
                    this.z = this.seed;
                }
                random() {
                    this.z = (this.a * this.z + this.c) % this.m;
                    return this.z / this.m;
                }
                range(min, max) {
                    return min + (max - min) * this.random();
                }
                intRange(min, max) {
                    return Math.floor(this.range(min, max));
                }
                reset() {
                    this.z = this.seed;
                }
                newSeed(newSeed) {
                    this.seed = newSeed;
                    this.z = newSeed;
                }
            }     
            window.loadData().then(data => {
                if (data.toolKit === null || data.persistent === null) {
                    console.log("No data found or data not yet saved so using default.");
                    window.saveData();
                }
                createScript();
            });
            function createScript() {
                if (document.getElementById(`ToolKitScript`)) document.getElementById(`ToolKitScript`).remove();
                let funcText = "";
                for (let i=0; i<toolKit.length; i++) {
                    funcText += toolKit[i] + "\n";
                } 
                let scriptTag = document.createElement('script');
                scriptTag.innerHTML = funcText;
                scriptTag.id = `ToolKitScript`;
                document.body.appendChild(scriptTag);
            }
        </script>

</body></html>